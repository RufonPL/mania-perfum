;$(document).ready(function(){ajaxCart.overrideButtonsInThePage();$(document).on('click','.block_cart_collapse',function(e){e.preventDefault();ajaxCart.collapse();});$(document).on('click','.block_cart_expand',function(e){e.preventDefault();ajaxCart.expand();});var current_timestamp=parseInt(new Date().getTime()/1000);if(typeof $('.ajax_cart_quantity').html()=='undefined'||(typeof generated_date!='undefined'&&generated_date!=null&&(parseInt(generated_date)+30)<current_timestamp))
ajaxCart.refresh();var cart_block=new HoverWatcher('#header .cart_block');var shopping_cart=new HoverWatcher('#header .shopping_cart');var is_touch_enabled=false;if('ontouchstart'in document.documentElement)
is_touch_enabled=true;$(document).on('click','#header .shopping_cart > a:first',function(e){e.preventDefault();e.stopPropagation();if(is_touch_enabled)
{if($(this).next('.cart_block:visible').length&&!cart_block.isHoveringOver())
$("#header .cart_block").stop(true,true).slideUp(450);else if(ajaxCart.nb_total_products>0||parseInt($('.ajax_cart_quantity').html())>0)
$("#header .cart_block").stop(true,true).slideDown(450);return;}
else
window.location.href=$(this).attr('href');});$("#header .shopping_cart a:first").hover(function(){if(ajaxCart.nb_total_products>0||parseInt($('.ajax_cart_quantity').html())>0)
$("#header .cart_block").stop(true,true).slideDown(450);},function(){setTimeout(function(){if(!shopping_cart.isHoveringOver()&&!cart_block.isHoveringOver())
$("#header .cart_block").stop(true,true).slideUp(450);},200);});$("#header .cart_block").hover(function(){},function(){setTimeout(function(){if(!shopping_cart.isHoveringOver())
$("#header .cart_block").stop(true,true).slideUp(450);},200);});$(document).on('click','.delete_voucher',function(e){e.preventDefault();$.ajax({type:'POST',headers:{"cache-control":"no-cache"},async:true,cache:false,url:$(this).attr('href')+'?rand='+new Date().getTime()});$(this).parent().parent().remove();ajaxCart.refresh();if($('body').attr('id')=='order'||$('body').attr('id')=='order-opc')
{if(typeof(updateAddressSelection)!='undefined')
updateAddressSelection();else
location.reload();}});$(document).on('click','#cart_navigation input',function(e){$(this).prop('disabled','disabled').addClass('disabled');$(this).closest("form").get(0).submit();});$(document).on('click','#layer_cart .cross, #layer_cart .continue, .layer_cart_overlay',function(e){e.preventDefault();$('.layer_cart_overlay').hide();$('#layer_cart').fadeOut('fast');});$('#columns #layer_cart, #columns .layer_cart_overlay').detach().prependTo('#columns');});var ajaxCart={nb_total_products:0,overrideButtonsInThePage:function(){$(document).off('click','.ajax_add_to_cart_button').on('click','.ajax_add_to_cart_button',function(e){e.preventDefault();var idProduct=parseInt($(this).data('id-product'));var idProductAttribute=parseInt($(this).data('id-product-attribute'));var minimalQuantity=parseInt($(this).data('minimal_quantity'));if(!minimalQuantity)
minimalQuantity=1;if($(this).prop('disabled')!='disabled')
ajaxCart.add(idProduct,idProductAttribute,false,this,minimalQuantity);});if($('.cart_block').length){$(document).off('click','#add_to_cart button').on('click','#add_to_cart button',function(e){e.preventDefault();ajaxCart.add($('#product_page_product_id').val(),$('#idCombination').val(),true,null,$('#quantity_wanted').val(),null);});}
$(document).off('click','.cart_block_list .ajax_cart_block_remove_link').on('click','.cart_block_list .ajax_cart_block_remove_link',function(e){e.preventDefault();var customizationId=0;var productId=0;var productAttributeId=0;var customizableProductDiv=$($(this).parent().parent()).find("div[data-id^=deleteCustomizableProduct_]");var idAddressDelivery=false;if(customizableProductDiv&&$(customizableProductDiv).length)
{var ids=customizableProductDiv.data('id').split('_');if(typeof(ids[1])!='undefined')
{customizationId=parseInt(ids[1]);productId=parseInt(ids[2]);if(typeof(ids[3])!='undefined')
productAttributeId=parseInt(ids[3]);if(typeof(ids[4])!='undefined')
idAddressDelivery=parseInt(ids[4]);}}
if(!customizationId)
{var firstCut=$(this).parent().parent().data('id').replace('cart_block_product_','');firstCut=firstCut.replace('deleteCustomizableProduct_','');ids=firstCut.split('_');productId=parseInt(ids[0]);if(typeof(ids[1])!='undefined')
productAttributeId=parseInt(ids[1]);if(typeof(ids[2])!='undefined')
idAddressDelivery=parseInt(ids[2]);}
ajaxCart.remove(productId,productAttributeId,customizationId,idAddressDelivery);});},expand:function(){if($('.cart_block_list').hasClass('collapsed'))
{$('.cart_block_list.collapsed').slideDown({duration:450,complete:function(){$(this).parent().show();$(this).addClass('expanded').removeClass('collapsed');}});$.ajax({type:'POST',headers:{"cache-control":"no-cache"},url:baseDir+'modules/blockcart/blockcart-set-collapse.php'+'?rand='+new Date().getTime(),async:true,cache:false,data:'ajax_blockcart_display=expand',complete:function(){$('.block_cart_expand').fadeOut('fast',function(){$('.block_cart_collapse').fadeIn('fast');});}});}},collapse:function(){if($('.cart_block_list').hasClass('expanded'))
{$('.cart_block_list.expanded').slideUp('slow',function(){$(this).addClass('collapsed').removeClass('expanded');});$.ajax({type:'POST',headers:{"cache-control":"no-cache"},url:baseDir+'modules/blockcart/blockcart-set-collapse.php'+'?rand='+new Date().getTime(),async:true,cache:false,data:'ajax_blockcart_display=collapse'+'&rand='+new Date().getTime(),complete:function(){$('.block_cart_collapse').fadeOut('fast',function(){$('.block_cart_expand').fadeIn('fast');});}});}},refresh:function(){$.ajax({type:'POST',headers:{"cache-control":"no-cache"},url:(typeof(baseUri)!=='undefined')?baseUri+'?rand='+new Date().getTime():'',async:true,cache:false,dataType:"json",data:(typeof(static_token)!=='undefined')?'controller=cart&ajax=true&token='+static_token:'',success:function(jsonData)
{ajaxCart.updateCart(jsonData);}});},updateCartInformation:function(jsonData,addedFromProductPage){ajaxCart.updateCart(jsonData);if(addedFromProductPage)
{$('#add_to_cart button').removeProp('disabled').removeClass('disabled');if(!jsonData.hasError||jsonData.hasError==false)
$('#add_to_cart button').addClass('added');else
$('#add_to_cart button').removeClass('added');}
else
$('.ajax_add_to_cart_button').removeProp('disabled');},updateFancyBox:function(){},add:function(idProduct,idCombination,addedFromProductPage,callerElement,quantity,whishlist){if(addedFromProductPage&&!checkCustomizations())
{if(contentOnly)
{var productUrl=window.document.location.href+'';var data=productUrl.replace('content_only=1','');window.parent.document.location.href=data;return;}
if(!!$.prototype.fancybox)
$.fancybox.open([{type:'inline',autoScale:true,minHeight:30,content:'<p class="fancybox-error">'+fieldRequired+'</p>'}],{padding:0});else
alert(fieldRequired);return;}
if(addedFromProductPage)
{$('#add_to_cart button').prop('disabled','disabled').addClass('disabled');$('.filled').removeClass('filled');}
else
$(callerElement).prop('disabled','disabled');if($('.cart_block_list').hasClass('collapsed'))
this.expand();$.ajax({type:'POST',headers:{"cache-control":"no-cache"},url:baseUri+'?rand='+new Date().getTime(),async:true,cache:false,dataType:"json",data:'controller=cart&add=1&ajax=true&qty='+((quantity&&quantity!=null)?quantity:'1')+'&id_product='+idProduct+'&token='+static_token+((parseInt(idCombination)&&idCombination!=null)?'&ipa='+parseInt(idCombination):''+'&id_customization='+((typeof customizationId!=='undefined')?customizationId:0)),success:function(jsonData,textStatus,jqXHR)
{if(whishlist&&!jsonData.errors)
WishlistAddProductCart(whishlist[0],idProduct,idCombination,whishlist[1]);if(!jsonData.hasError)
{if(contentOnly)
window.parent.ajaxCart.updateCartInformation(jsonData,addedFromProductPage);else
ajaxCart.updateCartInformation(jsonData,addedFromProductPage);if(jsonData.crossSelling)
$('.crossseling').html(jsonData.crossSelling);if(idCombination)
$(jsonData.products).each(function(){if(this.id!=undefined&&this.id==parseInt(idProduct)&&this.idCombination==parseInt(idCombination))
if(contentOnly)
window.parent.ajaxCart.updateLayer(this);else
ajaxCart.updateLayer(this);});else
$(jsonData.products).each(function(){if(this.id!=undefined&&this.id==parseInt(idProduct))
if(contentOnly)
window.parent.ajaxCart.updateLayer(this);else
ajaxCart.updateLayer(this);});if(contentOnly)
parent.$.fancybox.close();}
else
{if(contentOnly)
window.parent.ajaxCart.updateCart(jsonData);else
ajaxCart.updateCart(jsonData);if(addedFromProductPage)
$('#add_to_cart button').removeProp('disabled').removeClass('disabled');else
$(callerElement).removeProp('disabled');}
emptyCustomizations();},error:function(XMLHttpRequest,textStatus,errorThrown)
{var error="Impossible to add the product to the cart.<br/>textStatus: '"+textStatus+"'<br/>errorThrown: '"+errorThrown+"'<br/>responseText:<br/>"+XMLHttpRequest.responseText;if(!!$.prototype.fancybox)
$.fancybox.open([{type:'inline',autoScale:true,minHeight:30,content:'<p class="fancybox-error">'+error+'</p>'}],{padding:0});else
alert(error);if(addedFromProductPage)
$('#add_to_cart button').removeProp('disabled').removeClass('disabled');else
$(callerElement).removeProp('disabled');}});},remove:function(idProduct,idCombination,customizationId,idAddressDelivery){$.ajax({type:'POST',headers:{"cache-control":"no-cache"},url:baseUri+'?rand='+new Date().getTime(),async:true,cache:false,dataType:"json",data:'controller=cart&delete=1&id_product='+idProduct+'&ipa='+((idCombination!=null&&parseInt(idCombination))?idCombination:'')+((customizationId&&customizationId!=null)?'&id_customization='+customizationId:'')+'&id_address_delivery='+idAddressDelivery+'&token='+static_token+'&ajax=true',success:function(jsonData){ajaxCart.updateCart(jsonData);if($('body').attr('id')=='order'||$('body').attr('id')=='order-opc')
deleteProductFromSummary(idProduct+'_'+idCombination+'_'+customizationId+'_'+idAddressDelivery);},error:function()
{var error='ERROR: unable to delete the product';if(!!$.prototype.fancybox)
{$.fancybox.open([{type:'inline',autoScale:true,minHeight:30,content:error}],{padding:0});}
else
alert(error);}});},hideOldProducts:function(jsonData){if($('.cart_block_list:first dl.products').length>0)
{var removedProductId=null;var removedProductData=null;var removedProductDomId=null;$('.cart_block_list:first dl.products dt').each(function(){var domIdProduct=$(this).data('id');var firstCut=domIdProduct.replace('cart_block_product_','');var ids=firstCut.split('_');var stayInTheCart=false;for(aProduct in jsonData.products)
{if(jsonData.products[aProduct]['id']==ids[0]&&(!ids[1]||jsonData.products[aProduct]['idCombination']==ids[1]))
{stayInTheCart=true;ajaxCart.hideOldProductCustomizations(jsonData.products[aProduct],domIdProduct);}}
if(!stayInTheCart)
{removedProductId=$(this).data('id');if(removedProductId!=null)
{var firstCut=removedProductId.replace('cart_block_product_','');var ids=firstCut.split('_');$('dt[data-id="'+removedProductId+'"]').addClass('strike').fadeTo('slow',0,function(){$(this).slideUp('slow',function(){$(this).remove();if($('.cart_block:first dl.products dt').length==0)
{$('.ajax_cart_quantity').html('0');$("#header .cart_block").stop(true,true).slideUp(200);$('.cart_block_no_products:hidden').slideDown(450);$('.cart_block dl.products').remove();}});});$('dd[data-id="cart_block_combination_of_'+ids[0]+(ids[1]?'_'+ids[1]:'')+(ids[2]?'_'+ids[2]:'')+'"]').fadeTo('fast',0,function(){$(this).slideUp('fast',function(){$(this).remove();});});}}});}},hideOldProductCustomizations:function(product,domIdProduct){var customizationList=$('ul[data-id="customization_'+product['id']+'_'+product['idCombination']+'"]');if(customizationList.length>0)
{$(customizationList).find("li").each(function(){$(this).find("div").each(function(){var customizationDiv=$(this).data('id');var tmp=customizationDiv.replace('deleteCustomizableProduct_','');var ids=tmp.split('_');if((parseInt(product.idCombination)==parseInt(ids[2]))&&!ajaxCart.doesCustomizationStillExist(product,ids[0]))
$('div[data-id="'+customizationDiv+'"]').parent().addClass('strike').fadeTo('slow',0,function(){$(this).slideUp('slow');$(this).remove();});});});}
var removeLinks=$('.deleteCustomizableProduct[data-id="'+domIdProduct+'"]').find('.ajax_cart_block_remove_link');if(!product.hasCustomizedDatas&&!removeLinks.length)
$('div[data-id="'+domIdProduct+'"]'+' span.remove_link').html('<a class="ajax_cart_block_remove_link" rel="nofollow" href="'+baseUri+'?controller=cart&amp;delete=1&amp;id_product='+product['id']+'&amp;ipa='+product['idCombination']+'&amp;token='+static_token+'"> </a>');if(product.is_gift)
$('div[data-id="'+domIdProduct+'"]'+' span.remove_link').html('');},doesCustomizationStillExist:function(product,customizationId){var exists=false;$(product.customizedDatas).each(function(){if(this.customizationId==customizationId)
{exists=true;return false;}});return(exists);},refreshVouchers:function(jsonData){if(typeof(jsonData.discounts)=='undefined'||jsonData.discounts.length==0)
$('.vouchers').hide();else
{$('.vouchers tbody').html('');for(i=0;i<jsonData.discounts.length;i++)
{if(parseFloat(jsonData.discounts[i].price_float)>0)
{var delete_link='';if(jsonData.discounts[i].code.length)
delete_link='<a class="delete_voucher" href="'+jsonData.discounts[i].link+'" title="'+delete_txt+'"><i class="fa fa-trash-o"></i></a>';$('.vouchers tbody').append($('<tr class="bloc_cart_voucher" data-id="bloc_cart_voucher_'+jsonData.discounts[i].id+'">'
+' <td class="quantity">1x</td>'
+' <td class="name" title="'+jsonData.discounts[i].description+'">'+jsonData.discounts[i].name+'</td>'
+' <td class="price">-'+jsonData.discounts[i].price+'</td>'
+' <td class="delete">'+delete_link+'</td>'
+'</tr>'));}}
$('.vouchers').show();}},updateProductQuantity:function(product,quantity){$('dt[data-id=cart_block_product_'+product.id+'_'+(product.idCombination?product.idCombination:'0')+'_'+(product.idAddressDelivery?product.idAddressDelivery:'0')+'] .quantity').fadeTo('fast',0,function(){$(this).text(quantity);$(this).fadeTo('fast',1,function(){$(this).fadeTo('fast',0,function(){$(this).fadeTo('fast',1,function(){$(this).fadeTo('fast',0,function(){$(this).fadeTo('fast',1);});});});});});},displayNewProducts:function(jsonData){$(jsonData.products).each(function(){if(this.id!=undefined)
{if($('.cart_block:first dl.products').length==0)
{$('.cart_block_no_products').before('<dl class="products"></dl>');$('.cart_block_no_products').hide();}
var domIdProduct=this.id+'_'+(this.idCombination?this.idCombination:'0')+'_'+(this.idAddressDelivery?this.idAddressDelivery:'0');var domIdProductAttribute=this.id+'_'+(this.idCombination?this.idCombination:'0');if($('dt[data-id="cart_block_product_'+domIdProduct+'"]').length==0)
{var productId=parseInt(this.id);var productAttributeId=(this.hasAttributes?parseInt(this.attributes):0);var content='<dt class="unvisible" data-id="cart_block_product_'+domIdProduct+'">';var name=$.trim($('<span />').html(this.name).text());name=(name.length>12?name.substring(0,10)+'...':name);content+='<a class="cart-images" href="'+this.link+'" title="'+name+'"><img  src="'+this.image_cart+'" alt="'+this.name+'"></a>';content+='<div class="cart-info"><div class="product-name">'+'<span class="quantity-formated"><span class="quantity">'+this.quantity+'</span>&nbsp;x&nbsp;</span><a href="'+this.link+'" title="'+this.name+'" class="cart_block_product_name">'+name+'</a></div>';if(this.hasAttributes)
content+='<div class="product-atributes"><a href="'+this.link+'" title="'+this.name+'">'+this.attributes+'</a></div>';if(typeof(freeProductTranslation)!='undefined')
content+='<span class="price">'+(parseFloat(this.price_float)>0?this.priceByLine:freeProductTranslation)+'</span></div>';if(typeof(this.is_gift)=='undefined'||this.is_gift==0)
content+='<span class="remove_link"><a rel="nofollow" class="ajax_cart_block_remove_link" href="'+baseUri+'?controller=cart&amp;delete=1&amp;id_product='+productId+'&amp;token='+static_token+(this.hasAttributes?'&amp;ipa='+parseInt(this.idCombination):'')+'"> <i class="fa fa-trash-o"></i></a></span>';else
content+='<span class="remove_link"></span>';content+='</dt>';if(this.hasAttributes)
content+='<dd data-id="cart_block_combination_of_'+domIdProduct+'" class="unvisible">';if(this.hasCustomizedDatas)
content+=ajaxCart.displayNewCustomizedDatas(this);if(this.hasAttributes)content+='</dd>';$('.cart_block dl.products').append(content);}
else
{var jsonProduct=this;if($.trim($('dt[data-id="cart_block_product_'+domIdProduct+'"] .quantity').html())!=jsonProduct.quantity||$.trim($('dt[data-id="cart_block_product_'+domIdProduct+'"] .price').html())!=jsonProduct.priceByLine)
{if(!this.is_gift)
$('dt[data-id="cart_block_product_'+domIdProduct+'"] .price').text(jsonProduct.priceByLine);else
$('dt[data-id="cart_block_product_'+domIdProduct+'"] .price').html(freeProductTranslation);ajaxCart.updateProductQuantity(jsonProduct,jsonProduct.quantity);if(jsonProduct.hasCustomizedDatas)
{customizationFormatedDatas=ajaxCart.displayNewCustomizedDatas(jsonProduct);if(!$('ul[data-id="customization_'+domIdProductAttribute+'"]').length)
{if(jsonProduct.hasAttributes)
$('dd[data-id="cart_block_combination_of_'+domIdProduct+'"]').append(customizationFormatedDatas);else
$('.cart_block dl.products').append(customizationFormatedDatas);}
else
{$('ul[data-id="customization_'+domIdProductAttribute+'"]').html('');$('ul[data-id="customization_'+domIdProductAttribute+'"]').append(customizationFormatedDatas);}}}}
$('.cart_block dl.products .unvisible').slideDown(450).removeClass('unvisible');var removeLinks=$('dt[data-id="cart_block_product_'+domIdProduct+'"]').find('a.ajax_cart_block_remove_link');if(this.hasCustomizedDatas&&removeLinks.length)
$(removeLinks).each(function(){$(this).remove();});}});},displayNewCustomizedDatas:function(product){var content='';var productId=parseInt(product.id);var productAttributeId=typeof(product.idCombination)=='undefined'?0:parseInt(product.idCombination);var hasAlreadyCustomizations=$('ul[data-id="customization_'+productId+'_'+productAttributeId+'"]').length;if(!hasAlreadyCustomizations)
{if(!product.hasAttributes)
content+='<dd data-id="cart_block_combination_of_'+productId+'" class="unvisible">';if($('ul[data-id="customization_'+productId+'_'+productAttributeId+'"]').val()==undefined)
content+='<ul class="cart_block_customizations" data-id="customization_'+productId+'_'+productAttributeId+'">';}
$(product.customizedDatas).each(function(){var done=0;customizationId=parseInt(this.customizationId);productAttributeId=typeof(product.idCombination)=='undefined'?0:parseInt(product.idCombination);content+='<li name="customization"><div class="deleteCustomizableProduct" data-id="deleteCustomizableProduct_'+customizationId+'_'+productId+'_'+(productAttributeId?productAttributeId:'0')+'"><a rel="nofollow" class="ajax_cart_block_remove_link" href="'+baseUri+'?controller=cart&amp;delete=1&amp;id_product='+productId+'&amp;ipa='+productAttributeId+'&amp;id_customization='+customizationId+'&amp;token='+static_token+'"> <i class="fa fa-trash-o"></i></a></div>';$(this.datas).each(function(){if(this['type']==CUSTOMIZE_TEXTFIELD)
{$(this.datas).each(function(){if(this['index']==0)
{content+=' '+this.truncatedValue.replace(/<br \/>/g,' ');done=1;return false;}})}});if(!done)
content+=customizationIdMessage+customizationId;if(!hasAlreadyCustomizations)content+='</li>';if(customizationId)
{$('#uploadable_files li div.customizationUploadBrowse img').remove();$('#text_fields input').attr('value','');}});if(!hasAlreadyCustomizations)
{content+='</ul>';if(!product.hasAttributes)content+='</dd>';}
return(content);},updateLayer:function(product){$('#layer_cart_product_title').text(product.name);$('#layer_cart_product_attributes').text('');if(product.hasAttributes&&product.hasAttributes==true)
$('#layer_cart_product_attributes').html(product.attributes);$('#layer_cart_product_price').text(product.price);$('#layer_cart_product_quantity').text(product.quantity);$('.layer_cart_img').html('<img class="layer_cart_img img-responsive" src="'+product.image+'" alt="'+product.name+'" title="'+product.name+'" />');var n=parseInt($(window).scrollTop())+'px';$('.layer_cart_overlay').css('width','100%');$('.layer_cart_overlay').css('height','100%');$('.layer_cart_overlay').show();if($('body').hasClass("keep-header")&&$(window).width()>990)
$('#layer_cart').css({'top':'120px'}).fadeIn('fast');else
$('#layer_cart').css({'top':n}).fadeIn('fast');crossselling_serialScroll();},updateCart:function(jsonData){if(jsonData.hasError)
{var errors='';for(error in jsonData.errors)
if(error!='indexOf')
errors+=$('<div />').html(jsonData.errors[error]).text()+"\n";if(!!$.prototype.fancybox)
$.fancybox.open([{type:'inline',autoScale:true,minHeight:30,content:'<p class="fancybox-error">'+errors+'</p>'}],{padding:0});else
alert(errors);}
else
{ajaxCart.updateCartEverywhere(jsonData);ajaxCart.hideOldProducts(jsonData);ajaxCart.displayNewProducts(jsonData);ajaxCart.refreshVouchers(jsonData);$('.cart_block .products dt').removeClass('first_item').removeClass('last_item').removeClass('item');$('.cart_block .products dt:first').addClass('first_item');$('.cart_block .products dt:not(:first,:last)').addClass('item');$('.cart_block .products dt:last').addClass('last_item');}},updateCartEverywhere:function(jsonData){$('.ajax_cart_total').text($.trim(jsonData.productTotal));if(typeof hasDeliveryAddress=='undefined')
hasDeliveryAddress=false;if(parseFloat(jsonData.shippingCostFloat)>0)
$('.ajax_cart_shipping_cost').text(jsonData.shippingCost).parent().find('.unvisible').show();else if((hasDeliveryAddress||typeof(orderProcess)!=='undefined'&&orderProcess=='order-opc')&&typeof(freeShippingTranslation)!='undefined')
$('.ajax_cart_shipping_cost').html(freeShippingTranslation);else if((typeof toBeDetermined!=='undefined')&&!hasDeliveryAddress)
$('.ajax_cart_shipping_cost').html(toBeDetermined);if(!jsonData.shippingCostFloat&&!jsonData.free_ship)
$('.ajax_cart_shipping_cost').parent().find('.unvisible').hide();else if(hasDeliveryAddress&&!jsonData.isVirtualCart)
$('.ajax_cart_shipping_cost').parent().find('.unvisible').show();$('.ajax_cart_tax_cost').text(jsonData.taxCost);$('.cart_block_wrapping_cost').text(jsonData.wrappingCost);$('.ajax_block_cart_total').text(jsonData.total);$('.ajax_block_products_total').text(jsonData.productTotal);$('.ajax_total_price_wt').text(jsonData.total_price_wt);if(parseFloat(jsonData.freeShippingFloat)>0)
{$('.ajax_cart_free_shipping').html(jsonData.freeShipping);$('.freeshipping').fadeIn(0);}
else if(parseFloat(jsonData.freeShippingFloat)==0)
$('.freeshipping').fadeOut(0);this.nb_total_products=jsonData.nbTotalProducts;if(parseInt(jsonData.nbTotalProducts)>0)
{$('.ajax_cart_no_product').hide();if(jsonData.nbTotalProducts<10){$('.ajax_cart_quantity').text(''+jsonData.nbTotalProducts);}else{$('.ajax_cart_quantity').text(jsonData.nbTotalProducts);}
$('.ajax_cart_quantity').fadeIn('slow');$('.ajax_cart_total').fadeIn('slow');if(parseInt(jsonData.nbTotalProducts)>1)
{$('.ajax_cart_product_txt').each(function(){$(this).hide();});$('.ajax_cart_product_txt_s').each(function(){$(this).show();});}
else
{$('.ajax_cart_product_txt').each(function(){$(this).show();});$('.ajax_cart_product_txt_s').each(function(){$(this).hide();});}
if(jsonData.free_delivery>0)
{$('.free_delivery_total').html(jsonData.free_delivery_cost);$('.free_delivery_info').show();}
else
{$('.free_delivery_info').hide();}}
else
{$('.ajax_cart_quantity, .ajax_cart_product_txt_s, .ajax_cart_product_txt, .ajax_cart_total').each(function(){$(this).hide();});$('.ajax_cart_no_product').show('slow');$('.free_delivery_info').hide();}}};function HoverWatcher(selector)
{this.hovering=false;var self=this;this.isHoveringOver=function(){return self.hovering;}
$(selector).hover(function(){self.hovering=true;},function(){self.hovering=false;})}
function crossselling_serialScroll()
{if(!!$.prototype.bxSlider)
$('#blockcart_caroucel').bxSlider({minSlides:2,maxSlides:4,slideWidth:178,slideMargin:20,moveSlides:1,infiniteLoop:false,hideControlOnEnd:true,pager:false});};;(function(k){'use strict';k(['jquery'],function($){var j=$.scrollTo=function(a,b,c){return $(window).scrollTo(a,b,c)};j.defaults={axis:'xy',duration:0,limit:!0};j.window=function(a){return $(window)._scrollable()};$.fn._scrollable=function(){return this.map(function(){var a=this,isWin=!a.nodeName||$.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!isWin)return a;var b=(a.contentWindow||a).document||a.ownerDocument||a;return/webkit/i.test(navigator.userAgent)||b.compatMode=='BackCompat'?b.body:b.documentElement})};$.fn.scrollTo=function(f,g,h){if(typeof g=='object'){h=g;g=0}if(typeof h=='function')h={onAfter:h};if(f=='max')f=9e9;h=$.extend({},j.defaults,h);g=g||h.duration;h.queue=h.queue&&h.axis.length>1;if(h.queue)g/=2;h.offset=both(h.offset);h.over=both(h.over);return this._scrollable().each(function(){if(f==null)return;var d=this,$elem=$(d),targ=f,toff,attr={},win=$elem.is('html,body');switch(typeof targ){case'number':case'string':if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(targ)){targ=both(targ);break}targ=win?$(targ):$(targ,this);if(!targ.length)return;case'object':if(targ.is||targ.style)toff=(targ=$(targ)).offset()}var e=$.isFunction(h.offset)&&h.offset(d,targ)||h.offset;$.each(h.axis.split(''),function(i,a){var b=a=='x'?'Left':'Top',pos=b.toLowerCase(),key='scroll'+b,old=d[key],max=j.max(d,a);if(toff){attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]);if(h.margin){attr[key]-=parseInt(targ.css('margin'+b))||0;attr[key]-=parseInt(targ.css('border'+b+'Width'))||0}attr[key]+=e[pos]||0;if(h.over[pos])attr[key]+=targ[a=='x'?'width':'height']()*h.over[pos]}else{var c=targ[pos];attr[key]=c.slice&&c.slice(-1)=='%'?parseFloat(c)/100*max:c}if(h.limit&&/^\d+$/.test(attr[key]))attr[key]=attr[key]<=0?0:Math.min(attr[key],max);if(!i&&h.queue){if(old!=attr[key])animate(h.onAfterFirst);delete attr[key]}});animate(h.onAfter);function animate(a){$elem.animate(attr,g,h.easing,a&&function(){a.call(this,targ,h)})}}).end()};j.max=function(a,b){var c=b=='x'?'Width':'Height',scroll='scroll'+c;if(!$(a).is('html,body'))return a[scroll]-$(a)[c.toLowerCase()]();var d='client'+c,html=a.ownerDocument.documentElement,body=a.ownerDocument.body;return Math.max(html[scroll],body[scroll])-Math.min(html[d],body[d])};function both(a){return $.isFunction(a)||$.isPlainObject(a)?a:{top:a,left:a}}return j})}(typeof define==='function'&&define.amd?define:function(a,b){if(typeof module!=='undefined'&&module.exports){module.exports=b(require('jquery'))}else{b(jQuery)}}));;(function(a){var b=a.serialScroll=function(c){return a(window).serialScroll(c)};b.defaults={duration:1e3,axis:"x",event:"click",start:0,step:1,lock:!0,cycle:!0,constant:!0};a.fn.serialScroll=function(c){return this.each(function(){var t=a.extend({},b.defaults,c),s=t.event,i=t.step,r=t.lazy,e=t.target?this:document,u=a(t.target||this,e),p=u[0],m=t.items,h=t.start,g=t.interval,k=t.navigation,l;if(!r){m=d()}if(t.force){f({},h)}a(t.prev||[],e).bind(s,-i,q);a(t.next||[],e).bind(s,i,q);if(!p.ssbound){u.bind("prev.serialScroll",-i,q).bind("next.serialScroll",i,q).bind("goto.serialScroll",f)}if(g){u.bind("start.serialScroll",function(v){if(!g){o();g=!0;n()}}).bind("stop.serialScroll",function(){o();g=!1})}u.bind("notify.serialScroll",function(x,w){var v=j(w);if(v>-1){h=v}});p.ssbound=!0;if(t.jump){(r?u:d()).bind(s,function(v){f(v,j(v.target))})}if(k){k=a(k,e).bind(s,function(v){v.data=Math.round(d().length/k.length)*k.index(this);f(v,this)})}function q(v){v.data+=h;f(v,this)}function f(B,z){if(!isNaN(z)){B.data=z;z=p}var C=B.data,v,D=B.type,A=t.exclude?d().slice(0,-t.exclude):d(),y=A.length,w=A[C],x=t.duration;if(D){B.preventDefault()}if(g){o();l=setTimeout(n,t.interval)}if(!w){v=C<0?0:y-1;if(h!=v){C=v}else{if(!t.cycle){return}else{C=y-v-1}}w=A[C]}if(!w||t.lock&&u.is(":animated")||D&&t.onBefore&&t.onBefore(B,w,u,d(),C)===!1){return}if(t.stop){u.queue("fx",[]).stop()}if(t.constant){x=Math.abs(x/i*(h-C))}u.scrollTo(w,x,t).trigger("notify.serialScroll",[C])}function n(){u.trigger("next.serialScroll")}function o(){clearTimeout(l)}function d(){return a(m,p)}function j(w){if(!isNaN(w)){return w}var x=d(),v;while((v=x.index(w))==-1&&w!=p){w=w.parentNode}return v}})}})(jQuery);;!function(t){var e={},s={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){},onSliderResize:function(){}};t.fn.bxSlider=function(n){if(0==this.length)return this;if(this.length>1)return this.each(function(){t(this).bxSlider(n)}),this;var o={},r=this;e.el=this;var a=t(window).width(),l=t(window).height(),d=function(){o.settings=t.extend({},s,n),o.settings.slideWidth=parseInt(o.settings.slideWidth),o.children=r.children(o.settings.slideSelector),o.children.length<o.settings.minSlides&&(o.settings.minSlides=o.children.length),o.children.length<o.settings.maxSlides&&(o.settings.maxSlides=o.children.length),o.settings.randomStart&&(o.settings.startSlide=Math.floor(Math.random()*o.children.length)),o.active={index:o.settings.startSlide},o.carousel=o.settings.minSlides>1||o.settings.maxSlides>1,o.carousel&&(o.settings.preloadImages="all"),o.minThreshold=o.settings.minSlides*o.settings.slideWidth+(o.settings.minSlides-1)*o.settings.slideMargin,o.maxThreshold=o.settings.maxSlides*o.settings.slideWidth+(o.settings.maxSlides-1)*o.settings.slideMargin,o.working=!1,o.controls={},o.interval=null,o.animProp="vertical"==o.settings.mode?"top":"left",o.usingCSS=o.settings.useCSS&&"fade"!=o.settings.mode&&function(){var t=document.createElement("div"),e=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in e)if(void 0!==t.style[e[i]])return o.cssPrefix=e[i].replace("Perspective","").toLowerCase(),o.animProp="-"+o.cssPrefix+"-transform",!0;return!1}(),"vertical"==o.settings.mode&&(o.settings.maxSlides=o.settings.minSlides),r.data("origStyle",r.attr("style")),r.children(o.settings.slideSelector).each(function(){t(this).data("origStyle",t(this).attr("style"))}),c()},c=function(){r.wrap('<div class="bx-wrapper"><div class="bx-viewport"></div></div>'),o.viewport=r.parent(),o.loader=t('<div class="bx-loading" />'),o.viewport.prepend(o.loader),r.css({width:"horizontal"==o.settings.mode?100*o.children.length+215+"%":"auto",position:"relative"}),o.usingCSS&&o.settings.easing?r.css("-"+o.cssPrefix+"-transition-timing-function",o.settings.easing):o.settings.easing||(o.settings.easing="swing"),f(),o.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),o.viewport.parent().css({maxWidth:p()}),o.settings.pager||o.viewport.parent().css({margin:"0 auto 0px"}),o.children.css({"float":"horizontal"==o.settings.mode?"left":"none",listStyle:"none",position:"relative"}),o.children.css("width",u()),"horizontal"==o.settings.mode&&o.settings.slideMargin>0&&o.children.css("marginRight",o.settings.slideMargin),"vertical"==o.settings.mode&&o.settings.slideMargin>0&&o.children.css("marginBottom",o.settings.slideMargin),"fade"==o.settings.mode&&(o.children.css({position:"absolute",zIndex:0,display:"none"}),o.children.eq(o.settings.startSlide).css({zIndex:o.settings.slideZIndex,display:"block"})),o.controls.el=t('<div class="bx-controls" />'),o.settings.captions&&P(),o.active.last=o.settings.startSlide==x()-1,o.settings.video&&r.fitVids();var e=o.children.eq(o.settings.startSlide);"all"==o.settings.preloadImages&&(e=o.children),o.settings.ticker?o.settings.pager=!1:(o.settings.pager&&T(),o.settings.controls&&C(),o.settings.auto&&o.settings.autoControls&&E(),(o.settings.controls||o.settings.autoControls||o.settings.pager)&&o.viewport.after(o.controls.el)),g(e,h)},g=function(e,i){var s=e.find("img, iframe").length;if(0==s)return i(),void 0;var n=0;e.find("img, iframe").each(function(){t(this).one("load",function(){++n==s&&i()}).each(function(){this.complete&&t(this).load()})})},h=function(){if(o.settings.infiniteLoop&&"fade"!=o.settings.mode&&!o.settings.ticker){var e="vertical"==o.settings.mode?o.settings.minSlides:o.settings.maxSlides,i=o.children.slice(0,e).clone().addClass("bx-clone"),s=o.children.slice(-e).clone().addClass("bx-clone");r.append(i).prepend(s)}o.loader.remove(),S(),"vertical"==o.settings.mode&&(o.settings.adaptiveHeight=!0),o.viewport.height(v()),r.redrawSlider(),o.settings.onSliderLoad(o.active.index),o.initialized=!0,o.settings.responsive&&t(window).bind("resize",Z),o.settings.auto&&o.settings.autoStart&&H(),o.settings.ticker&&L(),o.settings.pager&&q(o.settings.startSlide),o.settings.controls&&W(),o.settings.touchEnabled&&!o.settings.ticker&&O()},v=function(){var e=0,s=t();if("vertical"==o.settings.mode||o.settings.adaptiveHeight)if(o.carousel){var n=1==o.settings.moveSlides?o.active.index:o.active.index*m();for(s=o.children.eq(n),i=1;i<=o.settings.maxSlides-1;i++)s=n+i>=o.children.length?s.add(o.children.eq(i-1)):s.add(o.children.eq(n+i))}else s=o.children.eq(o.active.index);else s=o.children;return"vertical"==o.settings.mode?(s.each(function(){e+=t(this).outerHeight()}),o.settings.slideMargin>0&&(e+=o.settings.slideMargin*(o.settings.minSlides-1))):e=Math.max.apply(Math,s.map(function(){return t(this).outerHeight(!1)}).get()),e},p=function(){var t="100%";return o.settings.slideWidth>0&&(t="horizontal"==o.settings.mode?o.settings.maxSlides*o.settings.slideWidth+(o.settings.maxSlides-1)*o.settings.slideMargin:o.settings.slideWidth),t},u=function(){var t=o.settings.slideWidth,e=o.viewport.width();return 0==o.settings.slideWidth||o.settings.slideWidth>e&&!o.carousel||"vertical"==o.settings.mode?t=e:o.settings.maxSlides>1&&"horizontal"==o.settings.mode&&(e>o.maxThreshold||e<o.minThreshold&&(t=(e-o.settings.slideMargin*(o.settings.minSlides-1))/o.settings.minSlides)),t},f=function(){var t=1;if("horizontal"==o.settings.mode&&o.settings.slideWidth>0)if(o.viewport.width()<o.minThreshold)t=o.settings.minSlides;else if(o.viewport.width()>o.maxThreshold)t=o.settings.maxSlides;else{var e=o.children.first().width();t=Math.floor(o.viewport.width()/e)}else"vertical"==o.settings.mode&&(t=o.settings.minSlides);return t},x=function(){var t=0;if(o.settings.moveSlides>0)if(o.settings.infiniteLoop)t=o.children.length/m();else for(var e=0,i=0;e<o.children.length;)++t,e=i+f(),i+=o.settings.moveSlides<=f()?o.settings.moveSlides:f();else t=Math.ceil(o.children.length/f());return t},m=function(){return o.settings.moveSlides>0&&o.settings.moveSlides<=f()?o.settings.moveSlides:f()},S=function(){if(o.children.length>o.settings.maxSlides&&o.active.last&&!o.settings.infiniteLoop){if("horizontal"==o.settings.mode){var t=o.children.last(),e=t.position();b(-(e.left-(o.viewport.width()-t.width())),"reset",0)}else if("vertical"==o.settings.mode){var i=o.children.length-o.settings.minSlides,e=o.children.eq(i).position();b(-e.top,"reset",0)}}else{var e=o.children.eq(o.active.index*m()).position();o.active.index==x()-1&&(o.active.last=!0),void 0!=e&&("horizontal"==o.settings.mode?b(-e.left,"reset",0):"vertical"==o.settings.mode&&b(-e.top,"reset",0))}},b=function(t,e,i,s){if(o.usingCSS){var n="vertical"==o.settings.mode?"translate3d(0, "+t+"px, 0)":"translate3d("+t+"px, 0, 0)";r.css("-"+o.cssPrefix+"-transition-duration",i/1e3+"s"),"slide"==e?(r.css(o.animProp,n),r.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){r.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),D()})):"reset"==e?r.css(o.animProp,n):"ticker"==e&&(r.css("-"+o.cssPrefix+"-transition-timing-function","linear"),r.css(o.animProp,n),r.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){r.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),b(s.resetValue,"reset",0),N()}))}else{var a={};a[o.animProp]=t,"slide"==e?r.animate(a,i,o.settings.easing,function(){D()}):"reset"==e?r.css(o.animProp,t):"ticker"==e&&r.animate(a,speed,"linear",function(){b(s.resetValue,"reset",0),N()})}},w=function(){for(var e="",i=x(),s=0;i>s;s++){var n="";o.settings.buildPager&&t.isFunction(o.settings.buildPager)?(n=o.settings.buildPager(s),o.pagerEl.addClass("bx-custom-pager")):(n=s+1,o.pagerEl.addClass("bx-default-pager")),e+='<div class="bx-pager-item"><a href="" data-slide-index="'+s+'" class="bx-pager-link">'+n+"</a></div>"}o.pagerEl.html(e)},T=function(){o.settings.pagerCustom?o.pagerEl=t(o.settings.pagerCustom):(o.pagerEl=t('<div class="bx-pager" />'),o.settings.pagerSelector?t(o.settings.pagerSelector).html(o.pagerEl):o.controls.el.addClass("bx-has-pager").append(o.pagerEl),w()),o.pagerEl.on("click","a",I)},C=function(){o.controls.next=t('<a class="bx-next" href="">'+o.settings.nextText+"</a>"),o.controls.prev=t('<a class="bx-prev" href="">'+o.settings.prevText+"</a>"),o.controls.next.bind("click",y),o.controls.prev.bind("click",z),o.settings.nextSelector&&t(o.settings.nextSelector).append(o.controls.next),o.settings.prevSelector&&t(o.settings.prevSelector).append(o.controls.prev),o.settings.nextSelector||o.settings.prevSelector||(o.controls.directionEl=t('<div class="bx-controls-direction" />'),o.controls.directionEl.append(o.controls.prev).append(o.controls.next),o.controls.el.addClass("bx-has-controls-direction").append(o.controls.directionEl))},E=function(){o.controls.start=t('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+o.settings.startText+"</a></div>"),o.controls.stop=t('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+o.settings.stopText+"</a></div>"),o.controls.autoEl=t('<div class="bx-controls-auto" />'),o.controls.autoEl.on("click",".bx-start",k),o.controls.autoEl.on("click",".bx-stop",M),o.settings.autoControlsCombine?o.controls.autoEl.append(o.controls.start):o.controls.autoEl.append(o.controls.start).append(o.controls.stop),o.settings.autoControlsSelector?t(o.settings.autoControlsSelector).html(o.controls.autoEl):o.controls.el.addClass("bx-has-controls-auto").append(o.controls.autoEl),A(o.settings.autoStart?"stop":"start")},P=function(){o.children.each(function(){var e=t(this).find("img:first").attr("title");void 0!=e&&(""+e).length&&t(this).append('<div class="bx-caption"><span>'+e+"</span></div>")})},y=function(t){o.settings.auto&&r.stopAuto(),r.goToNextSlide(),t.preventDefault()},z=function(t){o.settings.auto&&r.stopAuto(),r.goToPrevSlide(),t.preventDefault()},k=function(t){r.startAuto(),t.preventDefault()},M=function(t){r.stopAuto(),t.preventDefault()},I=function(e){o.settings.auto&&r.stopAuto();var i=t(e.currentTarget),s=parseInt(i.attr("data-slide-index"));s!=o.active.index&&r.goToSlide(s),e.preventDefault()},q=function(e){var i=o.children.length;return"short"==o.settings.pagerType?(o.settings.maxSlides>1&&(i=Math.ceil(o.children.length/o.settings.maxSlides)),o.pagerEl.html(e+1+o.settings.pagerShortSeparator+i),void 0):(o.pagerEl.find("a").removeClass("active"),o.pagerEl.each(function(i,s){t(s).find("a").eq(e).addClass("active")}),void 0)},D=function(){if(o.settings.infiniteLoop){var t="";0==o.active.index?t=o.children.eq(0).position():o.active.index==x()-1&&o.carousel?t=o.children.eq((x()-1)*m()).position():o.active.index==o.children.length-1&&(t=o.children.eq(o.children.length-1).position()),t&&("horizontal"==o.settings.mode?b(-t.left,"reset",0):"vertical"==o.settings.mode&&b(-t.top,"reset",0))}o.working=!1,o.settings.onSlideAfter(o.children.eq(o.active.index),o.oldIndex,o.active.index)},A=function(t){o.settings.autoControlsCombine?o.controls.autoEl.html(o.controls[t]):(o.controls.autoEl.find("a").removeClass("active"),o.controls.autoEl.find("a:not(.bx-"+t+")").addClass("active"))},W=function(){1==x()?(o.controls.prev.addClass("disabled"),o.controls.next.addClass("disabled")):!o.settings.infiniteLoop&&o.settings.hideControlOnEnd&&(0==o.active.index?(o.controls.prev.addClass("disabled"),o.controls.next.removeClass("disabled")):o.active.index==x()-1?(o.controls.next.addClass("disabled"),o.controls.prev.removeClass("disabled")):(o.controls.prev.removeClass("disabled"),o.controls.next.removeClass("disabled")))},H=function(){o.settings.autoDelay>0?setTimeout(r.startAuto,o.settings.autoDelay):r.startAuto(),o.settings.autoHover&&r.hover(function(){o.interval&&(r.stopAuto(!0),o.autoPaused=!0)},function(){o.autoPaused&&(r.startAuto(!0),o.autoPaused=null)})},L=function(){var e=0;if("next"==o.settings.autoDirection)r.append(o.children.clone().addClass("bx-clone"));else{r.prepend(o.children.clone().addClass("bx-clone"));var i=o.children.first().position();e="horizontal"==o.settings.mode?-i.left:-i.top}b(e,"reset",0),o.settings.pager=!1,o.settings.controls=!1,o.settings.autoControls=!1,o.settings.tickerHover&&!o.usingCSS&&o.viewport.hover(function(){r.stop()},function(){var e=0;o.children.each(function(){e+="horizontal"==o.settings.mode?t(this).outerWidth(!0):t(this).outerHeight(!0)});var i=o.settings.speed/e,s="horizontal"==o.settings.mode?"left":"top",n=i*(e-Math.abs(parseInt(r.css(s))));N(n)}),N()},N=function(t){speed=t?t:o.settings.speed;var e={left:0,top:0},i={left:0,top:0};"next"==o.settings.autoDirection?e=r.find(".bx-clone").first().position():i=o.children.first().position();var s="horizontal"==o.settings.mode?-e.left:-e.top,n="horizontal"==o.settings.mode?-i.left:-i.top,a={resetValue:n};b(s,"ticker",speed,a)},O=function(){o.touch={start:{x:0,y:0},end:{x:0,y:0}},o.viewport.bind("touchstart",X)},X=function(t){if(o.working)t.preventDefault();else{o.touch.originalPos=r.position();var e=t.originalEvent;o.touch.start.x=e.changedTouches[0].pageX,o.touch.start.y=e.changedTouches[0].pageY,o.viewport.bind("touchmove",Y),o.viewport.bind("touchend",V)}},Y=function(t){var e=t.originalEvent,i=Math.abs(e.changedTouches[0].pageX-o.touch.start.x),s=Math.abs(e.changedTouches[0].pageY-o.touch.start.y);if(3*i>s&&o.settings.preventDefaultSwipeX?t.preventDefault():3*s>i&&o.settings.preventDefaultSwipeY&&t.preventDefault(),"fade"!=o.settings.mode&&o.settings.oneToOneTouch){var n=0;if("horizontal"==o.settings.mode){var r=e.changedTouches[0].pageX-o.touch.start.x;n=o.touch.originalPos.left+r}else{var r=e.changedTouches[0].pageY-o.touch.start.y;n=o.touch.originalPos.top+r}b(n,"reset",0)}},V=function(t){o.viewport.unbind("touchmove",Y);var e=t.originalEvent,i=0;if(o.touch.end.x=e.changedTouches[0].pageX,o.touch.end.y=e.changedTouches[0].pageY,"fade"==o.settings.mode){var s=Math.abs(o.touch.start.x-o.touch.end.x);s>=o.settings.swipeThreshold&&(o.touch.start.x>o.touch.end.x?r.goToNextSlide():r.goToPrevSlide(),r.stopAuto())}else{var s=0;"horizontal"==o.settings.mode?(s=o.touch.end.x-o.touch.start.x,i=o.touch.originalPos.left):(s=o.touch.end.y-o.touch.start.y,i=o.touch.originalPos.top),!o.settings.infiniteLoop&&(0==o.active.index&&s>0||o.active.last&&0>s)?b(i,"reset",200):Math.abs(s)>=o.settings.swipeThreshold?(0>s?r.goToNextSlide():r.goToPrevSlide(),r.stopAuto()):b(i,"reset",200)}o.viewport.unbind("touchend",V)},Z=function(){var e=t(window).width(),i=t(window).height();(a!=e||l!=i)&&(a=e,l=i,r.redrawSlider(),o.settings.onSliderResize.call(r,o.active.index))};return r.goToSlide=function(e,i){if(!o.working&&o.active.index!=e)if(o.working=!0,o.oldIndex=o.active.index,o.active.index=0>e?x()-1:e>=x()?0:e,o.settings.onSlideBefore(o.children.eq(o.active.index),o.oldIndex,o.active.index),"next"==i?o.settings.onSlideNext(o.children.eq(o.active.index),o.oldIndex,o.active.index):"prev"==i&&o.settings.onSlidePrev(o.children.eq(o.active.index),o.oldIndex,o.active.index),o.active.last=o.active.index>=x()-1,o.settings.pager&&q(o.active.index),o.settings.controls&&W(),"fade"==o.settings.mode)o.settings.adaptiveHeight&&o.viewport.height()!=v()&&o.viewport.animate({height:v()},o.settings.adaptiveHeightSpeed),o.children.filter(":visible").fadeOut(o.settings.speed).css({zIndex:0}),o.children.eq(o.active.index).css("zIndex",o.settings.slideZIndex+1).fadeIn(o.settings.speed,function(){t(this).css("zIndex",o.settings.slideZIndex),D()});else{o.settings.adaptiveHeight&&o.viewport.height()!=v()&&o.viewport.animate({height:v()},o.settings.adaptiveHeightSpeed);var s=0,n={left:0,top:0};if(!o.settings.infiniteLoop&&o.carousel&&o.active.last)if("horizontal"==o.settings.mode){var a=o.children.eq(o.children.length-1);n=a.position(),s=o.viewport.width()-a.outerWidth()}else{var l=o.children.length-o.settings.minSlides;n=o.children.eq(l).position()}else if(o.carousel&&o.active.last&&"prev"==i){var d=1==o.settings.moveSlides?o.settings.maxSlides-m():(x()-1)*m()-(o.children.length-o.settings.maxSlides),a=r.children(".bx-clone").eq(d);n=a.position()}else if("next"==i&&0==o.active.index)n=r.find("> .bx-clone").eq(o.settings.maxSlides).position(),o.active.last=!1;else if(e>=0){var c=e*m();n=o.children.eq(c).position()}if("undefined"!=typeof n){var g="horizontal"==o.settings.mode?-(n.left-s):-n.top;b(g,"slide",o.settings.speed)}}},r.goToNextSlide=function(){if(o.settings.infiniteLoop||!o.active.last){var t=parseInt(o.active.index)+1;r.goToSlide(t,"next")}},r.goToPrevSlide=function(){if(o.settings.infiniteLoop||0!=o.active.index){var t=parseInt(o.active.index)-1;r.goToSlide(t,"prev")}},r.startAuto=function(t){o.interval||(o.interval=setInterval(function(){"next"==o.settings.autoDirection?r.goToNextSlide():r.goToPrevSlide()},o.settings.pause),o.settings.autoControls&&1!=t&&A("stop"))},r.stopAuto=function(t){o.interval&&(clearInterval(o.interval),o.interval=null,o.settings.autoControls&&1!=t&&A("start"))},r.getCurrentSlide=function(){return o.active.index},r.getCurrentSlideElement=function(){return o.children.eq(o.active.index)},r.getSlideCount=function(){return o.children.length},r.redrawSlider=function(){o.children.add(r.find(".bx-clone")).outerWidth(u()),o.viewport.css("height",v()),o.settings.ticker||S(),o.active.last&&(o.active.index=x()-1),o.active.index>=x()&&(o.active.last=!0),o.settings.pager&&!o.settings.pagerCustom&&(w(),q(o.active.index))},r.destroySlider=function(){o.initialized&&(o.initialized=!1,t(".bx-clone",this).remove(),o.children.each(function(){void 0!=t(this).data("origStyle")?t(this).attr("style",t(this).data("origStyle")):t(this).removeAttr("style")}),void 0!=t(this).data("origStyle")?this.attr("style",t(this).data("origStyle")):t(this).removeAttr("style"),t(this).unwrap().unwrap(),o.controls.el&&o.controls.el.remove(),o.controls.next&&o.controls.next.remove(),o.controls.prev&&o.controls.prev.remove(),o.pagerEl&&o.settings.controls&&o.pagerEl.remove(),t(".bx-caption",this).remove(),o.controls.autoEl&&o.controls.autoEl.remove(),clearInterval(o.interval),o.settings.responsive&&t(window).unbind("resize",Z))},r.reloadSlider=function(t){void 0!=t&&(n=t),r.destroySlider(),d()},d(),this}}(jQuery);;$(document).ready(function(){$('ul.tree.dhtml').hide();if(!$('ul.tree.dhtml').hasClass('dynamized'))
{$('ul.tree.dhtml ul').prev().before("<span class='grower OPEN'> </span>");$('ul.tree.dhtml ul li:last-child, ul.tree.dhtml li:last-child').addClass('last');$('ul.tree.dhtml span.grower.OPEN').addClass('CLOSE').removeClass('OPEN').parent().find('ul:first').hide();$('ul.tree.dhtml').show();$('ul.tree.dhtml .selected').parents().each(function(){if($(this).is('ul'))
toggleBranch($(this).prev().prev(),true);});toggleBranch($('ul.tree.dhtml .selected').prev(),true);$('ul.tree.dhtml span.grower').click(function(){toggleBranch($(this));});$('ul.tree.dhtml').addClass('dynamized');$('ul.tree.dhtml').removeClass('dhtml');}});function openBranch(jQueryElement,noAnimation)
{jQueryElement.addClass('OPEN').removeClass('CLOSE');if(noAnimation)
jQueryElement.parent().find('ul:first').show();else
jQueryElement.parent().find('ul:first').slideDown();}
function closeBranch(jQueryElement,noAnimation)
{jQueryElement.addClass('CLOSE').removeClass('OPEN');if(noAnimation)
jQueryElement.parent().find('ul:first').hide();else
jQueryElement.parent().find('ul:first').slideUp();}
function toggleBranch(jQueryElement,noAnimation)
{if(jQueryElement.hasClass('OPEN'))
closeBranch(jQueryElement,noAnimation);else
openBranch(jQueryElement,noAnimation);};;$(document).ready(function(){$('#newsletter-input').on({focus:function(){if($(this).val()==placeholder_blocknewsletter||(typeof msg_newsl!='undefined'&&$(this).val()==msg_newsl))
$(this).val('');},blur:function(){if($(this).val()=='')
$(this).val(placeholder_blocknewsletter);}});var cssClass='alert alert-danger';if(typeof nw_error!='undefined'&&!nw_error)
cssClass='alert alert-success';if(typeof msg_newsl!='undefined'&&msg_newsl)
{$('#columns').prepend('<div class="clearfix"></div><p class="'+cssClass+'"> '+alert_blocknewsletter+'</p>');$('html, body').animate({scrollTop:$('#columns').offset().top},'slow');}});;(function($){$.fn.extend({autocomplete:function(urlOrData,options){var isUrl=typeof urlOrData=="string";options=$.extend({},$.Autocompleter.defaults,{url:isUrl?urlOrData:null,data:isUrl?null:urlOrData,delay:isUrl?$.Autocompleter.defaults.delay:10,max:options&&!options.scroll?10:150},options);options.highlight=options.highlight||function(value){return value;};options.formatMatch=options.formatMatch||options.formatItem;return this.each(function(){new $.Autocompleter(this,options);});},result:function(handler){return this.bind("result",handler);},search:function(handler){return this.trigger("search",[handler]);},flushCache:function(){return this.trigger("flushCache");},setOptions:function(options){return this.trigger("setOptions",[options]);},unautocomplete:function(){return this.trigger("unautocomplete");}});$.Autocompleter=function(input,options){var KEY={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var $input=$(input).attr("autocomplete","off").addClass(options.inputClass);var timeout;var previousValue="";var cache=$.Autocompleter.Cache(options);var hasFocus=0;var lastKeyPressCode;var config={mouseDownOnSelect:false};var select=$.Autocompleter.Select(options,input,selectCurrent,config);var blockSubmit;$.browser.opera&&$(input.form).bind("submit.autocomplete",function(){if(blockSubmit){blockSubmit=false;return false;}});$input.bind(($.browser.opera?"keypress":"keydown")+".autocomplete",function(event){lastKeyPressCode=event.keyCode;switch(event.keyCode){case KEY.UP:event.preventDefault();if(select.visible()){select.prev();}else{onChange(0,true);}
break;case KEY.DOWN:event.preventDefault();if(select.visible()){select.next();}else{onChange(0,true);}
break;case KEY.PAGEUP:event.preventDefault();if(select.visible()){select.pageUp();}else{onChange(0,true);}
break;case KEY.PAGEDOWN:event.preventDefault();if(select.visible()){select.pageDown();}else{onChange(0,true);}
break;case options.multiple&&$.trim(options.multipleSeparator)==","&&KEY.COMMA:case KEY.TAB:case KEY.RETURN:if(selectCurrent()){event.preventDefault();blockSubmit=true;return false;}
break;case KEY.ESC:select.hide();break;default:clearTimeout(timeout);timeout=setTimeout(onChange,options.delay);break;}}).focus(function(){hasFocus++;}).blur(function(){hasFocus=0;if(!config.mouseDownOnSelect){hideResults();}}).click(function(){if(hasFocus++>1&&!select.visible()){onChange(0,true);}}).bind("search",function(){var fn=(arguments.length>1)?arguments[1]:null;function findValueCallback(q,data){var result;if(data&&data.length){for(var i=0;i<data.length;i++){if(data[i].result.toLowerCase()==q.toLowerCase()){result=data[i];break;}}}
if(typeof fn=="function")fn(result);else $input.trigger("result",result&&[result.data,result.value]);}
$.each(trimWords($input.val()),function(i,value){request(value,findValueCallback,findValueCallback);});}).bind("flushCache",function(){cache.flush();}).bind("setOptions",function(){$.extend(options,arguments[1]);if("data"in arguments[1])
cache.populate();}).bind("unautocomplete",function(){select.unbind();$input.unbind();$(input.form).unbind(".autocomplete");});function selectCurrent(){var selected=select.selected();if(!selected)
return false;var v=selected.result;previousValue=v;if(options.multiple){var words=trimWords($input.val());if(words.length>1){v=words.slice(0,words.length-1).join(options.multipleSeparator)+options.multipleSeparator+v;}
v+=options.multipleSeparator;}
$input.val(v);hideResultsNow();$input.trigger("result",[selected.data,selected.value]);return true;}
function onChange(crap,skipPrevCheck){if(lastKeyPressCode==KEY.DEL){select.hide();return;}
var currentValue=$input.val();if(!skipPrevCheck&&currentValue==previousValue)
return;previousValue=currentValue;currentValue=lastWord(currentValue);if(currentValue.length>=options.minChars){$input.addClass(options.loadingClass);if(!options.matchCase)
currentValue=currentValue.toLowerCase();request(currentValue,receiveData,hideResultsNow);}else{stopLoading();select.hide();}};function trimWords(value){if(!value){return[""];}
var words=value.split(options.multipleSeparator);var result=[];$.each(words,function(i,value){if($.trim(value))
result[i]=$.trim(value);});return result;}
function lastWord(value){if(!options.multiple)
return value;var words=trimWords(value);return words[words.length-1];}
function autoFill(q,sValue){if(options.autoFill&&(lastWord($input.val()).toLowerCase()==q.toLowerCase())&&lastKeyPressCode!=KEY.BACKSPACE){$input.val($input.val()+sValue.substring(lastWord(previousValue).length));$.Autocompleter.Selection(input,previousValue.length,previousValue.length+sValue.length);}};function hideResults(){clearTimeout(timeout);timeout=setTimeout(hideResultsNow,200);};function hideResultsNow(){var wasVisible=select.visible();select.hide();clearTimeout(timeout);stopLoading();if(options.mustMatch){$input.search(function(result){if(!result){if(options.multiple){var words=trimWords($input.val()).slice(0,-1);$input.val(words.join(options.multipleSeparator)+(words.length?options.multipleSeparator:""));}
else
$input.val("");}});}
if(wasVisible)
$.Autocompleter.Selection(input,input.value.length,input.value.length);};function receiveData(q,data){if(data&&data.length&&hasFocus){stopLoading();select.display(data,q);autoFill(q,data[0].value);select.show();}else{hideResultsNow();}};function request(term,success,failure){if(!options.matchCase)
term=term.toLowerCase();var data=cache.load(term);if(data&&data.length){success(term,data);}else if((typeof options.url=="string")&&(options.url.length>0)){var extraParams={timestamp:+new Date()};$.each(options.extraParams,function(key,param){extraParams[key]=typeof param=="function"?param():param;});$.ajax({mode:"abort",port:"autocomplete"+input.name,dataType:options.dataType,url:options.url,data:$.extend({q:lastWord(term),limit:options.max},extraParams),success:function(data){var parsed=options.parse&&options.parse(data)||parse(data);cache.add(term,parsed);success(term,parsed);}});}else{select.emptyList();failure(term);}};function parse(data){var parsed=[];var rows=data.split("\n");for(var i=0;i<rows.length;i++){var row=$.trim(rows[i]);if(row){row=row.split("|");parsed[parsed.length]={data:row,value:row[0],result:options.formatResult&&options.formatResult(row,row[0])||row[0]};}}
return parsed;};function stopLoading(){$input.removeClass(options.loadingClass);};};$.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(row){return row[0];},formatMatch:null,autoFill:false,width:0,multiple:false,multipleSeparator:", ",highlight:function(value,term){return value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>");},scroll:true,scrollHeight:180};$.Autocompleter.Cache=function(options){var data={};var length=0;function matchSubset(s,sub){if(!options.matchCase)
s=s.toLowerCase();var i=s.indexOf(sub);if(i==-1)return false;return i==0||options.matchContains;};function add(q,value){if(length>options.cacheLength){flush();}
if(!data[q]){length++;}
data[q]=value;}
function populate(){if(!options.data)return false;var stMatchSets={},nullData=0;if(!options.url)options.cacheLength=1;stMatchSets[""]=[];for(var i=0,ol=options.data.length;i<ol;i++){var rawValue=options.data[i];rawValue=(typeof rawValue=="string")?[rawValue]:rawValue;var value=options.formatMatch(rawValue,i+1,options.data.length);if(value===false)
continue;var firstChar=value.charAt(0).toLowerCase();if(!stMatchSets[firstChar])
stMatchSets[firstChar]=[];var row={value:value,data:rawValue,result:options.formatResult&&options.formatResult(rawValue)||value};stMatchSets[firstChar].push(row);if(nullData++<options.max){stMatchSets[""].push(row);}};$.each(stMatchSets,function(i,value){options.cacheLength++;add(i,value);});}
setTimeout(populate,25);function flush(){data={};length=0;}
return{flush:flush,add:add,populate:populate,load:function(q){if(!options.cacheLength||!length)
return null;if(!options.url&&options.matchContains){var csub=[];for(var k in data){if(k.length>0){var c=data[k];$.each(c,function(i,x){if(matchSubset(x.value,q)){csub.push(x);}});}}
return csub;}else
if(data[q]){return data[q];}else
if(options.matchSubset){for(var i=q.length-1;i>=options.minChars;i--){var c=data[q.substr(0,i)];if(c){var csub=[];$.each(c,function(i,x){if(matchSubset(x.value,q)){csub[csub.length]=x;}});return csub;}}}
return null;}};};$.Autocompleter.Select=function(options,input,select,config){var CLASSES={ACTIVE:"ac_over"};var listItems,active=-1,data,term="",needsInit=true,element,list;function init(){if(!needsInit)
return;element=$("<div/>").hide().addClass(options.resultsClass).css("position","absolute").appendTo(document.body);list=$("<ul/>").appendTo(element).mouseover(function(event){if(target(event).nodeName&&target(event).nodeName.toUpperCase()=='LI'){active=$("li",list).removeClass(CLASSES.ACTIVE).index(target(event));$(target(event)).addClass(CLASSES.ACTIVE);}}).click(function(event){$(target(event)).addClass(CLASSES.ACTIVE);select();input.focus();return false;}).mousedown(function(){config.mouseDownOnSelect=true;}).mouseup(function(){config.mouseDownOnSelect=false;});if(options.width>0)
element.css("width",options.width);needsInit=false;}
function target(event){var element=event.target;while(element&&element.tagName!="LI")
element=element.parentNode;if(!element)
return[];return element;}
function moveSelect(step){listItems.slice(active,active+1).removeClass(CLASSES.ACTIVE);movePosition(step);var activeItem=listItems.slice(active,active+1).addClass(CLASSES.ACTIVE);if(options.scroll){var offset=0;listItems.slice(0,active).each(function(){offset+=this.offsetHeight;});if((offset+activeItem[0].offsetHeight-list.scrollTop())>list[0].clientHeight){list.scrollTop(offset+activeItem[0].offsetHeight-list.innerHeight());}else if(offset<list.scrollTop()){list.scrollTop(offset);}}};function movePosition(step){active+=step;if(active<0){active=listItems.size()-1;}else if(active>=listItems.size()){active=0;}}
function limitNumberOfItems(available){return options.max&&options.max<available?options.max:available;}
function fillList(){list.empty();var max=limitNumberOfItems(data.length);for(var i=0;i<max;i++){if(!data[i])
continue;var formatted=options.formatItem(data[i].data,i+1,max,data[i].value,term);if(formatted===false)
continue;var li=$("<li/>").html(options.highlight(formatted,term)).addClass(i%2==0?"ac_even":"ac_odd").appendTo(list)[0];$.data(li,"ac_data",data[i]);}
listItems=list.find("li");if(options.selectFirst){listItems.slice(0,1).addClass(CLASSES.ACTIVE);active=0;}
if($.fn.bgiframe)
list.bgiframe();}
return{display:function(d,q){init();data=d;term=q;fillList();},next:function(){moveSelect(1);},prev:function(){moveSelect(-1);},pageUp:function(){if(active!=0&&active-8<0){moveSelect(-active);}else{moveSelect(-8);}},pageDown:function(){if(active!=listItems.size()-1&&active+8>listItems.size()){moveSelect(listItems.size()-1-active);}else{moveSelect(8);}},hide:function(){element&&element.hide();listItems&&listItems.removeClass(CLASSES.ACTIVE);active=-1;},visible:function(){return element&&element.is(":visible");},current:function(){return this.visible()&&(listItems.filter("."+CLASSES.ACTIVE)[0]||options.selectFirst&&listItems[0]);},show:function(){var offset=$(input).offset();element.css({width:typeof options.width=="string"||options.width>0?options.width:($(input).width()+parseInt($(input).css('padding-left'))+parseInt($(input).css('padding-right'))+parseInt($(input).css('margin-left'))+parseInt($(input).css('margin-right'))),top:offset.top+input.offsetHeight,left:offset.left}).show();if(options.scroll){list.css({maxHeight:options.scrollHeight,overflow:'auto'});if($.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var listHeight=0;listItems.each(function(){listHeight+=this.offsetHeight;});var scrollbarsVisible=listHeight>options.scrollHeight;list.css('height',scrollbarsVisible?options.scrollHeight:listHeight);if(!scrollbarsVisible){listItems.width(list.width()-parseInt(listItems.css("padding-left"))-parseInt(listItems.css("padding-right")));}}}},selected:function(){var selected=listItems&&listItems.filter("."+CLASSES.ACTIVE).removeClass(CLASSES.ACTIVE);return selected&&selected.length&&$.data(selected[0],"ac_data");},emptyList:function(){list&&list.empty();},unbind:function(){element&&element.remove();}};};$.Autocompleter.Selection=function(field,start,end){if(field.createTextRange){var selRange=field.createTextRange();selRange.collapse(true);selRange.moveStart("character",start);selRange.moveEnd("character",end);selRange.select();}else if(field.setSelectionRange){field.setSelectionRange(start,end);}else{if(field.selectionStart){field.selectionStart=start;field.selectionEnd=end;}}
field.focus();};})(jQuery);;var instantSearchQueries=[];$(document).ready(function()
{if(typeof blocksearch_type=='undefined')
return;var $input=$("#search_query_"+blocksearch_type);var width_ac_results=$input.parent('form').outerWidth();if(typeof ajaxsearch!='undefined'&&ajaxsearch){$input.autocomplete(search_url,{minChars:3,max:10,width:(width_ac_results>0?width_ac_results:500),selectFirst:false,scroll:false,dataType:"json",formatItem:function(data,i,max,value,term){return value;},parse:function(data){var mytab=[];for(var i=0;i<data.length;i++)
mytab[mytab.length]={data:data[i],value:data[i].cname+' > '+data[i].pname};return mytab;},extraParams:{ajaxSearch:1,id_lang:id_lang}}).result(function(event,data,formatted){$input.val(data.pname);document.location.href=data.product_link;});}
if(typeof instantsearch!='undefined'&&instantsearch){$input.on('keyup',function(){if($(this).val().length>4)
{stopInstantSearchQueries();instantSearchQuery=$.ajax({url:search_url+'?rand='+new Date().getTime(),data:{instantSearch:1,id_lang:id_lang,q:$(this).val()},dataType:'html',type:'POST',headers:{"cache-control":"no-cache"},async:true,cache:false,success:function(data){if($input.val().length>0){tryToCloseInstantSearch();$('#center_column').attr('id','old_center_column');$('#old_center_column').after('<div id="center_column" class="'+$('#old_center_column').attr('class')+'">'+data+'</div>').hide();ajaxCart.overrideButtonsInThePage();$("#instant_search_results a.close").on('click',function(){$input.val('');return tryToCloseInstantSearch();});return false;}
else
tryToCloseInstantSearch();}});instantSearchQueries.push(instantSearchQuery);}
else
tryToCloseInstantSearch();});}});function tryToCloseInstantSearch()
{var $oldCenterColumn=$('#old_center_column');if($oldCenterColumn.length>0)
{$('#center_column').remove();$oldCenterColumn.attr('id','center_column').show();return false;}}
function stopInstantSearchQueries()
{for(var i=0;i<instantSearchQueries.length;i++)
instantSearchQueries[i].abort();instantSearchQueries=[];};;(function($){$.fn.hoverIntent=function(handlerIn,handlerOut,selector){var cfg={interval:100,sensitivity:7,timeout:0};if(typeof handlerIn==="object"){cfg=$.extend(cfg,handlerIn);}else if($.isFunction(handlerOut)){cfg=$.extend(cfg,{over:handlerIn,out:handlerOut,selector:selector});}else{cfg=$.extend(cfg,{over:handlerIn,out:handlerIn,selector:handlerOut});}
var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY;};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).off("mousemove.hoverIntent",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev]);}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev]);};var handleHover=function(e){var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);}
if(e.type=="mouseenter"){pX=ev.pageX;pY=ev.pageY;$(ob).on("mousemove.hoverIntent",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}}else{$(ob).off("mousemove.hoverIntent",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob);},cfg.timeout);}}};return this.on({'mouseenter.hoverIntent':handleHover,'mouseleave.hoverIntent':handleHover},cfg.selector);};})(jQuery);;(function($){"use strict";var methods=(function(){var c={bcClass:'sf-breadcrumb',menuClass:'sf-js-enabled',anchorClass:'sf-with-ul',menuArrowClass:'sf-arrows'},ios=(function(){var ios=/iPhone|iPad|iPod/i.test(navigator.userAgent);if(ios){$(window).load(function(){$('body').children().on('click',$.noop);});}
return ios;})(),wp7=(function(){var style=document.documentElement.style;return('behavior'in style&&'fill'in style&&/iemobile/i.test(navigator.userAgent));})(),toggleMenuClasses=function($menu,o){var classes=c.menuClass;if(o.cssArrows){classes+=' '+c.menuArrowClass;}
$menu.toggleClass(classes);},setPathToCurrent=function($menu,o){return $menu.find('li.'+o.pathClass).slice(0,o.pathLevels).addClass(o.hoverClass+' '+c.bcClass).filter(function(){return($(this).children(o.popUpSelector).hide().show().length);}).removeClass(o.pathClass);},toggleAnchorClass=function($li){$li.children('a').toggleClass(c.anchorClass);},toggleTouchAction=function($menu){var touchAction=$menu.css('ms-touch-action');touchAction=(touchAction==='pan-y')?'auto':'pan-y';$menu.css('ms-touch-action',touchAction);},applyHandlers=function($menu,o){var targets='li:has('+o.popUpSelector+')';if($.fn.hoverIntent&&!o.disableHI){$menu.hoverIntent(over,out,targets);}
else{$menu.on('mouseenter.superfish',targets,over).on('mouseleave.superfish',targets,out);}
var touchevent='MSPointerDown.superfish';if(!ios){touchevent+=' touchend.superfish';}
if(wp7){touchevent+=' mousedown.superfish';}
$menu.on('focusin.superfish','li',over).on('focusout.superfish','li',out).on(touchevent,'a',o,touchHandler);},touchHandler=function(e){var $this=$(this),$ul=$this.siblings(e.data.popUpSelector);if($ul.length>0&&$ul.is(':hidden')){$this.one('click.superfish',false);if(e.type==='MSPointerDown'){$this.trigger('focus');}else{$.proxy(over,$this.parent('li'))();}}},over=function(){var $this=$(this),o=getOptions($this);clearTimeout(o.sfTimer);$this.siblings().superfish('hide').end().superfish('show');},out=function(){var $this=$(this),o=getOptions($this);if(ios){$.proxy(close,$this,o)();}
else{clearTimeout(o.sfTimer);o.sfTimer=setTimeout($.proxy(close,$this,o),o.delay);}},close=function(o){o.retainPath=($.inArray(this[0],o.$path)>-1);this.superfish('hide');if(!this.parents('.'+o.hoverClass).length){o.onIdle.call(getMenu(this));if(o.$path.length){$.proxy(over,o.$path)();}}},getMenu=function($el){return $el.closest('.'+c.menuClass);},getOptions=function($el){return getMenu($el).data('sf-options');};return{hide:function(instant){if(this.length){var $this=this,o=getOptions($this);if(!o){return this;}
var not=(o.retainPath===true)?o.$path:'',$ul=$this.find('li.'+o.hoverClass).add(this).not(not).removeClass(o.hoverClass).children(o.popUpSelector),speed=o.speedOut;if(instant){$ul.show();speed=0;}
o.retainPath=false;o.onBeforeHide.call($ul);$ul.stop(true,true).animate(o.animationOut,speed,function(){var $this=$(this);o.onHide.call($this);});}
return this;},show:function(){var o=getOptions(this);if(!o){return this;}
var $this=this.addClass(o.hoverClass),$ul=$this.children(o.popUpSelector);o.onBeforeShow.call($ul);$ul.stop(true,true).animate(o.animation,o.speed,function(){o.onShow.call($ul);});return this;},destroy:function(){return this.each(function(){var $this=$(this),o=$this.data('sf-options'),$hasPopUp;if(!o){return false;}
$hasPopUp=$this.find(o.popUpSelector).parent('li');clearTimeout(o.sfTimer);toggleMenuClasses($this,o);toggleAnchorClass($hasPopUp);toggleTouchAction($this);$this.off('.superfish').off('.hoverIntent');$hasPopUp.children(o.popUpSelector).attr('style',function(i,style){return style.replace(/display[^;]+;?/g,'');});o.$path.removeClass(o.hoverClass+' '+c.bcClass).addClass(o.pathClass);$this.find('.'+o.hoverClass).removeClass(o.hoverClass);o.onDestroy.call($this);$this.removeData('sf-options');});},init:function(op){return this.each(function(){var $this=$(this);if($this.data('sf-options')){return false;}
var o=$.extend({},$.fn.superfish.defaults,op),$hasPopUp=$this.find(o.popUpSelector).parent('li');o.$path=setPathToCurrent($this,o);$this.data('sf-options',o);toggleMenuClasses($this,o);toggleAnchorClass($hasPopUp);toggleTouchAction($this);applyHandlers($this,o);$hasPopUp.not('.'+c.bcClass).superfish('hide',true);o.onInit.call(this);});}};})();$.fn.superfish=function(method,args){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}
else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}
else{return $.error('Method '+method+' does not exist on jQuery.fn.superfish');}};$.fn.superfish.defaults={popUpSelector:'ul,.sf-mega',hoverClass:'sfHover',pathClass:'overrideThisToUse',pathLevels:1,delay:800,animation:{opacity:'show'},animationOut:{opacity:'hide'},speed:'normal',speedOut:'fast',cssArrows:true,disableHI:false,onInit:$.noop,onBeforeShow:$.noop,onShow:$.noop,onBeforeHide:$.noop,onHide:$.noop,onIdle:$.noop,onDestroy:$.noop};$.fn.extend({hideSuperfishUl:methods.hide,showSuperfishUl:methods.show});})(jQuery);;var responsiveflagMenu=false;var categoryMenu=$('ul.sf-menu');var mCategoryGrover=$('.sf-contener .cat-title');$(document).ready(function(){categoryMenu=$('ul.sf-menu');mCategoryGrover=$('.sf-contener .cat-title');responsiveMenu();$(window).resize(responsiveMenu);});function responsiveMenu()
{if($(window).width()<=991&&responsiveflagMenu==false){menuChange('enable');responsiveflagMenu=true;}else if($(window).width()>=992){menuChange('disable');responsiveflagMenu=false;}}
function desktopInit()
{mCategoryGrover.off();mCategoryGrover.removeClass('active');$('.sf-menu > li > ul').removeClass('menu-mobile').parent().find('.menu-mobile-grover').remove();$('.sf-menu').removeAttr('style');categoryMenu.superfish('init');$('.sf-menu > li > ul').addClass('submenu-container clearfix');$('.sf-menu > li > ul').each(function(){i=0;$(this).each(function(){if($(this).attr('class')!="category-thumbnail"){i++;if(i%2==1)
$(this).addClass('first-in-line-xs');else if(i%5==1)
$(this).addClass('first-in-line-lg');}});});}
function mobileInit()
{categoryMenu.superfish('destroy');$('.sf-menu').removeAttr('style');mCategoryGrover.on('click',function(e){$(this).toggleClass('active').parent().find('ul.menu-content').stop().slideToggle('medium');return false;});$('.sf-menu > li > ul').addClass('menu-mobile clearfix').parent().prepend('<span class="menu-mobile-grover"></span>');$(".sf-menu .menu-mobile-grover").on('click',function(e){var catSubUl=$(this).next().next('.menu-mobile');if(catSubUl.is(':hidden'))
{catSubUl.slideDown();$(this).addClass('active');}
else
{catSubUl.slideUp();$(this).removeClass('active');}
return false;});}
function menuChange(status)
{status=='enable'?mobileInit():desktopInit();};;(function($){$.fn.extend({autocomplete:function(urlOrData,options){var isUrl=typeof urlOrData=="string";options=$.extend({},$.Autocompleter.defaults,{url:isUrl?urlOrData:null,data:isUrl?null:urlOrData,delay:isUrl?$.Autocompleter.defaults.delay:10,max:options&&!options.scroll?10:150},options);options.highlight=options.highlight||function(value){return value;};options.formatMatch=options.formatMatch||options.formatItem;return this.each(function(){new $.Autocompleter(this,options);});},result:function(handler){return this.bind("result",handler);},search:function(handler){return this.trigger("search",[handler]);},flushCache:function(){return this.trigger("flushCache");},setOptions:function(options){return this.trigger("setOptions",[options]);},unautocomplete:function(){return this.trigger("unautocomplete");}});$.Autocompleter=function(input,options){var KEY={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var $input=$(input).attr("autocomplete","off").addClass(options.inputClass);var timeout;var previousValue="";var cache=$.Autocompleter.Cache(options);var hasFocus=0;var lastKeyPressCode;var config={mouseDownOnSelect:false};var select=$.Autocompleter.Select(options,input,selectCurrent,config);var blockSubmit;$.browser.opera&&$(input.form).bind("submit.autocomplete",function(){if(blockSubmit){blockSubmit=false;return false;}});$input.bind(($.browser.opera?"keypress":"keydown")+".autocomplete",function(event){lastKeyPressCode=event.keyCode;switch(event.keyCode){case KEY.UP:event.preventDefault();if(select.visible()){select.prev();}else{onChange(0,true);}
break;case KEY.DOWN:event.preventDefault();if(select.visible()){select.next();}else{onChange(0,true);}
break;case KEY.PAGEUP:event.preventDefault();if(select.visible()){select.pageUp();}else{onChange(0,true);}
break;case KEY.PAGEDOWN:event.preventDefault();if(select.visible()){select.pageDown();}else{onChange(0,true);}
break;case options.multiple&&$.trim(options.multipleSeparator)==","&&KEY.COMMA:case KEY.TAB:case KEY.RETURN:if(selectCurrent()){event.preventDefault();blockSubmit=true;return false;}
break;case KEY.ESC:select.hide();break;default:clearTimeout(timeout);timeout=setTimeout(onChange,options.delay);break;}}).focus(function(){hasFocus++;}).blur(function(){hasFocus=0;if(!config.mouseDownOnSelect){hideResults();}}).click(function(){if(hasFocus++>1&&!select.visible()){onChange(0,true);}}).bind("search",function(){var fn=(arguments.length>1)?arguments[1]:null;function findValueCallback(q,data){var result;if(data&&data.length){for(var i=0;i<data.length;i++){if(data[i].result.toLowerCase()==q.toLowerCase()){result=data[i];break;}}}
if(typeof fn=="function")fn(result);else $input.trigger("result",result&&[result.data,result.value]);}
$.each(trimWords($input.val()),function(i,value){request(value,findValueCallback,findValueCallback);});}).bind("flushCache",function(){cache.flush();}).bind("setOptions",function(){$.extend(options,arguments[1]);if("data"in arguments[1])
cache.populate();}).bind("unautocomplete",function(){select.unbind();$input.unbind();$(input.form).unbind(".autocomplete");});function selectCurrent(){var selected=select.selected();if(!selected)
return false;var v=selected.result;previousValue=v;if(options.multiple){var words=trimWords($input.val());if(words.length>1){v=words.slice(0,words.length-1).join(options.multipleSeparator)+options.multipleSeparator+v;}
v+=options.multipleSeparator;}
$input.val(v);hideResultsNow();$input.trigger("result",[selected.data,selected.value]);return true;}
function onChange(crap,skipPrevCheck){if(lastKeyPressCode==KEY.DEL){select.hide();return;}
var currentValue=$input.val();if(!skipPrevCheck&&currentValue==previousValue)
return;previousValue=currentValue;currentValue=lastWord(currentValue);if(currentValue.length>=options.minChars){$input.addClass(options.loadingClass);if(!options.matchCase)
currentValue=currentValue.toLowerCase();request(currentValue,receiveData,hideResultsNow);}else{stopLoading();select.hide();}};function trimWords(value){if(!value){return[""];}
var words=value.split(options.multipleSeparator);var result=[];$.each(words,function(i,value){if($.trim(value))
result[i]=$.trim(value);});return result;}
function lastWord(value){if(!options.multiple)
return value;var words=trimWords(value);return words[words.length-1];}
function autoFill(q,sValue){if(options.autoFill&&(lastWord($input.val()).toLowerCase()==q.toLowerCase())&&lastKeyPressCode!=KEY.BACKSPACE){$input.val($input.val()+sValue.substring(lastWord(previousValue).length));$.Autocompleter.Selection(input,previousValue.length,previousValue.length+sValue.length);}};function hideResults(){clearTimeout(timeout);timeout=setTimeout(hideResultsNow,200);};function hideResultsNow(){var wasVisible=select.visible();select.hide();clearTimeout(timeout);stopLoading();if(options.mustMatch){$input.search(function(result){if(!result){if(options.multiple){var words=trimWords($input.val()).slice(0,-1);$input.val(words.join(options.multipleSeparator)+(words.length?options.multipleSeparator:""));}
else
$input.val("");}});}
if(wasVisible)
$.Autocompleter.Selection(input,input.value.length,input.value.length);};function receiveData(q,data){if(data&&data.length&&hasFocus){stopLoading();select.display(data,q);autoFill(q,data[0].value);select.show();}else{hideResultsNow();}};function request(term,success,failure){if(!options.matchCase)
term=term.toLowerCase();var data=cache.load(term);if(data&&data.length){success(term,data);}else if((typeof options.url=="string")&&(options.url.length>0)){var extraParams={timestamp:+new Date()};$.each(options.extraParams,function(key,param){extraParams[key]=typeof param=="function"?param():param;});$.ajax({mode:"abort",port:"autocomplete"+input.name,dataType:options.dataType,url:options.url,data:$.extend({cate:$('select#cate').val(),q:lastWord(term),limit:options.max},extraParams),success:function(data){var parsed=options.parse&&options.parse(data)||parse(data);success(term,parsed);}});}else{select.emptyList();failure(term);}};function parse(data){var parsed=[];var rows=data.split("\n");for(var i=0;i<rows.length;i++){var row=$.trim(rows[i]);if(row){row=row.split("|");parsed[parsed.length]={data:row,value:row[0],result:options.formatResult&&options.formatResult(row,row[0])||row[0]};}}
return parsed;};function stopLoading(){$input.removeClass(options.loadingClass);};};$.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(row){return row[0];},formatMatch:null,autoFill:false,width:0,multiple:false,multipleSeparator:", ",highlight:function(value,term){return value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>");},scroll:true,scrollHeight:180};$.Autocompleter.Cache=function(options){var data={};var length=0;function matchSubset(s,sub){if(!options.matchCase)
s=s.toLowerCase();var i=s.indexOf(sub);if(i==-1)return false;return i==0||options.matchContains;};function add(q,cate,value){if(length>options.cacheLength){flush();}
if(!data[q]){length++;}
data[q]=value;}
function populate(){if(!options.data)return false;var stMatchSets={},nullData=0;if(!options.url)options.cacheLength=1;stMatchSets[""]=[];for(var i=0,ol=options.data.length;i<ol;i++){var rawValue=options.data[i];rawValue=(typeof rawValue=="string")?[rawValue]:rawValue;var value=options.formatMatch(rawValue,i+1,options.data.length);if(value===false)
continue;var firstChar=value.charAt(0).toLowerCase();if(!stMatchSets[firstChar])
stMatchSets[firstChar]=[];var row={value:value,data:rawValue,result:options.formatResult&&options.formatResult(rawValue)||value};stMatchSets[firstChar].push(row);if(nullData++<options.max){stMatchSets[""].push(row);}};$.each(stMatchSets,function(i,value){options.cacheLength++;add(i,value);});}
setTimeout(populate,25);function flush(){data={};length=0;}
return{flush:flush,add:add,populate:populate,load:function(q){if(!options.cacheLength||!length)
return null;if(!options.url&&options.matchContains){var csub=[];for(var k in data){if(k.length>0){var c=data[k];$.each(c,function(i,x){if(matchSubset(x.value,q)){csub.push(x);}});}}
return csub;}else
if(data[q]){return data[q];}else
if(options.matchSubset){for(var i=q.length-1;i>=options.minChars;i--){var c=data[q.substr(0,i)];if(c){var csub=[];$.each(c,function(i,x){if(matchSubset(x.value,q)){csub[csub.length]=x;}});return csub;}}}
return null;}};};$.Autocompleter.Select=function(options,input,select,config){var CLASSES={ACTIVE:"ac_over"};var listItems,active=-1,data,term="",needsInit=true,element,list;function init(){if(!needsInit)
return;element=$("<div/>").hide().addClass(options.resultsClass).css("position","absolute").appendTo(document.body);list=$("<ul/>").appendTo(element).mouseover(function(event){if(target(event).nodeName&&target(event).nodeName.toUpperCase()=='LI'){active=$("li",list).removeClass(CLASSES.ACTIVE).index(target(event));$(target(event)).addClass(CLASSES.ACTIVE);}}).click(function(event){$(target(event)).addClass(CLASSES.ACTIVE);select();input.focus();return false;}).mousedown(function(){config.mouseDownOnSelect=true;}).mouseup(function(){config.mouseDownOnSelect=false;});if(options.width>0)
element.css("width",options.width);needsInit=false;}
function target(event){var element=event.target;while(element&&element.tagName!="LI")
element=element.parentNode;if(!element)
return[];return element;}
function moveSelect(step){listItems.slice(active,active+1).removeClass(CLASSES.ACTIVE);movePosition(step);var activeItem=listItems.slice(active,active+1).addClass(CLASSES.ACTIVE);if(options.scroll){var offset=0;listItems.slice(0,active).each(function(){offset+=this.offsetHeight;});if((offset+activeItem[0].offsetHeight-list.scrollTop())>list[0].clientHeight){list.scrollTop(offset+activeItem[0].offsetHeight-list.innerHeight());}else if(offset<list.scrollTop()){list.scrollTop(offset);}}};function movePosition(step){active+=step;if(active<0){active=listItems.size()-1;}else if(active>=listItems.size()){active=0;}}
function limitNumberOfItems(available){return options.max&&options.max<available?options.max:available;}
function fillList(){list.empty();var max=limitNumberOfItems(data.length);for(var i=0;i<max;i++){if(!data[i])
continue;var formatted=options.formatItem(data[i].data,i+1,max,data[i].value,term);if(formatted===false)
continue;var li=$("<li/>").html(options.highlight(formatted,term)).addClass(i%2==0?"ac_even":"ac_odd").appendTo(list)[0];$.data(li,"ac_data",data[i]);}
listItems=list.find("li");if(options.selectFirst){listItems.slice(0,1).addClass(CLASSES.ACTIVE);active=0;}
if($.fn.bgiframe)
list.bgiframe();}
return{display:function(d,q){init();data=d;term=q;fillList();},next:function(){moveSelect(1);},prev:function(){moveSelect(-1);},pageUp:function(){if(active!=0&&active-8<0){moveSelect(-active);}else{moveSelect(-8);}},pageDown:function(){if(active!=listItems.size()-1&&active+8>listItems.size()){moveSelect(listItems.size()-1-active);}else{moveSelect(8);}},hide:function(){element&&element.hide();listItems&&listItems.removeClass(CLASSES.ACTIVE);active=-1;},visible:function(){return element&&element.is(":visible");},current:function(){return this.visible()&&(listItems.filter("."+CLASSES.ACTIVE)[0]||options.selectFirst&&listItems[0]);},show:function(){var offset=$(input).offset();element.css({width:typeof options.width=="string"||options.width>0?options.width:($(input).width()+parseInt($(input).css('padding-left'))+parseInt($(input).css('padding-right'))+parseInt($(input).css('margin-left'))+parseInt($(input).css('margin-right'))),top:offset.top+input.offsetHeight,left:offset.left}).show();if(options.scroll){list.css({maxHeight:options.scrollHeight,overflow:'auto'});if($.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var listHeight=0;listItems.each(function(){listHeight+=this.offsetHeight;});var scrollbarsVisible=listHeight>options.scrollHeight;list.css('height',scrollbarsVisible?options.scrollHeight:listHeight);if(!scrollbarsVisible){listItems.width(list.width()-parseInt(listItems.css("padding-left"))-parseInt(listItems.css("padding-right")));}}}},selected:function(){var selected=listItems&&listItems.filter("."+CLASSES.ACTIVE).removeClass(CLASSES.ACTIVE);return selected&&selected.length&&$.data(selected[0],"ac_data");},emptyList:function(){list&&list.empty();},unbind:function(){element&&element.remove();}};};$.Autocompleter.Selection=function(field,start,end){if(field.createTextRange){var selRange=field.createTextRange();selRange.collapse(true);selRange.moveStart("character",start);selRange.moveEnd("character",end);selRange.select();}else if(field.setSelectionRange){field.setSelectionRange(start,end);}else{if(field.selectionStart){field.selectionStart=start;field.selectionEnd=end;}}
field.focus();};})(jQuery);;var instantSearchQueries=[];$(document).ready(function()
{if(typeof ajaxsearch!='undefined'&&ajaxsearch&&typeof blocksearch_type!=='undefined'&&blocksearch_type){var width_ac_results=$("#leo_search_query_"+blocksearch_type).parent('form').width();$("#leo_search_query_"+blocksearch_type).autocomplete(leo_search_url,{minChars:3,max:10,width:(width_ac_results>0?width_ac_results:500),selectFirst:false,scroll:false,dataType:"json",formatItem:function(data,i,max,value,term){return value;},parse:function(data){var mytab=new Array();for(var i=0;i<data.length;i++)
mytab[mytab.length]={data:data[i],value:'<IMG align = "center" width = "20px" SRC='+data[i].image_link+'>'+'  '+data[i].pname};return mytab;},extraParams:{ajaxSearch:1,id_lang:id_lang}}).result(function(event,data,formatted){$('#leo_search_query_'+blocksearch_type).val(data.pname);document.location.href=data.product_link;});}});function tryToCloseInstantSearch()
{if($('#old_center_column').length>0)
{$('#center_column').remove();$('#old_center_column').attr('id','center_column');$('#center_column').show();return false;}}
function stopInstantSearchQueries()
{for(i=0;i<instantSearchQueries.length;i++)
instantSearchQueries[i].abort();instantSearchQueries=new Array();};;(function(a){a.fn.LiteTooltip=function(d,c){return this.each(function(){var f=a.extend({},a.fn.LiteTooltip.defaultSettings,d||{});var e=a(this);var g=new b(f,e);if(g.settings.title!=""){if(!e.is("input")){e.css({cursor:"pointer"})}
var debug=(g.settings.debug!=null)?((g.settings.debug=="true"||g.settings.debug==true)?true:false):false;if(g.settings.trigger=="hoverable"){this.toggle=false;e.bind("mouseenter",{settings:g.settings,element:e,$plugin:g,$toggle:this.toggle},g.mouseOverHandler);if(!debug){e.bind("mouseleave",{settings:g.settings,element:e,$plugin:g,$toggle:this.toggle},g.mouseOutHandler)}}else{if(g.settings.trigger=="hover"){e.bind("mouseenter",{settings:g.settings,element:e,$plugin:g},g.mouseOverHandler);if(!debug){e.bind("mouseleave",{settings:g.settings,element:e,$plugin:g},g.mouseOutHandler)}}else{if(g.settings.trigger=="focus"){e.bind("focus",{settings:g.settings,element:e,$plugin:g},g.mouseOverHandler);e.bind("blur",{settings:g.settings,element:e,$plugin:g},g.mouseOutHandler)}else{if(g.settings.trigger=="click"){this.toggle=false;e.bind("click",{settings:g.settings,element:e,$plugin:g,$toggle:this.toggle},g.mouseOverHandler);if(!g.settings.issticky){if(!debug){e.bind("mouseleave",{settings:g.settings,element:e,$plugin:g,$toggle:this.toggle},g.mouseOutHandler)}}}}}}}})};function b(d,c){this.settings=this.getSettings(d,c);this.$element=c;return this}
b.prototype={getSettings:function(f,d){var e=(d.data("issticky")!=null)?((d.data("issticky")=="true")?true:false):true;var c=a.extend({},f,{location:d.data("location"),title:d.data("title"),backcolor:d.data("backcolor"),textalign:d.data("textalign"),trigger:d.data("trigger"),textcolor:d.data("textcolor"),opacity:d.data("opacity"),templatename:d.data("templatename"),width:d.data("width"),margin:d.data("margin"),padding:d.data("padding"),delay:d.data("delay"),issticky:e,container:d.data("container"),shadow:d.data("shadow")});return c},mouseOverHandler:function(n){if(typeof n.data.settings.onUpdate=="function"){n.data.settings.title=n.data.settings.onUpdate.call(this)}
if(n.data.element.is("input")){if(n.data.element.val()!=""){return false}}
if(n.data.settings.trigger=="click"){if(!n.data.$toggle){n.data.$toggle=true;this.toggle=true;n.data.element.unbind("click");n.data.element.bind("click",{settings:n.data.settings,element:n.data.element,$plugin:n.data.$plugin,$toggle:n.data.$toggle},n.data.$plugin.mouseOutHandler)}else{n.data.$toggle=false;this.toggle=false;return false}}
var c=n.data.element;var d=n.data.settings;var R=parseInt(d.margin.toString().replace("px",""));var T=parseInt(d.padding.toString().replace("px",""));var Y=parseInt(d.width.toString().replace("px",""));var Q=d.container=="body"?d.location:"none";var N=d.backcolor;var X=d.textcolor;var W=d.textalign;var V=d.templatename;var P=d.delay;var K=a(d.template);K.css({opacity:d.opacity});K.css("visibility","visible");K.find(".tooltip-content").css({"text-align":W}).html(d.title+d.clearfix);K.find(".tooltip-content").css({padding:T+"px"});K.find(".tooltip-content p").css({background:N});K.find(".tooltip-content p").css({color:X});if(d.shadow==1){K.find(".tooltip-content").css({"box-shadow":"1px 1px 3px 0px #888888"})}
var M=Q;var L=Q.split("-")[0];var E=M;var D=L;K.removeClass(Q).addClass(M);K.find(".tooltip-arrow").removeClass(Q).addClass(M).css("border-"+L+"-color",N);var l=d.container;if(d.container!="body"){K.addClass("incontainer");l="#"+d.container;a(l).children().each(function(){a(this).remove()})}else{K.removeClass("incontainer");l="body"}
a(l).append(K);if(n.data.settings.trigger=="click"){var O=a('<div id="tooltip-clickoutside"></div>');O.css({width:"100%",height:"100%",position:"absolute",top:a(document).scrollTop()+"px",left:"0px"});a("body").append(O);O.bind("click",{settings:n.data.settings,element:n.data.element,$plugin:n.data.$plugin,$toggle:n.data.$toggle},n.data.$plugin.mouseOutHandler);n.data.$toggle=false;this.toggle=false}else{if(n.data.settings.trigger=="hoverable"){n.data.element.unbind("mouseenter")}}
if(d.container=="body"){K.offset({top:0,left:0});var ab=K.outerWidth();var Z=K.outerHeight();var ae=a(document).width();var G=scrollbarWidth();var ac=a(document).width()-a(window).width();if(ac>0){ae=ae-G}
if(ae>a(window).width()){ae=a(window).width()-G}
var ad=a(document).height();if(ac>G){ad=ad-G}
if(Y!=0){if(Y*2>ae){Y=Math.floor((ae/2)-30)}else{Y-=30}
if(Y*1.5>ae/2){Y=Math.floor((ae/2)-30)}}else{if(340*2>ae){Y=Math.floor((ae/2)-30)}else{Y=340}}
K.css({"max-width":Y});ab=K.outerWidth();Z=K.outerHeight();var J=c.context;var r=J.offsetWidth;var o=J.offsetHeight;var q=c.offset().top;var p=c.offset().left;if(J.tagName.toLowerCase()=="area"){var g=J.parentElement.getAttribute("name");var h=J.getAttribute("shape").toLowerCase();var x=a("img[usemap='#"+g+"']").offset().top;var w=a("img[usemap='#"+g+"']").offset().left;var j=parseInt(J.getAttribute("coords").split(",")[0]);var k=parseInt(J.getAttribute("coords").split(",")[1]);var i=parseInt(J.getAttribute("coords").split(",")[2]);var f=parseInt(J.getAttribute("coords").split(",")[3]||i);var v={top:parseInt(x+k),left:parseInt(w+j)};if(h=="circle"){v={top:parseInt(x+k-i),left:parseInt(w+j-i)};i*=2;f*=2}
if(h=="rect"){v={top:parseInt(x+k),left:parseInt(w+j)};i=i-j;f=f-k}
if(h=="poly"){var m=new Array();var H=J.getAttribute("coords").split(",");for(var y=0;y<H.length;){m.push({x:parseInt(H[y]),y:parseInt(H[y+1])});y=y+2}
m.sort(function(e,af){var ag=e.x,ah=af.x;if(ag==ah){return 0}
return ag<ah?1:-1});var z=m[0].x;m.sort(function(e,af){var ag=e.y,ah=af.y;if(ag==ah){return 0}
return ag<ah?1:-1});var A=m[0].y;m.sort(function(e,af){var ag=e.x,ah=af.x;if(ag==ah){return 0}
return ag>ah?1:-1});var B=m[0].x;m.sort(function(e,af){var ag=e.y,ah=af.y;if(ag==ah){return 0}
return ag>ah?1:-1});var C=m[0].y;v={top:parseInt(x+C),left:parseInt(w+B)};i=z-B;f=A-C}
p=v.left;q=v.top;r=i;o=f}
p=Math.round(p);q=Math.round(q);r=Math.round(r);o=Math.round(o);K.offset({top:0,left:0});var S;switch(Q){case"top":S={top:(q-Z-R),left:p-(ab/2)+(r/2)};break;case"top-left":S={top:(q-Z-R),left:p};break;case"top-right":S={top:(q-Z-R),left:p-ab+r};break;case"right":S={top:(q+(o/2)-(Z/2)),left:p+r+R};break;case"right-top":S={top:(q+o-Z+8),left:p+r+R};break;case"right-bottom":S={top:q-8,left:p+r+R};break;case"bottom":S={top:(q+o+R),left:p-(ab/2)+(r/2)};break;case"bottom-left":S={top:(q+o+R),left:p};break;case"bottom-right":S={top:(q+o+R),left:p-ab+r};break;case"left":S={top:(q+(o/2)-(Z/2)),left:p-ab-R};break;case"left-top":S={top:(q+o-Z+8),left:p-ab-R};break;case"left-bottom":S={top:q-8,left:p-ab-R};break}
var F={top:0,left:0};F.left=S.left;F.top=S.top;var aa=(((M.match("bottom")!=null)||(M=="left")||(M=="right"))?(((M=="left")||(M=="right"))?(Z/2):(Z))>(ad-q-o):false);if((S.left<0)||(S.top<0)||(S.left+ab>ae)||aa){if(L=="top"||L=="bottom"||L=="left"||L=="right"){var u=false;switch(L){case"top":S.top=q-Z-R;S.left=p-(ab/2)+(r/2);u=true;break;case"bottom":S.top=q-Z-R;S.left=p-(ab/2)+(r/2);u=true;break;case"left":var I=M.replace(L+"-","");if(I=="top"){L="top";M="top-left";K.removeClass(E).addClass(M);K.find(".tooltip-arrow").removeClass(E).css("border-"+D+"-color","").addClass(M).css("border-"+L+"-color",N);D="top";E="top-left";K.removeClass(Q).addClass(M);K.find(".tooltip-arrow").removeClass(Q).addClass(M).css("border-"+L+"-color",N);ab=K.outerWidth();Z=K.outerHeight();S.top=q-Z-R;S.left=p-(ab/2)+(r/2);F.left=p;F.top=q-Z-R;aa=(((M.match("bottom")!=null)||(M=="left")||(M=="right"))?(((M=="left")||(M=="right"))?(Z/2):(Z))>(ad-q-o):false);if((S.left<0)||(S.top<0)||(S.left+ab>ae)||aa){u=true}else{S.left=F.left;S.top=F.top}}else{if(I=="bottom"){L="bottom";M="bottom-left";K.removeClass(E).addClass(M);K.find(".tooltip-arrow").removeClass(E).css("border-"+D+"-color","").addClass(M).css("border-"+L+"-color",N);D="bottom";E="bottom-left";K.removeClass(Q).addClass(M);K.find(".tooltip-arrow").removeClass(Q).addClass(M).css("border-"+L+"-color",N);ab=K.outerWidth();Z=K.outerHeight();S.top=q+o+R;S.left=p-(ab/2)+(r/2);F.left=p;F.top=q+o+R;aa=(((M.match("bottom")!=null)||(M=="left")||(M=="right"))?(((M=="left")||(M=="right"))?(Z/2):(Z))>(ad-q-o):false);if((S.left<0)||(S.top<0)||(S.left+ab>ae)||aa){u=true}else{S.left=F.left;S.top=F.top}}else{L="top";M="top";K.removeClass(E).addClass(M);K.find(".tooltip-arrow").removeClass(E).css("border-"+D+"-color","").addClass(M).css("border-"+L+"-color",N);D="top";E="top";K.removeClass(Q).addClass(M);K.find(".tooltip-arrow").removeClass(Q).addClass(M).css("border-"+L+"-color",N);ab=K.outerWidth();Z=K.outerHeight();S.top=q-Z-R;S.left=p-(ab/2)+(r/2);F.left=S.left;F.top=S.top;aa=(((M.match("bottom")!=null)||(M=="left")||(M=="right"))?(((M=="left")||(M=="right"))?(Z/2):(Z))>(ad-q-o):false);if((S.left<0)||(S.top<0)||(S.left+ab>ae)||aa){u=true}else{S.left=F.left;S.top=F.top}}}
break;case"right":var I=M.replace(L+"-","");if(I=="top"){L="top";M="top-left";K.removeClass(E).addClass(M);K.find(".tooltip-arrow").removeClass(E).css("border-"+D+"-color","").addClass(M).css("border-"+L+"-color",N);D="top";E="top-left";K.removeClass(Q).addClass(M);K.find(".tooltip-arrow").removeClass(Q).addClass(M).css("border-"+L+"-color",N);ab=K.outerWidth();Z=K.outerHeight();S.top=q-Z-R;S.left=p-(ab/2)+(r/2);F.left=p;F.top=q-Z-R;aa=(((M.match("bottom")!=null)||(M=="left")||(M=="right"))?(((M=="left")||(M=="right"))?(Z/2):(Z))>(ad-q-o):false);if((S.left<0)||(S.top<0)||(S.left+ab>ae)||aa){u=true}else{S.left=F.left;S.top=F.top}}else{if(I=="bottom"){L="bottom";M="bottom-left";K.removeClass(E).addClass(M);K.find(".tooltip-arrow").removeClass(E).css("border-"+D+"-color","").addClass(M).css("border-"+L+"-color",N);D="bottom";E="bottom-left";K.removeClass(Q).addClass(M);K.find(".tooltip-arrow").removeClass(Q).addClass(M).css("border-"+L+"-color",N);ab=K.outerWidth();Z=K.outerHeight();S.top=q-Z-R;S.left=p-(ab/2)+(r/2);F.left=p;F.top=q+o+R;aa=(((M.match("bottom")!=null)||(M=="left")||(M=="right"))?(((M=="left")||(M=="right"))?(Z/2):(Z))>(ad-q-o):false);if((S.left<0)||(S.top<0)||(S.left+ab>ae)||aa){u=true}else{S.left=F.left;S.top=F.top}}else{L="top";M="top";K.removeClass(E).addClass(M);K.find(".tooltip-arrow").removeClass(E).css("border-"+D+"-color","").addClass(M).css("border-"+L+"-color",N);D="top";E="top";K.removeClass(Q).addClass(M);K.find(".tooltip-arrow").removeClass(Q).addClass(M).css("border-"+L+"-color",N);ab=K.outerWidth();Z=K.outerHeight();S.top=q-Z-R;S.left=p-(ab/2)+(r/2);F.left=S.left;F.top=S.top;aa=(((M.match("bottom")!=null)||(M=="left")||(M=="right"))?(((M=="left")||(M=="right"))?(Z/2):(Z))>(ad-q-o):false);if((S.left<0)||(S.top<0)||(S.left+ab>ae)||aa){u=true}else{S.left=F.left;S.top=F.top}}}
break}
if(u){var s=false;var t=false;if(S.top<0){L="bottom";M="bottom";S.top=q+o+R;t=true;if(S.left<0){L="bottom";M="bottom-left";S.left=p;s=true}
if(S.left+ab>ae){S.left=p-ab+r;if(S.left<0){L="bottom";M="bottom";S.left=p-(ab/2)+(r/2);s=true}else{L="bottom";M="bottom-right";S.left=p-ab+r;s=true}}}else{L="top";M="top";S.top=q-Z-R;t=false;if(S.left<0){L="top";M="top-left";S.left=p;s=true}
if(S.left+ab>ae){S.left=p-ab+r;if(S.left<0){L="top";M="top";S.left=p-(ab/2)+(r/2);s=true}else{L="top";M="top-right";S.left=p-ab+r;s=true}}}
if(!s){if(t){M=E.replace("top","bottom");L=D.replace("top","bottom");if(F.left<0){if(L=="bottom"||L=="top"){M=M.replace("right","left");S.left=p}}else{S.left=F.left}}else{M=E.replace("bottom","top");L=D.replace("bottom","top");if(F.left<0){if(L=="bottom"||L=="top"){M=M.replace("right","left");S.left=p}}else{S.left=F.left}}}}}}
K.removeClass(E).addClass(M);K.find(".tooltip-arrow").removeClass(E).css("border-"+D+"-color","").addClass(M).css("border-"+L+"-color",N);if(V!=""){if(K.find(".tooltip-content > .template").hasClass("template")){K.find(".tooltip-content > .template").addClass(V);var U=K.find("."+V).css("background-color");}else{if(K.find(".tooltip-content > .tooltip-menu").hasClass("tooltip-menu")){K.find(".tooltip-content > .tooltip-menu").addClass(V);var U=K.find("."+V).css("background-color");K.find(".tooltip-arrow").css("border-"+D+"-color","");K.find(".tooltip-arrow").css("border-"+L+"-color",U);K.find(".tooltip-content").css({background:U})}}}
K.find(".tooltip-content > .video-wrapper").css({width:(K.width()-(T*2))+"px"});K.offset(S)}
K.hide();c.removeAttr("title");c.removeAttr("alt");if(n.data.settings.trigger=="hoverable"||n.data.settings.trigger=="click"){P=0}
switch(L){case"top":K.delay(P).css({top:"-=20",opacity:0,display:"block"}).stop(true,true).animate({top:"+=20",opacity:d.opacity},150);break;case"bottom":K.delay(P).css({top:"+=20",opacity:0,display:"block"}).stop(true,true).animate({top:"-=20",opacity:d.opacity},150);break;case"left":K.delay(P).css({left:"-=20",opacity:0,display:"block"}).stop(true,true).animate({left:"+=20",opacity:d.opacity},150);break;case"right":K.delay(P).css({left:"+=20",opacity:0,display:"block"}).stop(true,true).animate({left:"-=20",opacity:d.opacity},150);break;default:K.delay(P).css({opacity:0,display:"block"}).stop(true,true).animate({opacity:d.opacity},150);break}
n.data.$plugin.tooltip=K;n.data.$plugin.location=Q;n.data.$plugin.tooltip_arrow_border=L;K=null;return false},mouseOutHandler:function(d){var f=d.data.$plugin.tooltip;var g=d.data.$plugin.location;var c=false;if(d.data.settings.trigger!="hoverable"){if(d.data.settings.trigger=="hover"){a(f).delay(d.data.settings.delay);c=true}else{c=true;if(d.data.settings.trigger=="click"){if(!d.data.settings.issticky){d.data.settings.interval=setInterval(function(){a(f).fadeOut(0,function(){a(d.data.$plugin.tooltip).remove()});clearInterval(d.data.settings.interval);this.toggle=false;d.data.$toggle=false;d.data.element.unbind("click");d.data.element.unbind("mouseleave");d.data.element.bind("click",{settings:d.data.settings,element:d.data.element,$plugin:d.data.$plugin,$toggle:false},d.data.$plugin.mouseOverHandler);d.data.element.bind("mouseleave",{settings:d.data.settings,element:d.data.element,$plugin:d.data.$plugin,$toggle:false},d.data.$plugin.mouseOutHandler)},d.data.settings.delay==0?2000:d.data.settings.delay);d.data.element.unbind("mouseleave");a(f).find(".tooltip-content").bind("mouseenter",{settings:d.data.settings,element:d.data.element,$plugin:d.data.$plugin,$toggle:true},function(){d.data.element.unbind("click");d.data.element.unbind("mouseleave");this.toggle=true;d.data.$toggle=true;clearInterval(d.data.settings.interval)});a(f).find(".tooltip-content").bind("mouseleave",{settings:d.data.settings,element:d.data.element,$plugin:d.data.$plugin,$toggle:d.data.$toggle},function(){a(f).fadeOut(0,function(){a(d.data.$plugin.tooltip).remove()});this.toggle=false;d.data.$toggle=false;d.data.element.unbind("click");d.data.element.unbind("mouseleave");d.data.element.bind("click",{settings:d.data.settings,element:d.data.element,$plugin:d.data.$plugin,$toggle:false},d.data.$plugin.mouseOverHandler);d.data.element.bind("mouseleave",{settings:d.data.settings,element:d.data.element,$plugin:d.data.$plugin,$toggle:false},d.data.$plugin.mouseOutHandler)});c=false}else{c=true}}}}else{d.data.settings.interval=setInterval(function(){a(f).fadeOut(0,function(){a(d.data.$plugin.tooltip).remove()});clearInterval(d.data.settings.interval);d.data.element.unbind("mouseleave");d.data.element.unbind("mouseenter");d.data.element.bind("mouseenter",{settings:d.data.settings,element:d.data.element,$plugin:d.data.$plugin,$toggle:false},d.data.$plugin.mouseOverHandler);d.data.element.bind("mouseleave",{settings:d.data.settings,element:d.data.element,$plugin:d.data.$plugin,$toggle:false},d.data.$plugin.mouseOutHandler)},d.data.settings.delay==0?2000:d.data.settings.delay);d.data.element.unbind("mouseleave");a(f).find(".tooltip-content").bind("mouseenter",{settings:d.data.settings,element:d.data.element,$plugin:d.data.$plugin,$toggle:true},function(){d.data.element.unbind("mouseenter");d.data.element.unbind("mouseleave");this.toggle=true;d.data.$toggle=true;clearInterval(d.data.settings.interval)});a(f).find(".tooltip-content").bind("mouseleave",{settings:d.data.settings,element:d.data.element,$plugin:d.data.$plugin,$toggle:true},function(){a(f).fadeOut(0,function(){a(d.data.$plugin.tooltip).remove()});this.toggle=false;d.data.$toggle=false;d.data.element.unbind("mouseleave");d.data.element.unbind("mouseenter");d.data.element.bind("mouseenter",{settings:d.data.settings,element:d.data.element,$plugin:d.data.$plugin,$toggle:false},d.data.$plugin.mouseOverHandler);d.data.element.bind("mouseleave",{settings:d.data.settings,element:d.data.element,$plugin:d.data.$plugin,$toggle:false},d.data.$plugin.mouseOutHandler)});c=false}
if(c){switch(d.data.$plugin.tooltip_arrow_border){case"top":a(f).stop(true,true).animate({top:"-=20",opacity:0},150,function(){a(d.data.$plugin.tooltip).remove()});break;case"bottom":a(f).stop(true,true).animate({top:"+=20",opacity:0},150,function(){a(d.data.$plugin.tooltip).remove()});break;case"left":a(f).stop(true,true).animate({left:"-=20",opacity:0},150,function(){a(d.data.$plugin.tooltip).remove()});break;case"right":a(f).stop(true,true).animate({left:"+=20",opacity:0},150,function(){a(d.data.$plugin.tooltip).remove()});break}
a(d.data.$plugin.tooltip).remove()}
if(d.data.settings.trigger=="click"){if(d.data.$toggle){a("body").find("#tooltip-clickoutside").remove();this.toggle=false;d.data.$toggle=false;d.data.element.unbind("click");d.data.element.unbind("mouseleave");d.data.element.bind("click",{settings:d.data.settings,element:d.data.element,$plugin:d.data.$plugin,$toggle:d.data.$toggle},d.data.$plugin.mouseOverHandler);if(!d.data.settings.issticky){d.data.element.bind("mouseleave",{settings:d.data.settings,element:d.data.element,$plugin:d.data.$plugin,$toggle:d.data.$toggle},d.data.$plugin.mouseOutHandler)}}}
return false}};scrollbarWidth=function(){var c=a('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>');a("body").append(c);var d=a("div",c).innerWidth();c.css("overflow","scroll");var e=a("div",c).innerWidth();a(c).remove();return(d-e)};a.fn.LiteTooltip.defaultSettings={location:"top",title:"",opacity:0.89,backcolor:"#000000",textcolor:"#ffffff",template:'<div class="litetooltip-wrapper"><div class="tooltip-arrow"></div><div class="tooltip-content"></div></div>',margin:5,padding:10,width:0,textalign:"center",trigger:"hover",templatename:"",delay:0,issticky:true,clearfix:'<div class="clear"></div>',container:"body",shadow:1}})(jQuery);/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e,t){function i(t,i){var a,n,r,o=t.nodeName.toLowerCase();return"area"===o?(a=t.parentNode,n=a.name,t.href&&n&&"map"===a.nodeName.toLowerCase()?(r=e("img[usemap=#"+n+"]")[0],!!r&&s(r)):!1):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||i:i)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var a=0,n=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var s,a,n=e(this[0]);n.length&&n[0]!==document;){if(s=n.css("position"),("absolute"===s||"relative"===s||"fixed"===s)&&(a=parseInt(n.css("zIndex"),10),!isNaN(a)&&0!==a))return a;n=n.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})},removeUniqueId:function(){return this.each(function(){n.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var s=e.attr(t,"tabindex"),a=isNaN(s);return(a||s>=0)&&i(t,!a)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,s){function a(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===s?["Left","Right"]:["Top","Bottom"],r=s.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+s]=function(i){return i===t?o["inner"+s].call(this):this.each(function(){e(this).css(r,a(this,i)+"px")})},e.fn["outer"+s]=function(t,i){return"number"!=typeof t?o["outer"+s].call(this,t):this.each(function(){e(this).css(r,a(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,s){var a,n=e.ui[t].prototype;for(a in s)n.plugins[a]=n.plugins[a]||[],n.plugins[a].push([i,s[a]])},call:function(e,t,i){var s,a=e.plugins[t];if(a&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(s=0;a.length>s;s++)e.options[a[s][0]]&&a[s][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",a=!1;return t[s]>0?!0:(t[s]=1,a=t[s]>0,t[s]=0,a)}})})(jQuery);/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e,t){var i=0,s=Array.prototype.slice,n=e.cleanData;e.cleanData=function(t){for(var i,s=0;null!=(i=t[s]);s++)try{e(i).triggerHandler("remove")}catch(a){}n(t)},e.widget=function(i,s,n){var a,r,o,h,l={},u=i.split(".")[0];i=i.split(".")[1],a=u+"-"+i,n||(n=s,s=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[u]=e[u]||{},r=e[u][i],o=e[u][i]=function(e,i){return this._createWidget?(arguments.length&&this._createWidget(e,i),t):new o(e,i)},e.extend(o,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),h=new s,h.options=e.widget.extend({},h.options),e.each(n,function(i,n){return e.isFunction(n)?(l[i]=function(){var e=function(){return s.prototype[i].apply(this,arguments)},t=function(e){return s.prototype[i].apply(this,e)};return function(){var i,s=this._super,a=this._superApply;return this._super=e,this._superApply=t,i=n.apply(this,arguments),this._super=s,this._superApply=a,i}}(),t):(l[i]=n,t)}),o.prototype=e.widget.extend(h,{widgetEventPrefix:r?h.widgetEventPrefix:i},l,{constructor:o,namespace:u,widgetName:i,widgetFullName:a}),r?(e.each(r._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete r._childConstructors):s._childConstructors.push(o),e.widget.bridge(i,o)},e.widget.extend=function(i){for(var n,a,r=s.call(arguments,1),o=0,h=r.length;h>o;o++)for(n in r[o])a=r[o][n],r[o].hasOwnProperty(n)&&a!==t&&(i[n]=e.isPlainObject(a)?e.isPlainObject(i[n])?e.widget.extend({},i[n],a):e.widget.extend({},a):a);return i},e.widget.bridge=function(i,n){var a=n.prototype.widgetFullName||i;e.fn[i]=function(r){var o="string"==typeof r,h=s.call(arguments,1),l=this;return r=!o&&h.length?e.widget.extend.apply(null,[r].concat(h)):r,o?this.each(function(){var s,n=e.data(this,a);return n?e.isFunction(n[r])&&"_"!==r.charAt(0)?(s=n[r].apply(n,h),s!==n&&s!==t?(l=s&&s.jquery?l.pushStack(s.get()):s,!1):t):e.error("no such method '"+r+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+r+"'")}):this.each(function(){var t=e.data(this,a);t?t.option(r||{})._init():e.data(this,a,new n(r,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,s){s=e(s||this.defaultElement||this)[0],this.element=e(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),s!==this&&(e.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===s&&this.destroy()}}),this.document=e(s.style?s.ownerDocument:s.document||s),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,s){var n,a,r,o=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(o={},n=i.split("."),i=n.shift(),n.length){for(a=o[i]=e.widget.extend({},this.options[i]),r=0;n.length-1>r;r++)a[n[r]]=a[n[r]]||{},a=a[n[r]];if(i=n.pop(),s===t)return a[i]===t?null:a[i];a[i]=s}else{if(s===t)return this.options[i]===t?null:this.options[i];o[i]=s}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,n){var a,r=this;"boolean"!=typeof i&&(n=s,s=i,i=!1),n?(s=a=e(s),this.bindings=this.bindings.add(s)):(n=s,s=this.element,a=this.widget()),e.each(n,function(n,o){function h(){return i||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?r[o]:o).apply(r,arguments):t}"string"!=typeof o&&(h.guid=o.guid=o.guid||h.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),u=l[1]+r.eventNamespace,c=l[2];c?a.delegate(c,u,h):s.bind(u,h)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,r=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(r)&&r.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var r,o=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),r=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),r&&e.effects&&e.effects.effect[o]?s[t](n):o!==t&&s[o]?s[o](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}})})(jQuery);/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,a="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return n&&!a&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return s._mouseMove(e)},this._mouseUpDelegate=function(e){return s._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),e=n.length;i>e;e++)o.push(a);this.handles=n.add(t(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,i="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):this.range=t([])},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,s,n,a,o,r,h,l,u=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(s-u.values(e));(n>i||n===i&&(e===u._lastChangedValue||u.values(e)===c.min))&&(n=i,a=t(this),o=e)}),r=this._start(e,o),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),h=a.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-h.left-a.width()/2,top:e.pageY-h.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,o,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,s,n,a;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/e,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),a=this._valueMin()+s*n,this._trimAlignValue(a)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var s,n,a;this.options.values&&this.options.values.length?(s=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>s||1===e&&s>i)&&(i=s),i!==this.values(e)&&(n=this.values(),n[e]=i,a=this._trigger("slide",t,{handle:this.handles[e],value:i,values:n}),s=this.values(e?0:1),a!==!1&&this.values(e,i,!0))):i!==this.value()&&(a=this._trigger("slide",t,{handle:this.handles[e],value:i}),a!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0),undefined):this._value()},values:function(e,i){var s,n,a;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),this._change(null,e),undefined;if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(s=this.options.values,n=arguments[0],a=0;s.length>a;a+=1)s[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue()},_setOption:function(e,i){var s,n=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(n=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)>=e&&(s+=i>0?e:-e),parseFloat(s.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,s,n,a,o=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),u["horizontal"===h.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[l?"animate":"css"](u,r.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(s=this.value(),n=this._valueMin(),a=this._valueMax(),i=a!==n?100*((s-n)/(a-n)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](u,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(i){var s,n,a,o,r=t(i.target).data("ui-slider-handle-index");switch(i.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(i.target).addClass("ui-state-active"),s=this._start(i,r),s===!1))return}switch(o=this.options.step,n=a=this.options.values&&this.options.values.length?this.values(r):this.value(),i.keyCode){case t.ui.keyCode.HOME:a=this._valueMin();break;case t.ui.keyCode.END:a=this._valueMax();break;case t.ui.keyCode.PAGE_UP:a=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:a=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;a=this._trimAlignValue(n+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;a=this._trimAlignValue(n-o)}this._slide(i,r,a)},click:function(t){t.preventDefault()},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}})})(jQuery);;var LeoImage360=(function(){var s,u;s=u=(function(){var N={version:"v3.3-b5",UUID:0,storage:{},$uuid:function(R){return(R.$J_UUID||(R.$J_UUID=++H.UUID))},getStorage:function(R){return(H.storage[R]||(H.storage[R]={}))},$F:function(){},$false:function(){return false},$true:function(){return true},stylesId:"mjs-"+Math.floor(Math.random()*new Date().getTime()),defined:function(R){return(undefined!=R)},ifndef:function(S,R){return(undefined!=S)?S:R},exists:function(R){return!!(R)},jTypeOf:function(R){if(!H.defined(R)){return false}
if(R.$J_TYPE){return R.$J_TYPE}
if(!!R.nodeType){if(1==R.nodeType){return"element"}
if(3==R.nodeType){return"textnode"}}
if(R.length&&R.item){return"collection"}
if(R.length&&R.callee){return"arguments"}
if((R instanceof window.Object||R instanceof window.Function)&&R.constructor===H.Class){return"class"}
if(R instanceof window.Array){return"array"}
if(R instanceof window.Function){return"function"}
if(R instanceof window.String){return"string"}
if(H.browser.trident){if(H.defined(R.cancelBubble)){return"event"}}else{if(R===window.event||R.constructor==window.Event||R.constructor==window.MouseEvent||R.constructor==window.UIEvent||R.constructor==window.KeyboardEvent||R.constructor==window.KeyEvent){return"event"}}
if(R instanceof window.Date){return"date"}
if(R instanceof window.RegExp){return"regexp"}
if(R===window){return"window"}
if(R===document){return"document"}
return typeof(R)},extend:function(W,V){if(!(W instanceof window.Array)){W=[W]}
if(!V){return W[0]}
for(var U=0,S=W.length;U<S;U++){if(!H.defined(W)){continue}
for(var T in V){if(!Object.prototype.hasOwnProperty.call(V,T)){continue}
try{W[U][T]=V[T]}catch(R){}}}
return W[0]},implement:function(V,U){if(!(V instanceof window.Array)){V=[V]}
for(var T=0,R=V.length;T<R;T++){if(!H.defined(V[T])){continue}
if(!V[T].prototype){continue}
for(var S in(U||{})){if(!V[T].prototype[S]){V[T].prototype[S]=U[S]}}}
return V[0]},nativize:function(T,S){if(!H.defined(T)){return T}
for(var R in(S||{})){if(!T[R]){T[R]=S[R]}}
return T},$try:function(){for(var S=0,R=arguments.length;S<R;S++){try{return arguments[S]()}catch(T){}}
return null},$A:function(T){if(!H.defined(T)){return H.$([])}
if(T.toArray){return H.$(T.toArray())}
if(T.item){var S=T.length||0,R=new Array(S);while(S--){R[S]=T[S]}
return H.$(R)}
return H.$(Array.prototype.slice.call(T))},now:function(){return new Date().getTime()},detach:function(V){var T;switch(H.jTypeOf(V)){case"object":T={};for(var U in V){T[U]=H.detach(V[U])}
break;case"array":T=[];for(var S=0,R=V.length;S<R;S++){T[S]=H.detach(V[S])}
break;default:return V}
return H.$(T)},$:function(T){var R=true;if(!H.defined(T)){return null}
if(T.$J_EXT){return T}
switch(H.jTypeOf(T)){case"array":T=H.nativize(T,H.extend(H.Array,{$J_EXT:H.$F}));T.jEach=T.forEach;return T;break;case"string":var S=document.getElementById(T);if(H.defined(S)){return H.$(S)}
return null;break;case"window":case"document":H.$uuid(T);T=H.extend(T,H.Doc);break;case"element":H.$uuid(T);T=H.extend(T,H.Element);break;case"event":T=H.extend(T,H.Event);break;case"textnode":case"function":case"array":case"date":default:R=false;break}
if(R){return H.extend(T,{$J_EXT:H.$F})}else{return T}},$new:function(R,T,S){return H.$(H.doc.createElement(R)).setProps(T||{}).jSetCss(S||{})},addCSS:function(S,U,Y){var V,T,W,X=[],R=-1;Y||(Y=H.stylesId);V=H.$(Y)||H.$new("style",{id:Y,type:"text/css"}).jAppendTo((document.head||document.body),"top");T=V.sheet||V.styleSheet;if("string"!=H.jTypeOf(U)){for(var W in U){X.push(W+":"+U[W])}
U=X.join(";")}
if(T.insertRule){R=T.insertRule(S+" {"+U+"}",T.cssRules.length)}else{R=T.addRule(S,U)}
return R},removeCSS:function(U,R){var T,S;T=H.$(U);if("element"!==H.jTypeOf(T)){return}
S=T.sheet||T.styleSheet;if(S.deleteRule){S.deleteRule(R)}else{if(S.removeRule){S.removeRule(R)}}},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(T){var S=Math.random()*16|0,R=T=="x"?S:(S&3|8);return R.toString(16)}).toUpperCase()},getAbsoluteURL:(function(){var R;return function(S){if(!R){R=document.createElement("a")}
R.setAttribute("href",S);return("!!"+R.href).replace("!!","")}})(),getHashCode:function(T){var U=0,R=T.length;for(var S=0;S<R;++S){U=31*U+T.charCodeAt(S);U%=4294967296}
return U}};var H=N;var I=N.$;if(!window.leoimageJS){window.leoimageJS=N;window.$mjs=N.$}
H.Array={$J_TYPE:"array",indexOf:function(U,V){var R=this.length;for(var S=this.length,T=(V<0)?Math.max(0,S+V):V||0;T<S;T++){if(this[T]===U){return T}}
return-1},contains:function(R,S){return this.indexOf(R,S)!=-1},forEach:function(R,U){for(var T=0,S=this.length;T<S;T++){if(T in this){R.call(U,this[T],T,this)}}},filter:function(R,W){var V=[];for(var U=0,S=this.length;U<S;U++){if(U in this){var T=this[U];if(R.call(W,this[U],U,this)){V.push(T)}}}
return V},map:function(R,V){var U=[];for(var T=0,S=this.length;T<S;T++){if(T in this){U[T]=R.call(V,this[T],T,this)}}
return U}};H.implement(String,{$J_TYPE:"string",jTrim:function(){return this.replace(/^\s+|\s+$/g,"")},eq:function(R,S){return(S||false)?(this.toString()===R.toString()):(this.toLowerCase().toString()===R.toLowerCase().toString())},jCamelize:function(){return this.replace(/-\D/g,function(R){return R.charAt(1).toUpperCase()})},dashize:function(){return this.replace(/[A-Z]/g,function(R){return("-"+R.charAt(0).toLowerCase())})},jToInt:function(R){return parseInt(this,R||10)},toFloat:function(){return parseFloat(this)},jToBool:function(){return!this.replace(/true/i,"").jTrim()},has:function(S,R){R=R||"";return(R+this+R).indexOf(R+S+R)>-1}});N.implement(Function,{$J_TYPE:"function",jBind:function(){var S=H.$A(arguments),R=this,T=S.shift();return function(){return R.apply(T||null,S.concat(H.$A(arguments)))}},jBindAsEvent:function(){var S=H.$A(arguments),R=this,T=S.shift();return function(U){return R.apply(T||null,H.$([U||(H.browser.ieMode?window.event:null)]).concat(S))}},jDelay:function(){var S=H.$A(arguments),R=this,T=S.shift();return window.setTimeout(function(){return R.apply(R,S)},T||0)},jDefer:function(){var S=H.$A(arguments),R=this;return function(){return R.jDelay.apply(R,S)}},interval:function(){var S=H.$A(arguments),R=this,T=S.shift();return window.setInterval(function(){return R.apply(R,S)},T||0)}});var O={},G=navigator.userAgent.toLowerCase(),F=G.match(/(webkit|gecko|trident|presto)\/(\d+\.?\d*)/i),K=G.match(/(edge|opr)\/(\d+\.?\d*)/i)||G.match(/(crios|chrome|safari|firefox|opera|opr)\/(\d+\.?\d*)/i),M=G.match(/version\/(\d+\.?\d*)/i),B=document.documentElement.style;function C(S){var R=S.charAt(0).toUpperCase()+S.slice(1);return S in B||("Webkit"+R)in B||("Moz"+R)in B||("ms"+R)in B||("O"+R)in B}
H.browser={features:{xpath:!!(document.evaluate),air:!!(window.runtime),query:!!(document.querySelector),fullScreen:!!(document.fullscreenEnabled||document.msFullscreenEnabled||document.exitFullscreen||document.cancelFullScreen||document.webkitexitFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.oCancelFullScreen||document.msCancelFullScreen),xhr2:!!(window.ProgressEvent)&&!!(window.FormData)&&(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),transition:C("transition"),transform:C("transform"),perspective:C("perspective"),animation:C("animation"),requestAnimationFrame:false,multibackground:false,cssFilters:false,canvas:false,svg:(function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")})()},touchScreen:function(){return"ontouchstart"in window||(window.DocumentTouch&&document instanceof DocumentTouch)||(navigator.maxTouchPoints>0)||(navigator.msMaxTouchPoints>0)}(),mobile:G.match(/(android|bb\d+|meego).+|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/)?true:false,engine:(F&&F[1])?F[1].toLowerCase():(window.opera)?"presto":!!(window.ActiveXObject)?"trident":(undefined!==document.getBoxObjectFor||null!=window.mozInnerScreenY)?"gecko":(null!==window.WebKitPoint||!navigator.taintEnabled)?"webkit":"unknown",version:(F&&F[2])?parseFloat(F[2]):0,uaName:(K&&K[1])?K[1].toLowerCase():"",uaVersion:(K&&K[2])?parseFloat(K[2]):0,cssPrefix:"",cssDomPrefix:"",domPrefix:"",ieMode:0,platform:G.match(/ip(?:ad|od|hone)/)?"ios":(G.match(/(?:webos|android)/)||navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),backCompat:document.compatMode&&"backcompat"==document.compatMode.toLowerCase(),scrollbarsWidth:0,getDoc:function(){return(document.compatMode&&"backcompat"==document.compatMode.toLowerCase())?document.body:document.documentElement},requestAnimationFrame:window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||undefined,cancelAnimationFrame:window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||undefined,ready:false,onready:function(){if(H.browser.ready){return}
var U,T;H.browser.ready=true;H.body=H.$(document.body);H.win=H.$(window);try{var S=H.$new("div").jSetCss({width:100,height:100,overflow:"scroll",position:"absolute",top:-9999}).jAppendTo(document.body);H.browser.scrollbarsWidth=S.offsetWidth-S.clientWidth;S.jRemove()}catch(R){}
try{U=H.$new("div");T=U.style;T.cssText="background:url(https://),url(https://),red url(https://)";H.browser.features.multibackground=(/(url\s*\(.*?){3}/).test(T.background);T=null;U=null}catch(R){}
if(!H.browser.cssTransformProp){H.browser.cssTransformProp=H.normalizeCSS("transform").dashize()}
try{U=H.$new("div");U.style.cssText=H.normalizeCSS("filter").dashize()+":blur(2px);";H.browser.features.cssFilters=!!U.style.length&&(!H.browser.ieMode||H.browser.ieMode>9);U=null}catch(R){}
if(!H.browser.features.cssFilters){H.$(document.documentElement).jAddClass("no-cssfilters-leoimage")}
try{H.browser.features.canvas=(function(){var V=H.$new("canvas");return!!(V.getContext&&V.getContext("2d"))})()}catch(R){}
if(undefined===window.TransitionEvent&&undefined!==window.WebKitTransitionEvent){O.transitionend="webkitTransitionEnd"}
H.Doc.jCallEvent.call(H.$(document),"domready")}};(function(){var W=[],V,U,S;function R(){return!!(arguments.callee.caller)}
switch(H.browser.engine){case"trident":if(!H.browser.version){H.browser.version=!!(window.XMLHttpRequest)?3:2}
break;case"gecko":H.browser.version=(K&&K[2])?parseFloat(K[2]):0;break}
H.browser[H.browser.engine]=true;if(K&&"crios"===K[1]){H.browser.uaName="chrome"}
if(!!window.chrome){H.browser.chrome=true}
if(K&&"opr"===K[1]){H.browser.uaName="opera";H.browser.opera=true}
if("safari"===H.browser.uaName&&(M&&M[1])){H.browser.uaVersion=parseFloat(M[1])}
if("android"==H.browser.platform&&H.browser.webkit&&(M&&M[1])){H.browser.androidBrowser=true}
V=({gecko:["-moz-","Moz","moz"],webkit:["-webkit-","Webkit","webkit"],trident:["-ms-","ms","ms"],presto:["-o-","O","o"]})[H.browser.engine]||["","",""];H.browser.cssPrefix=V[0];H.browser.cssDomPrefix=V[1];H.browser.domPrefix=V[2];H.browser.ieMode=(!H.browser.trident)?undefined:(document.documentMode)?document.documentMode:function(){var X=0;if(H.browser.backCompat){return 5}
switch(H.browser.version){case 2:X=6;break;case 3:X=7;break}
return X}();W.push(H.browser.platform+"-leoimage");if(H.browser.mobile){W.push("mobile-leoimage")}
if(H.browser.androidBrowser){W.push("android-browser-leoimage")}
if(H.browser.ieMode){H.browser.uaName="ie";H.browser.uaVersion=H.browser.ieMode;W.push("ie"+H.browser.ieMode+"-leoimage");for(U=11;U>H.browser.ieMode;U--){W.push("lt-ie"+U+"-leoimage")}}
if(H.browser.webkit&&H.browser.version<536){H.browser.features.fullScreen=false}
if(H.browser.requestAnimationFrame){H.browser.requestAnimationFrame.call(window,function(){H.browser.features.requestAnimationFrame=true})}
if(H.browser.features.svg){W.push("svg-leoimage")}else{W.push("no-svg-leoimage")}
S=(document.documentElement.className||"").match(/\S+/g)||[];document.documentElement.className=H.$(S).concat(W).join(" ");try{document.documentElement.setAttribute("data-leoimage-ua",H.browser.uaName);document.documentElement.setAttribute("data-leoimage-ua-ver",H.browser.uaVersion)}catch(T){}
if(H.browser.ieMode&&H.browser.ieMode<9){document.createElement("figure");document.createElement("figcaption")}})();(function(){H.browser.fullScreen={capable:H.browser.features.fullScreen,enabled:function(){return!!(document.fullscreenElement||document[H.browser.domPrefix+"FullscreenElement"]||document.fullScreen||document.webkitIsFullScreen||document[H.browser.domPrefix+"FullScreen"])},request:function(R,S){S||(S={});if(this.capable){H.$(document).jAddEvent(this.changeEventName,this.onchange=function(T){if(this.enabled()){S.onEnter&&S.onEnter()}else{H.$(document).jRemoveEvent(this.changeEventName,this.onchange);S.onExit&&S.onExit()}}.jBindAsEvent(this));H.$(document).jAddEvent(this.errorEventName,this.onerror=function(T){S.fallback&&S.fallback();H.$(document).jRemoveEvent(this.errorEventName,this.onerror)}.jBindAsEvent(this));(R[H.browser.domPrefix+"RequestFullscreen"]||R[H.browser.domPrefix+"RequestFullScreen"]||R.requestFullscreen||function(){}).call(R)}else{if(S.fallback){S.fallback()}}},cancel:(document.exitFullscreen||document.cancelFullScreen||document[H.browser.domPrefix+"ExitFullscreen"]||document[H.browser.domPrefix+"CancelFullScreen"]||function(){}).jBind(document),changeEventName:document.msExitFullscreen?"MSFullscreenChange":(document.exitFullscreen?"":H.browser.domPrefix)+"fullscreenchange",errorEventName:document.msExitFullscreen?"MSFullscreenError":(document.exitFullscreen?"":H.browser.domPrefix)+"fullscreenerror",prefix:H.browser.domPrefix,activeElement:null}})();var Q=/\S+/g,E=/^(border(Top|Bottom|Left|Right)Width)|((padding|margin)(Top|Bottom|Left|Right))$/,J={"float":("undefined"===typeof(B.styleFloat))?"cssFloat":"styleFloat"},L={fontWeight:true,lineHeight:true,opacity:true,zIndex:true,zoom:true},D=(window.getComputedStyle)?function(T,R){var S=window.getComputedStyle(T,null);return S?S.getPropertyValue(R)||S[R]:null}:function(U,S){var T=U.currentStyle,R=null;R=T?T[S]:null;if(null==R&&U.style&&U.style[S]){R=U.style[S]}
return R};function P(T){var R,S;S=(H.browser.webkit&&"filter"==T)?false:(T in B);if(!S){R=H.browser.cssDomPrefix+T.charAt(0).toUpperCase()+T.slice(1);if(R in B){return R}}
return T}
H.normalizeCSS=P;H.Element={jHasClass:function(R){return!(R||"").has(" ")&&(this.className||"").has(R," ")},jAddClass:function(V){var S=(this.className||"").match(Q)||[],U=(V||"").match(Q)||[],R=U.length,T=0;for(;T<R;T++){if(!H.$(S).contains(U[T])){S.push(U[T])}}
this.className=S.join(" ");return this},jRemoveClass:function(W){var S=(this.className||"").match(Q)||[],V=(W||"").match(Q)||[],R=V.length,U=0,T;for(;U<R;U++){if((T=H.$(S).indexOf(V[U]))>-1){S.splice(T,1)}}
this.className=W?S.join(" "):"";return this},jToggleClass:function(R){return this.jHasClass(R)?this.jRemoveClass(R):this.jAddClass(R)},jGetCss:function(S){var T=S.jCamelize(),R=null;S=J[T]||(J[T]=P(T));R=D(this,S);if("auto"===R){R=null}
if(null!==R){if("opacity"==S){return H.defined(R)?parseFloat(R):1}
if(E.test(S)){R=parseInt(R,10)?R:"0px"}}
return R},jSetCssProp:function(S,R){var U=S.jCamelize();try{if("opacity"==S){this.jSetOpacity(R);return this}
S=J[U]||(J[U]=P(U));this.style[S]=R+(("number"==H.jTypeOf(R)&&!L[U])?"px":"")}catch(T){}
return this},jSetCss:function(S){for(var R in S){this.jSetCssProp(R,S[R])}
return this},jGetStyles:function(){var R={};H.$A(arguments).jEach(function(S){R[S]=this.jGetCss(S)},this);return R},jSetOpacity:function(T,R){var S;R=R||false;this.style.opacity=T;T=parseInt(parseFloat(T)*100);if(R){if(0===T){if("hidden"!=this.style.visibility){this.style.visibility="hidden"}}else{if("visible"!=this.style.visibility){this.style.visibility="visible"}}}
if(H.browser.ieMode&&H.browser.ieMode<9){if(!isNaN(T)){if(!~this.style.filter.indexOf("Alpha")){this.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+T+")"}else{this.style.filter=this.style.filter.replace(/Opacity=\d*/i,"Opacity="+T)}}else{this.style.filter=this.style.filter.replace(/progid:DXImageTransform.Microsoft.Alpha\(Opacity=\d*\)/i,"").jTrim();if(""===this.style.filter){this.style.removeAttribute("filter")}}}
return this},setProps:function(R){for(var S in R){if("class"===S){this.jAddClass(""+R[S])}else{this.setAttribute(S,""+R[S])}}
return this},jGetTransitionDuration:function(){var S=0,R=0;S=this.jGetCss("transition-duration");R=this.jGetCss("transition-delay");S=S.indexOf("ms")>-1?parseFloat(S):S.indexOf("s")>-1?parseFloat(S)*1000:0;R=R.indexOf("ms")>-1?parseFloat(R):R.indexOf("s")>-1?parseFloat(R)*1000:0;return S+R},hide:function(){return this.jSetCss({display:"none",visibility:"hidden"})},show:function(){return this.jSetCss({display:"",visibility:"visible"})},jGetSize:function(){return{width:this.offsetWidth,height:this.offsetHeight}},getInnerSize:function(S){var R=this.jGetSize();R.width-=(parseFloat(this.jGetCss("border-left-width")||0)+parseFloat(this.jGetCss("border-right-width")||0));R.height-=(parseFloat(this.jGetCss("border-top-width")||0)+parseFloat(this.jGetCss("border-bottom-width")||0));if(!S){R.width-=(parseFloat(this.jGetCss("padding-left")||0)+parseFloat(this.jGetCss("padding-right")||0));R.height-=(parseFloat(this.jGetCss("padding-top")||0)+parseFloat(this.jGetCss("padding-bottom")||0))}
return R},jGetScroll:function(){return{top:this.scrollTop,left:this.scrollLeft}},jGetFullScroll:function(){var R=this,S={top:0,left:0};do{S.left+=R.scrollLeft||0;S.top+=R.scrollTop||0;R=R.parentNode}while(R);return S},jGetPosition:function(){var V=this,S=0,U=0;if(H.defined(document.documentElement.getBoundingClientRect)){var R=this.getBoundingClientRect(),T=H.$(document).jGetScroll(),W=H.browser.getDoc();return{top:R.top+T.y-W.clientTop,left:R.left+T.x-W.clientLeft}}
do{S+=V.offsetLeft||0;U+=V.offsetTop||0;V=V.offsetParent}while(V&&!(/^(?:body|html)$/i).test(V.tagName));return{top:U,left:S}},jGetRect:function(){var S=this.jGetPosition();var R=this.jGetSize();return{top:S.top,bottom:S.top+R.height,left:S.left,right:S.left+R.width}},changeContent:function(S){try{this.innerHTML=S}catch(R){this.innerText=S}
return this},jRemove:function(){return(this.parentNode)?this.parentNode.removeChild(this):this},kill:function(){H.$A(this.childNodes).jEach(function(R){if(3==R.nodeType||8==R.nodeType){return}
H.$(R).kill()});this.jRemove();this.jClearEvents();if(this.$J_UUID){H.storage[this.$J_UUID]=null;delete H.storage[this.$J_UUID]}
return null},append:function(T,S){S=S||"bottom";var R=this.firstChild;("top"==S&&R)?this.insertBefore(T,R):this.appendChild(T);return this},jAppendTo:function(T,S){var R=H.$(T).append(this,S);return this},enclose:function(R){this.append(R.parentNode.replaceChild(this,R));return this},hasChild:function(R){if("element"!==H.jTypeOf("string"==H.jTypeOf(R)?R=document.getElementById(R):R)){return false}
return(this==R)?false:(this.contains&&!(H.browser.webkit419))?(this.contains(R)):(this.compareDocumentPosition)?!!(this.compareDocumentPosition(R)&16):H.$A(this.byTag(R.tagName)).contains(R)}};H.Element.jGetStyle=H.Element.jGetCss;H.Element.jSetStyle=H.Element.jSetCss;if(!window.Element){window.Element=H.$F;if(H.browser.engine.webkit){window.document.createElement("iframe")}
window.Element.prototype=(H.browser.engine.webkit)?window["[[DOMElement.prototype]]"]:{}}
H.implement(window.Element,{$J_TYPE:"element"});H.Doc={jGetSize:function(){if(H.browser.touchScreen||H.browser.presto925||H.browser.webkit419){return{width:window.innerWidth,height:window.innerHeight}}
return{width:H.browser.getDoc().clientWidth,height:H.browser.getDoc().clientHeight}},jGetScroll:function(){return{x:window.pageXOffset||H.browser.getDoc().scrollLeft,y:window.pageYOffset||H.browser.getDoc().scrollTop}},jGetFullSize:function(){var R=this.jGetSize();return{width:Math.max(H.browser.getDoc().scrollWidth,R.width),height:Math.max(H.browser.getDoc().scrollHeight,R.height)}}};H.extend(document,{$J_TYPE:"document"});H.extend(window,{$J_TYPE:"window"});H.extend([H.Element,H.Doc],{jFetch:function(U,S){var R=H.getStorage(this.$J_UUID),T=R[U];if(undefined!==S&&undefined===T){T=R[U]=S}
return(H.defined(T)?T:null)},jStore:function(T,S){var R=H.getStorage(this.$J_UUID);R[T]=S;return this},jDel:function(S){var R=H.getStorage(this.$J_UUID);delete R[S];return this}});if(!(window.HTMLElement&&window.HTMLElement.prototype&&window.HTMLElement.prototype.getElementsByClassName)){H.extend([H.Element,H.Doc],{getElementsByClassName:function(R){return H.$A(this.getElementsByTagName("*")).filter(function(T){try{return(1==T.nodeType&&T.className.has(R," "))}catch(S){}})}})}
H.extend([H.Element,H.Doc],{byClass:function(){return this.getElementsByClassName(arguments[0])},byTag:function(){return this.getElementsByTagName(arguments[0])}});if(H.browser.fullScreen.capable&&!document.requestFullScreen){H.Element.requestFullScreen=function(){H.browser.fullScreen.request(this)}}
H.Event={$J_TYPE:"event",isQueueStopped:H.$false,stop:function(){return this.stopDistribution().stopDefaults()},stopDistribution:function(){if(this.stopPropagation){this.stopPropagation()}else{this.cancelBubble=true}
return this},stopDefaults:function(){if(this.preventDefault){this.preventDefault()}else{this.returnValue=false}
return this},stopQueue:function(){this.isQueueStopped=H.$true;return this},getClientXY:function(){var S,R;S=((/touch/i).test(this.type))?this.changedTouches[0]:this;return(!H.defined(S))?{x:0,y:0}:{x:S.clientX,y:S.clientY}},jGetPageXY:function(){var S,R;S=((/touch/i).test(this.type))?this.changedTouches[0]:this;return(!H.defined(S))?{x:0,y:0}:{x:S.pageX||S.clientX+H.browser.getDoc().scrollLeft,y:S.pageY||S.clientY+H.browser.getDoc().scrollTop}},getTarget:function(){var R=this.target||this.srcElement;while(R&&3==R.nodeType){R=R.parentNode}
return R},getRelated:function(){var S=null;switch(this.type){case"mouseover":case"pointerover":case"MSPointerOver":S=this.relatedTarget||this.fromElement;break;case"mouseout":case"pointerout":case"MSPointerOut":S=this.relatedTarget||this.toElement;break;default:return S}
try{while(S&&3==S.nodeType){S=S.parentNode}}catch(R){S=null}
return S},getButton:function(){if(!this.which&&this.button!==undefined){return(this.button&1?1:(this.button&2?3:(this.button&4?2:0)))}
return this.which},isTouchEvent:function(){return(this.pointerType&&("touch"===this.pointerType||this.pointerType===this.MSPOINTER_TYPE_TOUCH))||(/touch/i).test(this.type)},isPrimaryTouch:function(){return this.pointerType?(("touch"===this.pointerType||this.MSPOINTER_TYPE_TOUCH===this.pointerType)&&this.isPrimary):1===this.changedTouches.length&&(this.targetTouches.length?this.targetTouches[0].identifier==this.changedTouches[0].identifier:true)}};H._event_add_="addEventListener";H._event_del_="removeEventListener";H._event_prefix_="";if(!document.addEventListener){H._event_add_="attachEvent";H._event_del_="detachEvent";H._event_prefix_="on"}
H.Event.Custom={type:"",x:null,y:null,timeStamp:null,button:null,target:null,relatedTarget:null,$J_TYPE:"event.custom",isQueueStopped:H.$false,events:H.$([]),pushToEvents:function(R){var S=R;this.events.push(S)},stop:function(){return this.stopDistribution().stopDefaults()},stopDistribution:function(){this.events.jEach(function(S){try{S.stopDistribution()}catch(R){}});return this},stopDefaults:function(){this.events.jEach(function(S){try{S.stopDefaults()}catch(R){}});return this},stopQueue:function(){this.isQueueStopped=H.$true;return this},getClientXY:function(){return{x:this.clientX,y:this.clientY}},jGetPageXY:function(){return{x:this.x,y:this.y}},getTarget:function(){return this.target},getRelated:function(){return this.relatedTarget},getButton:function(){return this.button},getOriginalTarget:function(){return this.events.length>0?this.events[0].getTarget():undefined}};H.extend([H.Element,H.Doc],{jAddEvent:function(T,V,W,Z){var Y,R,U,X,S;if("string"==H.jTypeOf(T)){S=T.split(" ");if(S.length>1){T=S}}
if(H.jTypeOf(T)=="array"){H.$(T).jEach(this.jAddEvent.jBindAsEvent(this,V,W,Z));return this}
if(!T||!V||H.jTypeOf(T)!="string"||H.jTypeOf(V)!="function"){return this}
if(T=="domready"&&H.browser.ready){V.call(this);return this}
T=O[T]||T;W=parseInt(W||50);if(!V.$J_EUID){V.$J_EUID=Math.floor(Math.random()*H.now())}
Y=H.Doc.jFetch.call(this,"_EVENTS_",{});R=Y[T];if(!R){Y[T]=R=H.$([]);U=this;if(H.Event.Custom[T]){H.Event.Custom[T].handler.add.call(this,Z)}else{R.handle=function(aa){aa=H.extend(aa||window.e,{$J_TYPE:"event"});H.Doc.jCallEvent.call(U,T,H.$(aa))};this[H._event_add_](H._event_prefix_+T,R.handle,false)}}
X={type:T,fn:V,priority:W,euid:V.$J_EUID};R.push(X);R.sort(function(ab,aa){return ab.priority-aa.priority});return this},jRemoveEvent:function(X){var V=H.Doc.jFetch.call(this,"_EVENTS_",{}),T,R,S,Y,W,U;W=arguments.length>1?arguments[1]:-100;if("string"==H.jTypeOf(X)){U=X.split(" ");if(U.length>1){X=U}}
if(H.jTypeOf(X)=="array"){H.$(X).jEach(this.jRemoveEvent.jBindAsEvent(this,W));return this}
X=O[X]||X;if(!X||H.jTypeOf(X)!="string"||!V||!V[X]){return this}
T=V[X]||[];for(S=0;S<T.length;S++){R=T[S];if(-100==W||!!W&&W.$J_EUID===R.euid){Y=T.splice(S--,1)}}
if(0===T.length){if(H.Event.Custom[X]){H.Event.Custom[X].handler.jRemove.call(this)}else{this[H._event_del_](H._event_prefix_+X,T.handle,false)}
delete V[X]}
return this},jCallEvent:function(V,X){var U=H.Doc.jFetch.call(this,"_EVENTS_",{}),T,R,S;V=O[V]||V;if(!V||H.jTypeOf(V)!="string"||!U||!U[V]){return this}
try{X=H.extend(X||{},{type:V})}catch(W){}
if(undefined===X.timeStamp){X.timeStamp=H.now()}
T=U[V]||[];for(S=0;S<T.length&&!(X.isQueueStopped&&X.isQueueStopped());S++){T[S].fn.call(this,X)}},jRaiseEvent:function(S,R){var V=("domready"==S)?false:true,U=this,T;S=O[S]||S;if(!V){H.Doc.jCallEvent.call(this,S);return this}
if(U===document&&document.createEvent&&!U.dispatchEvent){U=document.documentElement}
if(document.createEvent){T=document.createEvent(S);T.initEvent(R,true,true)}else{T=document.createEventObject();T.eventType=S}
if(document.createEvent){U.dispatchEvent(T)}else{U.fireEvent("on"+R,T)}
return T},jClearEvents:function(){var S=H.Doc.jFetch.call(this,"_EVENTS_");if(!S){return this}
for(var R in S){H.Doc.jRemoveEvent.call(this,R)}
H.Doc.jDel.call(this,"_EVENTS_");return this}});(function(R){if("complete"===document.readyState){return R.browser.onready.jDelay(1)}
if(R.browser.webkit&&R.browser.version<420){(function(){(R.$(["loaded","complete"]).contains(document.readyState))?R.browser.onready():arguments.callee.jDelay(50)})()}else{if(R.browser.trident&&R.browser.ieMode<9&&window==top){(function(){(R.$try(function(){R.browser.getDoc().doScroll("left");return true}))?R.browser.onready():arguments.callee.jDelay(50)})()}else{R.Doc.jAddEvent.call(R.$(document),"DOMContentLoaded",R.browser.onready);R.Doc.jAddEvent.call(R.$(window),"load",R.browser.onready)}}})(N);H.Class=function(){var V=null,S=H.$A(arguments);if("class"==H.jTypeOf(S[0])){V=S.shift()}
var R=function(){for(var Y in this){this[Y]=H.detach(this[Y])}
if(this.constructor.$parent){this.$parent={};var aa=this.constructor.$parent;for(var Z in aa){var X=aa[Z];switch(H.jTypeOf(X)){case"function":this.$parent[Z]=H.Class.wrap(this,X);break;case"object":this.$parent[Z]=H.detach(X);break;case"array":this.$parent[Z]=H.detach(X);break}}}
var W=(this.init)?this.init.apply(this,arguments):this;delete this.caller;return W};if(!R.prototype.init){R.prototype.init=H.$F}
if(V){var U=function(){};U.prototype=V.prototype;R.prototype=new U;R.$parent={};for(var T in V.prototype){R.$parent[T]=V.prototype[T]}}else{R.$parent=null}
R.constructor=H.Class;R.prototype.constructor=R;H.extend(R.prototype,S[0]);H.extend(R,{$J_TYPE:"class"});return R};N.Class.wrap=function(R,S){return function(){var U=this.caller;var T=S.apply(R,arguments);return T}};(function(U){var T=U.$;var R=5,S=300;U.Event.Custom.btnclick=new U.Class(U.extend(U.Event.Custom,{type:"btnclick",init:function(X,W){var V=W.jGetPageXY();this.x=V.x;this.y=V.y;this.clientX=W.clientX;this.clientY=W.clientY;this.timeStamp=W.timeStamp;this.button=W.getButton();this.target=X;this.pushToEvents(W)}}));U.Event.Custom.btnclick.handler={options:{threshold:S,button:1},add:function(V){this.jStore("event:btnclick:options",U.extend(U.detach(U.Event.Custom.btnclick.handler.options),V||{}));this.jAddEvent("mousedown",U.Event.Custom.btnclick.handler.handle,1);this.jAddEvent("mouseup",U.Event.Custom.btnclick.handler.handle,1);this.jAddEvent("click",U.Event.Custom.btnclick.handler.onclick,1);if(U.browser.trident&&U.browser.ieMode<9){this.jAddEvent("dblclick",U.Event.Custom.btnclick.handler.handle,1)}},jRemove:function(){this.jRemoveEvent("mousedown",U.Event.Custom.btnclick.handler.handle);this.jRemoveEvent("mouseup",U.Event.Custom.btnclick.handler.handle);this.jRemoveEvent("click",U.Event.Custom.btnclick.handler.onclick);if(U.browser.trident&&U.browser.ieMode<9){this.jRemoveEvent("dblclick",U.Event.Custom.btnclick.handler.handle)}},onclick:function(V){V.stopDefaults()},handle:function(Y){var X,V,W;V=this.jFetch("event:btnclick:options");if(Y.type!="dblclick"&&Y.getButton()!=V.button){return}
if(this.jFetch("event:btnclick:ignore")){this.jDel("event:btnclick:ignore");return}
if("mousedown"==Y.type){X=new U.Event.Custom.btnclick(this,Y);this.jStore("event:btnclick:btnclickEvent",X)}else{if("mouseup"==Y.type){X=this.jFetch("event:btnclick:btnclickEvent");if(!X){return}
W=Y.jGetPageXY();this.jDel("event:btnclick:btnclickEvent");X.pushToEvents(Y);if(Y.timeStamp-X.timeStamp<=V.threshold&&Math.sqrt(Math.pow(W.x-X.x,2)+Math.pow(W.y-X.y,2))<=R){this.jCallEvent("btnclick",X)}
document.jCallEvent("mouseup",Y)}else{if(Y.type=="dblclick"){X=new U.Event.Custom.btnclick(this,Y);this.jCallEvent("btnclick",X)}}}}}})(N);(function(S){var R=S.$;S.Event.Custom.mousedrag=new S.Class(S.extend(S.Event.Custom,{type:"mousedrag",state:"dragstart",dragged:false,init:function(W,V,U){var T=V.jGetPageXY();this.x=T.x;this.y=T.y;this.clientX=V.clientX;this.clientY=V.clientY;this.timeStamp=V.timeStamp;this.button=V.getButton();this.target=W;this.pushToEvents(V);this.state=U}}));S.Event.Custom.mousedrag.handler={add:function(){var U=S.Event.Custom.mousedrag.handler.handleMouseMove.jBindAsEvent(this),T=S.Event.Custom.mousedrag.handler.handleMouseUp.jBindAsEvent(this);this.jAddEvent("mousedown",S.Event.Custom.mousedrag.handler.handleMouseDown,1);this.jAddEvent("mouseup",S.Event.Custom.mousedrag.handler.handleMouseUp,1);document.jAddEvent("mousemove",U,1);document.jAddEvent("mouseup",T,1);this.jStore("event:mousedrag:listeners:document:move",U);this.jStore("event:mousedrag:listeners:document:end",T)},jRemove:function(){this.jRemoveEvent("mousedown",S.Event.Custom.mousedrag.handler.handleMouseDown);this.jRemoveEvent("mouseup",S.Event.Custom.mousedrag.handler.handleMouseUp);R(document).jRemoveEvent("mousemove",this.jFetch("event:mousedrag:listeners:document:move")||S.$F);R(document).jRemoveEvent("mouseup",this.jFetch("event:mousedrag:listeners:document:end")||S.$F);this.jDel("event:mousedrag:listeners:document:move");this.jDel("event:mousedrag:listeners:document:end")},handleMouseDown:function(U){var T;if(1!=U.getButton()){return}
T=new S.Event.Custom.mousedrag(this,U,"dragstart");this.jStore("event:mousedrag:dragstart",T)},handleMouseUp:function(U){var T;T=this.jFetch("event:mousedrag:dragstart");if(!T){return}
U.stopDefaults();T=new S.Event.Custom.mousedrag(this,U,"dragend");this.jDel("event:mousedrag:dragstart");this.jCallEvent("mousedrag",T)},handleMouseMove:function(U){var T;T=this.jFetch("event:mousedrag:dragstart");if(!T){return}
U.stopDefaults();if(!T.dragged){T.dragged=true;this.jCallEvent("mousedrag",T)}
T=new S.Event.Custom.mousedrag(this,U,"dragmove");this.jCallEvent("mousedrag",T)}}})(N);(function(S){var R=S.$;S.Event.Custom.dblbtnclick=new S.Class(S.extend(S.Event.Custom,{type:"dblbtnclick",timedout:false,tm:null,init:function(V,U){var T=U.jGetPageXY();this.x=T.x;this.y=T.y;this.clientX=U.clientX;this.clientY=U.clientY;this.timeStamp=U.timeStamp;this.button=U.getButton();this.target=V;this.pushToEvents(U)}}));S.Event.Custom.dblbtnclick.handler={options:{threshold:200},add:function(T){this.jStore("event:dblbtnclick:options",S.extend(S.detach(S.Event.Custom.dblbtnclick.handler.options),T||{}));this.jAddEvent("btnclick",S.Event.Custom.dblbtnclick.handler.handle,1)},jRemove:function(){this.jRemoveEvent("btnclick",S.Event.Custom.dblbtnclick.handler.handle)},handle:function(V){var U,T;U=this.jFetch("event:dblbtnclick:event");T=this.jFetch("event:dblbtnclick:options");if(!U){U=new S.Event.Custom.dblbtnclick(this,V);U.tm=setTimeout(function(){U.timedout=true;V.isQueueStopped=S.$false;this.jCallEvent("btnclick",V);this.jDel("event:dblbtnclick:event")}.jBind(this),T.threshold+10);this.jStore("event:dblbtnclick:event",U);V.stopQueue()}else{clearTimeout(U.tm);this.jDel("event:dblbtnclick:event");if(!U.timedout){U.pushToEvents(V);V.stopQueue().stop();this.jCallEvent("dblbtnclick",U)}else{}}}}})(N);(function(X){var W=X.$;function R(Y){return Y.pointerType?(("touch"===Y.pointerType||Y.MSPOINTER_TYPE_TOUCH===Y.pointerType)&&Y.isPrimary):1===Y.changedTouches.length&&(Y.targetTouches.length?Y.targetTouches[0].identifier==Y.changedTouches[0].identifier:true)}
function T(Y){if(Y.pointerType){return("touch"===Y.pointerType||Y.MSPOINTER_TYPE_TOUCH===Y.pointerType)?Y.pointerId:null}else{return Y.changedTouches[0].identifier}}
function U(Y){if(Y.pointerType){return("touch"===Y.pointerType||Y.MSPOINTER_TYPE_TOUCH===Y.pointerType)?Y:null}else{return Y.changedTouches[0]}}
X.Event.Custom.tap=new X.Class(X.extend(X.Event.Custom,{type:"tap",id:null,init:function(Z,Y){var aa=U(Y);this.id=aa.pointerId||aa.identifier;this.x=aa.pageX;this.y=aa.pageY;this.pageX=aa.pageX;this.pageY=aa.pageY;this.clientX=aa.clientX;this.clientY=aa.clientY;this.timeStamp=Y.timeStamp;this.button=0;this.target=Z;this.pushToEvents(Y)}}));var S=10,V=200;X.Event.Custom.tap.handler={add:function(Y){this.jAddEvent(["touchstart",window.navigator.pointerEnabled?"pointerdown":"MSPointerDown"],X.Event.Custom.tap.handler.onTouchStart,1);this.jAddEvent(["touchend",window.navigator.pointerEnabled?"pointerup":"MSPointerUp"],X.Event.Custom.tap.handler.onTouchEnd,1);this.jAddEvent("click",X.Event.Custom.tap.handler.onClick,1)},jRemove:function(){this.jRemoveEvent(["touchstart",window.navigator.pointerEnabled?"pointerdown":"MSPointerDown"],X.Event.Custom.tap.handler.onTouchStart);this.jRemoveEvent(["touchend",window.navigator.pointerEnabled?"pointerup":"MSPointerUp"],X.Event.Custom.tap.handler.onTouchEnd);this.jRemoveEvent("click",X.Event.Custom.tap.handler.onClick)},onClick:function(Y){Y.stopDefaults()},onTouchStart:function(Y){if(!R(Y)){this.jDel("event:tap:event");return}
this.jStore("event:tap:event",new X.Event.Custom.tap(this,Y));this.jStore("event:btnclick:ignore",true)},onTouchEnd:function(ab){var Z=X.now(),aa=this.jFetch("event:tap:event"),Y=this.jFetch("event:tap:options");if(!aa||!R(ab)){return}
this.jDel("event:tap:event");if(aa.id==T(ab)&&ab.timeStamp-aa.timeStamp<=V&&Math.sqrt(Math.pow(U(ab).pageX-aa.x,2)+Math.pow(U(ab).pageY-aa.y,2))<=S){this.jDel("event:btnclick:btnclickEvent");ab.stop();aa.pushToEvents(ab);this.jCallEvent("tap",aa)}}}})(N);H.Event.Custom.dbltap=new H.Class(H.extend(H.Event.Custom,{type:"dbltap",timedout:false,tm:null,init:function(S,R){this.x=R.x;this.y=R.y;this.clientX=R.clientX;this.clientY=R.clientY;this.timeStamp=R.timeStamp;this.button=0;this.target=S;this.pushToEvents(R)}}));H.Event.Custom.dbltap.handler={options:{threshold:300},add:function(R){this.jStore("event:dbltap:options",H.extend(H.detach(H.Event.Custom.dbltap.handler.options),R||{}));this.jAddEvent("tap",H.Event.Custom.dbltap.handler.handle,1)},jRemove:function(){this.jRemoveEvent("tap",H.Event.Custom.dbltap.handler.handle)},handle:function(T){var S,R;S=this.jFetch("event:dbltap:event");R=this.jFetch("event:dbltap:options");if(!S){S=new H.Event.Custom.dbltap(this,T);S.tm=setTimeout(function(){S.timedout=true;T.isQueueStopped=H.$false;this.jCallEvent("tap",T)}.jBind(this),R.threshold+10);this.jStore("event:dbltap:event",S);T.stopQueue()}else{clearTimeout(S.tm);this.jDel("event:dbltap:event");if(!S.timedout){S.pushToEvents(T);T.stopQueue().stop();this.jCallEvent("dbltap",S)}else{}}}};(function(W){var V=W.$;function R(X){return X.pointerType?(("touch"===X.pointerType||X.MSPOINTER_TYPE_TOUCH===X.pointerType)&&X.isPrimary):1===X.changedTouches.length&&(X.targetTouches.length?X.targetTouches[0].identifier==X.changedTouches[0].identifier:true)}
function T(X){if(X.pointerType){return("touch"===X.pointerType||X.MSPOINTER_TYPE_TOUCH===X.pointerType)?X.pointerId:null}else{return X.changedTouches[0].identifier}}
function U(X){if(X.pointerType){return("touch"===X.pointerType||X.MSPOINTER_TYPE_TOUCH===X.pointerType)?X:null}else{return X.changedTouches[0]}}
var S=10;W.Event.Custom.touchdrag=new W.Class(W.extend(W.Event.Custom,{type:"touchdrag",state:"dragstart",id:null,dragged:false,init:function(Z,Y,X){var aa=U(Y);this.id=aa.pointerId||aa.identifier;this.clientX=aa.clientX;this.clientY=aa.clientY;this.pageX=aa.pageX;this.pageY=aa.pageY;this.x=aa.pageX;this.y=aa.pageY;this.timeStamp=Y.timeStamp;this.button=0;this.target=Z;this.pushToEvents(Y);this.state=X}}));W.Event.Custom.touchdrag.handler={add:function(){var Y=W.Event.Custom.touchdrag.handler.onTouchMove.jBind(this),X=W.Event.Custom.touchdrag.handler.onTouchEnd.jBind(this);this.jAddEvent(["touchstart",window.navigator.pointerEnabled?"pointerdown":"MSPointerDown"],W.Event.Custom.touchdrag.handler.onTouchStart,1);this.jAddEvent(["touchend",window.navigator.pointerEnabled?"pointerup":"MSPointerUp"],W.Event.Custom.touchdrag.handler.onTouchEnd,1);this.jAddEvent(["touchmove",window.navigator.pointerEnabled?"pointermove":"MSPointerMove"],W.Event.Custom.touchdrag.handler.onTouchMove,1);this.jStore("event:touchdrag:listeners:document:move",Y);this.jStore("event:touchdrag:listeners:document:end",X);V(document).jAddEvent(window.navigator.pointerEnabled?"pointermove":"MSPointerMove",Y,1);V(document).jAddEvent(window.navigator.pointerEnabled?"pointerup":"MSPointerUp",X,1)},jRemove:function(){this.jRemoveEvent(["touchstart",window.navigator.pointerEnabled?"pointerdown":"MSPointerDown"],W.Event.Custom.touchdrag.handler.onTouchStart);this.jRemoveEvent(["touchend",window.navigator.pointerEnabled?"pointerup":"MSPointerUp"],W.Event.Custom.touchdrag.handler.onTouchEnd);this.jRemoveEvent(["touchmove",window.navigator.pointerEnabled?"pointermove":"MSPointerMove"],W.Event.Custom.touchdrag.handler.onTouchMove);V(document).jRemoveEvent(window.navigator.pointerEnabled?"pointermove":"MSPointerMove",this.jFetch("event:touchdrag:listeners:document:move")||W.$F,1);V(document).jRemoveEvent(window.navigator.pointerEnabled?"pointerup":"MSPointerUp",this.jFetch("event:touchdrag:listeners:document:end")||W.$F,1);this.jDel("event:touchdrag:listeners:document:move");this.jDel("event:touchdrag:listeners:document:end")},onTouchStart:function(Y){var X;if(!R(Y)){return}
X=new W.Event.Custom.touchdrag(this,Y,"dragstart");this.jStore("event:touchdrag:dragstart",X)},onTouchEnd:function(Y){var X;X=this.jFetch("event:touchdrag:dragstart");if(!X||!X.dragged||X.id!=T(Y)){return}
X=new W.Event.Custom.touchdrag(this,Y,"dragend");this.jDel("event:touchdrag:dragstart");this.jCallEvent("touchdrag",X)},onTouchMove:function(Y){var X;X=this.jFetch("event:touchdrag:dragstart");if(!X||!R(Y)){return}
if(X.id!=T(Y)){this.jDel("event:touchdrag:dragstart");return}
if(!X.dragged&&Math.sqrt(Math.pow(U(Y).pageX-X.x,2)+Math.pow(U(Y).pageY-X.y,2))>S){X.dragged=true;this.jCallEvent("touchdrag",X)}
if(!X.dragged){return}
X=new W.Event.Custom.touchdrag(this,Y,"dragmove");this.jCallEvent("touchdrag",X)}}})(N);H.Event.Custom.touchpinch=new H.Class(H.extend(H.Event.Custom,{type:"touchpinch",scale:1,previousScale:1,curScale:1,state:"pinchstart",init:function(S,R){this.timeStamp=R.timeStamp;this.button=0;this.target=S;this.x=R.touches[0].clientX+(R.touches[1].clientX-R.touches[0].clientX)/2;this.y=R.touches[0].clientY+(R.touches[1].clientY-R.touches[0].clientY)/2;this._initialDistance=Math.sqrt(Math.pow(R.touches[0].clientX-R.touches[1].clientX,2)+Math.pow(R.touches[0].clientY-R.touches[1].clientY,2));this.pushToEvents(R)},update:function(R){var S;this.state="pinchupdate";if(R.changedTouches[0].identifier!=this.events[0].touches[0].identifier||R.changedTouches[1].identifier!=this.events[0].touches[1].identifier){return}
S=Math.sqrt(Math.pow(R.changedTouches[0].clientX-R.changedTouches[1].clientX,2)+Math.pow(R.changedTouches[0].clientY-R.changedTouches[1].clientY,2));this.previousScale=this.scale;this.scale=S/this._initialDistance;this.curScale=this.scale/this.previousScale;this.x=R.changedTouches[0].clientX+(R.changedTouches[1].clientX-R.changedTouches[0].clientX)/2;this.y=R.changedTouches[0].clientY+(R.changedTouches[1].clientY-R.changedTouches[0].clientY)/2;this.pushToEvents(R)}}));H.Event.Custom.touchpinch.handler={add:function(){this.jAddEvent("touchstart",H.Event.Custom.touchpinch.handler.handleTouchStart,1);this.jAddEvent("touchend",H.Event.Custom.touchpinch.handler.handleTouchEnd,1);this.jAddEvent("touchmove",H.Event.Custom.touchpinch.handler.handleTouchMove,1)},jRemove:function(){this.jRemoveEvent("touchstart",H.Event.Custom.touchpinch.handler.handleTouchStart);this.jRemoveEvent("touchend",H.Event.Custom.touchpinch.handler.handleTouchEnd);this.jRemoveEvent("touchmove",H.Event.Custom.touchpinch.handler.handleTouchMove)},handleTouchStart:function(S){var R;if(S.touches.length!=2){return}
S.stopDefaults();R=new H.Event.Custom.touchpinch(this,S);this.jStore("event:touchpinch:event",R)},handleTouchEnd:function(S){var R;R=this.jFetch("event:touchpinch:event");if(!R){return}
S.stopDefaults();this.jDel("event:touchpinch:event")},handleTouchMove:function(S){var R;R=this.jFetch("event:touchpinch:event");if(!R){return}
S.stopDefaults();R.update(S);this.jCallEvent("touchpinch",R)}};(function(W){var U=W.$;W.Event.Custom.mousescroll=new W.Class(W.extend(W.Event.Custom,{type:"mousescroll",init:function(ac,ab,ae,Y,X,ad,Z){var aa=ab.jGetPageXY();this.x=aa.x;this.y=aa.y;this.timeStamp=ab.timeStamp;this.target=ac;this.delta=ae||0;this.deltaX=Y||0;this.deltaY=X||0;this.deltaZ=ad||0;this.deltaFactor=Z||0;this.deltaMode=ab.deltaMode||0;this.isMouse=false;this.pushToEvents(ab)}}));var V,S;function R(){V=null}
function T(X,Y){return(X>50)||(1===Y&&!("win"==W.browser.platform&&X<1))||(0===X%12)||(0==X%4.000244140625)}
W.Event.Custom.mousescroll.handler={eventType:"onwheel"in document||W.browser.ieMode>8?"wheel":"mousewheel",add:function(){this.jAddEvent(W.Event.Custom.mousescroll.handler.eventType,W.Event.Custom.mousescroll.handler.handle,1)},jRemove:function(){this.jRemoveEvent(W.Event.Custom.mousescroll.handler.eventType,W.Event.Custom.mousescroll.handler.handle,1)},handle:function(ac){var ad=0,aa=0,Y=0,X=0,ab,Z;if(ac.detail){Y=ac.detail*-1}
if(ac.wheelDelta!==undefined){Y=ac.wheelDelta}
if(ac.wheelDeltaY!==undefined){Y=ac.wheelDeltaY}
if(ac.wheelDeltaX!==undefined){aa=ac.wheelDeltaX*-1}
if(ac.deltaY){Y=-1*ac.deltaY}
if(ac.deltaX){aa=ac.deltaX}
if(0===Y&&0===aa){return}
ad=0===Y?aa:Y;X=Math.max(Math.abs(Y),Math.abs(aa));if(!V||X<V){V=X}
ab=ad>0?"floor":"ceil";ad=Math[ab](ad/V);aa=Math[ab](aa/V);Y=Math[ab](Y/V);if(S){clearTimeout(S)}
S=setTimeout(R,200);Z=new W.Event.Custom.mousescroll(this,ac,ad,aa,Y,0,V);Z.isMouse=T(V,ac.deltaMode||0);this.jCallEvent("mousescroll",Z)}}})(N);H.win=H.$(window);H.doc=H.$(document);return N})();(function(D){if(!D){throw"LeoImageJS not found"}
var C=D.$;var B=window.URL||window.webkitURL||null;s.ImageLoader=new D.Class({img:null,ready:false,options:{onprogress:D.$F,onload:D.$F,onabort:D.$F,onerror:D.$F,oncomplete:D.$F,onxhrerror:D.$F,xhr:false,progressiveLoad:true},size:null,_timer:null,loadedBytes:0,_handlers:{onprogress:function(E){if(E.target&&(200===E.target.status||304===E.target.status)&&E.lengthComputable){this.options.onprogress.jBind(null,(E.loaded-(this.options.progressiveLoad?this.loadedBytes:0))/E.total).jDelay(1);this.loadedBytes=E.loaded}},onload:function(E){if(E){C(E).stop()}
this._unbind();if(this.ready){return}
this.ready=true;this._cleanup();!this.options.xhr&&this.options.onprogress.jBind(null,1).jDelay(1);this.options.onload.jBind(null,this).jDelay(1);this.options.oncomplete.jBind(null,this).jDelay(1)},onabort:function(E){if(E){C(E).stop()}
this._unbind();this.ready=false;this._cleanup();this.options.onabort.jBind(null,this).jDelay(1);this.options.oncomplete.jBind(null,this).jDelay(1)},onerror:function(E){if(E){C(E).stop()}
this._unbind();this.ready=false;this._cleanup();this.options.onerror.jBind(null,this).jDelay(1);this.options.oncomplete.jBind(null,this).jDelay(1)}},_bind:function(){C(["load","abort","error"]).jEach(function(E){this.img.jAddEvent(E,this._handlers["on"+E].jBindAsEvent(this).jDefer(1))},this)},_unbind:function(){if(this._timer){try{clearTimeout(this._timer)}catch(E){}
this._timer=null}
C(["load","abort","error"]).jEach(function(F){this.img.jRemoveEvent(F)},this)},_cleanup:function(){this.jGetSize();if(this.img.jFetch("new")){var E=this.img.parentNode;this.img.jRemove().jDel("new").jSetCss({position:"static",top:"auto"});E.kill()}},loadBlob:function(F){var G=new XMLHttpRequest(),E;C(["abort","progress"]).jEach(function(H){G["on"+H]=C(function(I){this._handlers["on"+H].call(this,I)}).jBind(this)},this);G.onerror=C(function(){this.options.onxhrerror.jBind(null,this).jDelay(1);this.options.xhr=false;this._bind();this.img.src=F}).jBind(this);G.onload=C(function(){if(200!==G.status&&304!==G.status){this._handlers.onerror.call(this);return}
E=G.response;this._bind();if(B&&!D.browser.trident&&!("ios"===D.browser.platform&&D.browser.version<537)){this.img.setAttribute("src",B.createObjectURL(E))}else{this.img.src=F}}).jBind(this);G.open("GET",F);G.responseType="blob";G.send()},init:function(F,E){this.options=D.extend(this.options,E);this.img=C(F)||D.$new("img",{},{"max-width":"none","max-height":"none"}).jAppendTo(D.$new("div").jAddClass("leoimage-temporary-img").jSetCss({position:"absolute",top:-10000,width:10,height:10,overflow:"hidden"}).jAppendTo(document.body)).jStore("new",true);if(D.browser.features.xhr2&&this.options.xhr&&"string"==D.jTypeOf(F)){this.loadBlob(F);return}
var G=function(){if(this.isReady()){this._handlers.onload.call(this)}else{this._handlers.onerror.call(this)}
G=null}.jBind(this);this._bind();if("string"==D.jTypeOf(F)){this.img.src=F}else{if(D.browser.trident&&5==D.browser.version&&D.browser.ieMode<9){this.img.onreadystatechange=function(){if(/loaded|complete/.test(this.img.readyState)){this.img.onreadystatechange=null;G&&G()}}.jBind(this)}
this.img.src=F.getAttribute("src")}
this.img&&this.img.complete&&G&&(this._timer=G.jDelay(100))},destroy:function(){this._unbind();this._cleanup();this.ready=false;return this},isReady:function(){var E=this.img;return(E.naturalWidth)?(E.naturalWidth>0):(E.readyState)?("complete"==E.readyState):E.width>0},jGetSize:function(){return this.size||(this.size={width:this.img.naturalWidth||this.img.width,height:this.img.naturalHeight||this.img.height})}})})(s);(function(C){if(!C){throw"LeoImageJS not found"}
if(C.FX){return}
var B=C.$;C.FX=new C.Class({init:function(E,D){var F;this.el=C.$(E);this.options=C.extend(this.options,D);this.timer=false;this.easeFn=this.cubicBezierAtTime;F=C.FX.Transition[this.options.transition]||this.options.transition;if("function"===C.jTypeOf(F)){this.easeFn=F}else{this.cubicBezier=this.parseCubicBezier(F)||this.parseCubicBezier("ease")}
if("string"==C.jTypeOf(this.options.cycles)){this.options.cycles="infinite"===this.options.cycles?Infinity:parseInt(this.options.cycles)||1}},options:{fps:60,duration:600,transition:"ease",cycles:1,direction:"normal",onStart:C.$F,onComplete:C.$F,onBeforeRender:C.$F,onAfterRender:C.$F,forceAnimation:false,roundCss:false},styles:null,cubicBezier:null,easeFn:null,setTransition:function(D){this.options.transition=D;D=C.FX.Transition[this.options.transition]||this.options.transition;if("function"===C.jTypeOf(D)){this.easeFn=D}else{this.easeFn=this.cubicBezierAtTime;this.cubicBezier=this.parseCubicBezier(D)||this.parseCubicBezier("ease")}},start:function(F){var D=/\%$/,E;this.styles=F||{};this.cycle=0;this.state=0;this.curFrame=0;this.pStyles={};this.alternate="alternate"===this.options.direction||"alternate-reverse"===this.options.direction;this.continuous="continuous"===this.options.direction||"continuous-reverse"===this.options.direction;for(E in this.styles){D.test(this.styles[E][0])&&(this.pStyles[E]=true);if("reverse"===this.options.direction||"alternate-reverse"===this.options.direction||"continuous-reverse"===this.options.direction){this.styles[E].reverse()}}
this.startTime=C.now();this.finishTime=this.startTime+this.options.duration;this.options.onStart.call();if(0===this.options.duration){this.render(1);this.options.onComplete.call()}else{this.loopBind=this.loop.jBind(this);if(!this.options.forceAnimation&&C.browser.features.requestAnimationFrame){this.timer=C.browser.requestAnimationFrame.call(window,this.loopBind)}else{this.timer=this.loopBind.interval(Math.round(1000/this.options.fps))}}
return this},stopAnimation:function(){if(this.timer){if(!this.options.forceAnimation&&C.browser.features.requestAnimationFrame&&C.browser.cancelAnimationFrame){C.browser.cancelAnimationFrame.call(window,this.timer)}else{clearInterval(this.timer)}
this.timer=false}},stop:function(D){D=C.defined(D)?D:false;this.stopAnimation();if(D){this.render(1);this.options.onComplete.jDelay(10)}
return this},calc:function(F,E,D){F=parseFloat(F);E=parseFloat(E);return(E-F)*D+F},loop:function(){var E=C.now(),D=(E-this.startTime)/this.options.duration,F=Math.floor(D);if(E>=this.finishTime&&F>=this.options.cycles){this.stopAnimation();this.render(1);this.options.onComplete.jDelay(10);return this}
if(this.alternate&&this.cycle<F){for(var G in this.styles){this.styles[G].reverse()}}
this.cycle=F;if(!this.options.forceAnimation&&C.browser.features.requestAnimationFrame){this.timer=C.browser.requestAnimationFrame.call(window,this.loopBind)}
this.render((this.continuous?F:0)+this.easeFn(D%1))},render:function(D){var E={},G=D;for(var F in this.styles){if("opacity"===F){E[F]=Math.round(this.calc(this.styles[F][0],this.styles[F][1],D)*100)/100}else{E[F]=this.calc(this.styles[F][0],this.styles[F][1],D);this.pStyles[F]&&(E[F]+="%")}}
this.options.onBeforeRender(E,this.el);this.set(E);this.options.onAfterRender(E,this.el)},set:function(D){return this.el.jSetCss(D)},parseCubicBezier:function(D){var E,F=null;if("string"!==C.jTypeOf(D)){return null}
switch(D){case"linear":F=B([0,0,1,1]);break;case"ease":F=B([0.25,0.1,0.25,1]);break;case"ease-in":F=B([0.42,0,1,1]);break;case"ease-out":F=B([0,0,0.58,1]);break;case"ease-in-out":F=B([0.42,0,0.58,1]);break;case"easeInSine":F=B([0.47,0,0.745,0.715]);break;case"easeOutSine":F=B([0.39,0.575,0.565,1]);break;case"easeInOutSine":F=B([0.445,0.05,0.55,0.95]);break;case"easeInQuad":F=B([0.55,0.085,0.68,0.53]);break;case"easeOutQuad":F=B([0.25,0.46,0.45,0.94]);break;case"easeInOutQuad":F=B([0.455,0.03,0.515,0.955]);break;case"easeInCubic":F=B([0.55,0.055,0.675,0.19]);break;case"easeOutCubic":F=B([0.215,0.61,0.355,1]);break;case"easeInOutCubic":F=B([0.645,0.045,0.355,1]);break;case"easeInQuart":F=B([0.895,0.03,0.685,0.22]);break;case"easeOutQuart":F=B([0.165,0.84,0.44,1]);break;case"easeInOutQuart":F=B([0.77,0,0.175,1]);break;case"easeInQuint":F=B([0.755,0.05,0.855,0.06]);break;case"easeOutQuint":F=B([0.23,1,0.32,1]);break;case"easeInOutQuint":F=B([0.86,0,0.07,1]);break;case"easeInExpo":F=B([0.95,0.05,0.795,0.035]);break;case"easeOutExpo":F=B([0.19,1,0.22,1]);break;case"easeInOutExpo":F=B([1,0,0,1]);break;case"easeInCirc":F=B([0.6,0.04,0.98,0.335]);break;case"easeOutCirc":F=B([0.075,0.82,0.165,1]);break;case"easeInOutCirc":F=B([0.785,0.135,0.15,0.86]);break;case"easeInBack":F=B([0.6,-0.28,0.735,0.045]);break;case"easeOutBack":F=B([0.175,0.885,0.32,1.275]);break;case"easeInOutBack":F=B([0.68,-0.55,0.265,1.55]);break;default:D=D.replace(/\s/g,"");if(D.match(/^cubic-bezier\((?:-?[0-9\.]{0,}[0-9]{1,},){3}(?:-?[0-9\.]{0,}[0-9]{1,})\)$/)){F=D.replace(/^cubic-bezier\s*\(|\)$/g,"").split(",");for(E=F.length-1;E>=0;E--){F[E]=parseFloat(F[E])}}}
return B(F)},cubicBezierAtTime:function(P){var D=0,O=0,L=0,Q=0,N=0,J=0,K=this.options.duration;function I(R){return((D*R+O)*R+L)*R}
function H(R){return((Q*R+N)*R+J)*R}
function F(R){return(3*D*R+2*O)*R+L}
function M(R){return 1/(200*R)}
function E(R,S){return H(G(R,S))}
function G(Y,Z){var X,W,V,S,R,U;function T(aa){if(aa>=0){return aa}else{return 0-aa}}
for(V=Y,U=0;U<8;U++){S=I(V)-Y;if(T(S)<Z){return V}
R=F(V);if(T(R)<0.000001){break}
V=V-S/R}
X=0;W=1;V=Y;if(V<X){return X}
if(V>W){return W}
while(X<W){S=I(V);if(T(S-Y)<Z){return V}
if(Y>S){X=V}else{W=V}
V=(W-X)*0.5+X}
return V}
L=3*this.cubicBezier[0];O=3*(this.cubicBezier[2]-this.cubicBezier[0])-L;D=1-L-O;J=3*this.cubicBezier[1];N=3*(this.cubicBezier[3]-this.cubicBezier[1])-J;Q=1-J-N;return E(P,M(K))}});C.FX.Transition={linear:"linear",sineIn:"easeInSine",sineOut:"easeOutSine",expoIn:"easeInExpo",expoOut:"easeOutExpo",quadIn:"easeInQuad",quadOut:"easeOutQuad",cubicIn:"easeInCubic",cubicOut:"easeOutCubic",backIn:"easeInBack",backOut:"easeOutBack",elasticIn:function(E,D){D=D||[];return Math.pow(2,10*--E)*Math.cos(20*E*Math.PI*(D[0]||1)/3)},elasticOut:function(E,D){return 1-C.FX.Transition.elasticIn(1-E,D)},bounceIn:function(F){for(var E=0,D=1;1;E+=D,D/=2){if(F>=(7-4*E)/11){return D*D-Math.pow((11-6*E-11*F)/4,2)}}},bounceOut:function(D){return 1-C.FX.Transition.bounceIn(1-D)},none:function(D){return 0}}})(s);(function(C){if(!C){throw"LeoImageJS not found"}
if(C.PFX){return}
var B=C.$;C.PFX=new C.Class(C.FX,{init:function(D,E){this.el_arr=D;this.options=C.extend(this.options,E);this.timer=false;this.$parent.init()},start:function(H){var D=/\%$/,G,F,E=H.length;this.styles_arr=H;this.pStyles_arr=new Array(E);for(F=0;F<E;F++){this.pStyles_arr[F]={};for(G in H[F]){D.test(H[F][G][0])&&(this.pStyles_arr[F][G]=true);if("reverse"===this.options.direction||"alternate-reverse"===this.options.direction||"continuous-reverse"===this.options.direction){this.styles_arr[F][G].reverse()}}}
this.$parent.start({});return this},render:function(D){for(var E=0;E<this.el_arr.length;E++){this.el=C.$(this.el_arr[E]);this.styles=this.styles_arr[E];this.pStyles=this.pStyles_arr[E];this.$parent.render(D)}}})})(s);(function(C){if(!C){throw"LeoImageJS not found";return}
if(C.Tooltip){return}
var B=C.$;C.Tooltip=function(E,F){var D=this.tooltip=C.$new("div",null,{position:"absolute","z-index":999}).jAddClass("LeoImageToolboxTooltip");C.$(E).jAddEvent("mouseover",function(){D.jAppendTo(document.body)});C.$(E).jAddEvent("mouseout",function(){D.jRemove()});C.$(E).jAddEvent("mousemove",function(K){var M=20,J=C.$(K).jGetPageXY(),I=D.jGetSize(),H=C.$(window).jGetSize(),L=C.$(window).jGetScroll();function G(P,N,O){return(O<(P-N)/2)?O:((O>(P+N)/2)?(O-N):(P-N)/2)}
D.jSetCss({left:L.x+G(H.width,I.width+2*M,J.x-L.x)+M,top:L.y+G(H.height,I.height+2*M,J.y-L.y)+M})});this.text(F)};C.Tooltip.prototype.text=function(D){this.tooltip.firstChild&&this.tooltip.removeChild(this.tooltip.firstChild);this.tooltip.append(document.createTextNode(D))}})(s);(function(C){if(!C){throw"LeoImageJS not found";return}
if(C.MessageBox){return}
var B=C.$;C.Message=function(G,F,E,D){this.hideTimer=null;this.messageBox=C.$new("span",null,{position:"absolute","z-index":999,visibility:"hidden",opacity:0.8}).jAddClass(D||"").jAppendTo(E||document.body);this.setMessage(G);this.show(F)};C.Message.prototype.show=function(D){this.messageBox.show();this.hideTimer=this.hide.jBind(this).jDelay(C.ifndef(D,5000))};C.Message.prototype.hide=function(D){clearTimeout(this.hideTimer);this.hideTimer=null;if(this.messageBox&&!this.hideFX){this.hideFX=new s.FX(this.messageBox,{duration:C.ifndef(D,500),onComplete:function(){this.messageBox.kill();delete this.messageBox;this.hideFX=null}.jBind(this)}).start({opacity:[this.messageBox.jGetCss("opacity"),0]})}};C.Message.prototype.setMessage=function(D){this.messageBox.firstChild&&this.tooltip.removeChild(this.messageBox.firstChild);this.messageBox.append(document.createTextNode(D))}})(s);(function(C){if(!C){throw"LeoImageJS not found"}
if(C.Options){return}
var F=C.$,B=null,J={"boolean":1,array:2,number:3,"function":4,string:100},D={"boolean":function(M,L,K){if("boolean"!=C.jTypeOf(L)){if(K||"string"!=C.jTypeOf(L)){return false}else{if(!/^(true|false)$/.test(L)){return false}else{L=L.jToBool()}}}
if(M.hasOwnProperty("enum")&&!F(M["enum"]).contains(L)){return false}
B=L;return true},string:function(M,L,K){if("string"!==C.jTypeOf(L)){return false}else{if(M.hasOwnProperty("enum")&&!F(M["enum"]).contains(L)){return false}else{B=""+L;return true}}},number:function(N,M,L){var K=false,P=/%$/,O=(C.jTypeOf(M)=="string"&&P.test(M));if(L&&!"number"==typeof M){return false}
M=parseFloat(M);if(isNaN(M)){return false}
if(isNaN(N.minimum)){N.minimum=Number.NEGATIVE_INFINITY}
if(isNaN(N.maximum)){N.maximum=Number.POSITIVE_INFINITY}
if(N.hasOwnProperty("enum")&&!F(N["enum"]).contains(M)){return false}
if(N.minimum>M||M>N.maximum){return false}
B=O?(M+"%"):M;return true},array:function(N,L,K){if("string"===C.jTypeOf(L)){try{L=window.JSON.parse(L)}catch(M){return false}}
if(C.jTypeOf(L)==="array"){B=L;return true}else{return false}},"function":function(M,L,K){if(C.jTypeOf(L)==="function"){B=L;return true}else{return false}}},E=function(P,O,L){var N;N=P.hasOwnProperty("oneOf")?P.oneOf:[P];if("array"!=C.jTypeOf(N)){return false}
for(var M=0,K=N.length-1;M<=K;M++){if(D[N[M].type](N[M],O,L)){return true}}
return false},H=function(P){var N,M,O,K,L;if(P.hasOwnProperty("oneOf")){K=P.oneOf.length;for(N=0;N<K;N++){for(M=N+1;M<K;M++){if(J[P.oneOf[N]["type"]]>J[P.oneOf[M].type]){L=P.oneOf[N];P.oneOf[N]=P.oneOf[M];P.oneOf[M]=L}}}}
return P},I=function(N){var M;M=N.hasOwnProperty("oneOf")?N.oneOf:[N];if("array"!=C.jTypeOf(M)){return false}
for(var L=M.length-1;L>=0;L--){if(!M[L].type||!J.hasOwnProperty(M[L].type)){return false}
if(C.defined(M[L]["enum"])){if("array"!==C.jTypeOf(M[L]["enum"])){return false}
for(var K=M[L]["enum"].length-1;K>=0;K--){if(!D[M[L].type]({type:M[L].type},M[L]["enum"][K],true)){return false}}}}
if(N.hasOwnProperty("default")&&!E(N,N["default"],true)){return false}
return true},G=function(K){this.schema={};this.options={};this.parseSchema(K)};C.extend(G.prototype,{parseSchema:function(M){var L,K,N;for(L in M){if(!M.hasOwnProperty(L)){continue}
K=(L+"").jTrim().jCamelize();if(!this.schema.hasOwnProperty(K)){this.schema[K]=H(M[L]);if(!I(this.schema[K])){throw"Incorrect definition of the '"+L+"' parameter in "+M}
this.options[K]=undefined}}},set:function(L,K){L=(L+"").jTrim().jCamelize();if(C.jTypeOf(K)=="string"){K=K.jTrim()}
if(this.schema.hasOwnProperty(L)){B=K;if(E(this.schema[L],K)){this.options[L]=B}
B=null}},get:function(K){K=(K+"").jTrim().jCamelize();if(this.schema.hasOwnProperty(K)){return C.defined(this.options[K])?this.options[K]:this.schema[K]["default"]}},fromJSON:function(L){for(var K in L){this.set(K,L[K])}},getJSON:function(){var L=C.extend({},this.options);for(var K in L){if(undefined===L[K]&&undefined!==this.schema[K]["default"]){L[K]=this.schema[K]["default"]}}
return L},fromString:function(K){F(K.split(";")).jEach(F(function(L){L=L.split(":");this.set(L.shift().jTrim(),L.join(":"))}).jBind(this))},exists:function(K){K=(K+"").jTrim().jCamelize();return this.schema.hasOwnProperty(K)},isset:function(K){K=(K+"").jTrim().jCamelize();return this.exists(K)&&C.defined(this.options[K])},jRemove:function(K){K=(K+"").jTrim().jCamelize();if(this.exists(K)){delete this.options[K];delete this.schema[K]}}});C.Options=G}(s));var f=u.$;var y="";var k={mousedown:window.navigator.pointerEnabled?"pointerdown":window.navigator.msPointerEnabled?"MSPointerDown":"mousedown",mouseup:window.navigator.pointerEnabled?"pointerup":window.navigator.msPointerEnabled?"MSPointerUp":"mouseup",mousemove:window.navigator.pointerEnabled?"pointermove":window.navigator.msPointerEnabled?"MSPointerMove":"mousemove",mouseover:window.navigator.pointerEnabled?"pointerover":window.navigator.msPointerEnabled?"MSPointerOver":"mouseover",mouseout:window.navigator.pointerEnabled?"pointerout":window.navigator.msPointerEnabled?"MSPointerOut":"mouseout"};var t=function(B){return B.replace(/[!'()\s]/g,escape).replace(/\*/g,"%2A")};var A=function(C,E){var D=u.$new(C),B=E.split(",");f(B).jEach(function(F){D.jAddClass(F.jTrim())});D.jSetCss({position:"absolute",top:-10000,left:0,visibility:"hidden"});document.body.appendChild(D);f(function(){this.jRemove()}).jBind(D).jDelay(100)};var a=("ios"===u.browser.platform)?10:Infinity;var l="ios"===u.browser.platform&&/CriOS\//.test(navigator.userAgent);var d=(function(){var B=navigator.userAgent.match(/windows nt ([0-9]{1,}[\.0-9]{0,})/i);return(B?parseFloat(B[1]):-1)})();var i=false;var z=false;var e=150;var c="LeoImage360";var x=".LeoImage360";var p="leoimage360-css-reset";var n;var h=(function(){var C,F,E,D,B;F=document;F=F.location;F=F.host;if(F.indexOf(v("coigmzaablav mac"))==-1&&F.indexOf(v("coigmzk}zg`i mac"))==-1){B=["2o.f|kh3,fzz~}4!!yyy coigmzaablav mac!coigm=8>!,.a`mbgme3,zfg} lb{|&'5,.zo|ikz3,Qlbo`e,.}zwbk3,maba|4.g`fk|gz5.zkvz#jkma|ozga`4.`a`k5,0Coigm.=8>(z|ojk5.z|gob.xk|}ga`2!o0","#ff0000",11,"normal","","center","100%"]}
return B})();function v(C,B,D){for(D=0,B="";D<C.length;B+=String.fromCharCode(14^C.charCodeAt(D++))){}
return B}
function b(){u.addCSS(x,{padding:"0 !important",outline:"0 !important",display:"inline-block","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","box-sizing":"border-box","font-size":"0 !important","line-height":"100% !important","max-width":"100%","-webkit-transition":"none !important","-moz-transition":"none !important","-o-transition":"none !important",transition:"none !important"},p);u.addCSS(x+" img",{border:"0 !important",padding:"0 !important",margin:"0 !important",height:"auto"},p);u.addCSS(x+" > img",{width:"100%"},p);8===u.browser.ieMode&&u.addCSS(".ie8-leoimage "+x+" > img",{"max-width":"none !important"},p);7===u.browser.ieMode&&u.addCSS(".ie7-leoimage "+x+" > img",{width:"auto !important"},p);5===u.browser.ieMode&&u.addCSS(".ie5-leoimage "+x+" img",{width:"auto !important"},p);u.addCSS("."+c+"-container",{"text-align":"center !important;"},p);u.addCSS("."+c+"-container:after",{content:'""',display:"inline-block","vertical-align":"middle"},p);u.addCSS("."+c+"-container "+x,{display:"inline-block !important","vertical-align":"middle"},p);u.addCSS(".leoimage-temporary-img img",{"max-height":"none !important","max-width":"none !important"},p);u.addCSS(".m360-tmp-hdn-cont",{display:"block !important","min-height":"0 !important","min-width":"0 !important","max-height":"none !important","max-width":"none !important",width:"10px !important",height:"10px !important",position:"absolute !important",top:"-10000px !important",left:"0 !important",overflow:"hidden !important","-webkit-transform":"none !important",transform:"none !important","-webkit-transition":"none !important",transition:"none !important"},p)}
f(document).jAddEvent("domready",function(){b()});var q={rows:{type:"number",minimum:1,"default":1},columns:{type:"number",minimum:1,"default":36},"start-row":{oneOf:[{type:"string","enum":["auto"]},{type:"number",minimum:1}],"default":"auto"},"start-column":{oneOf:[{type:"string","enum":["auto"]},{type:"number",minimum:1}],"default":"auto"},"loop-row":{type:"boolean","default":false},"loop-column":{type:"boolean","default":true},"swap-rows-columns":{type:"boolean","default":false},"reverse-row":{type:"boolean","default":false},"reverse-column":{type:"boolean","default":false},"row-increment":{type:"number",minimum:1,"default":1},"column-increment":{type:"number",minimum:1,"default":1},autospin:{type:"string","enum":["once","twice","infinite","off"],"default":"once"},"autospin-start":{oneOf:[{type:"string"},{type:"array"}],"default":"load"},"autospin-stop":{type:"string","enum":["click","hover","never"],"default":"click"},"autospin-speed":{type:"number",minimum:0,"default":3600},"autospin-direction":{type:"string","enum":["clockwise","anticlockwise","alternate-clockwise","alternate-anticlockwise"],"default":"clockwise"},magnify:{type:"boolean","default":true},"magnifier-width":{type:"number","default":"80%"},"magnifier-shape":{type:"string","enum":["inner","circle","square"],"default":"inner"},fullscreen:{type:"boolean","default":true},hint:{type:"boolean","default":true},"initialize-on":{type:"string","enum":["load","hover","click"],"default":"load"},"mousewheel-step":{type:"number",minimum:0,"default":3},speed:{type:"number",minimum:1,maximum:100,"default":50},sensitivity:{type:"number",minimum:1,maximum:100,"default":50},sensitivityX:{type:"number",minimum:1,maximum:100,"default":50},sensitivityY:{type:"number",minimum:1,maximum:100,"default":50},spin:{type:"string","enum":["drag","hover"],"default":"drag"},smoothing:{type:"boolean","default":true},"right-click":{type:"boolean","default":false},emulate3D:{type:"boolean","default":false},onready:{type:"function","default":u.$F},onstart:{type:"function","default":u.$F},onstop:{type:"function","default":u.$F},onzoomin:{type:"function","default":u.$F},onzoomout:{type:"function","default":u.$F},onspin:{type:"function","default":u.$F},actionspin:{type:"function","default":u.$F}};q=u.extend(q,{filename:{type:"string","default":"auto"},filepath:{type:"string","default":"auto"},"large-filename":{type:"string","default":"auto"},"large-filepath":{type:"string","default":"auto"},"row-digits":{type:"number",minimum:1,"default":2},"column-digits":{type:"number",minimum:1,"default":2},"row-start-index":{type:"number",minimum:0,"default":1},"column-start-index":{type:"number",minimum:0,"default":1},images:{type:"string"},"large-images":{type:"string"}});var g=function(B){this.value=0;this.placeholder=B;this.node=u.$new("div",{"class":"m360-loader"});this.reset()};g.prototype={constructor:g,changePlaceholder:function(B){this.placeholder=B;f(this.placeholder).append(this.node)},show:function(){f(this.placeholder).append(this.node);f(this.node).jGetSize();f(this.node).jAddClass("shown")},hide:function(){f(this.node).jRemoveClass("shown")},reset:function(){this.value=0;this.setValue(0)},increment:function(B){this.value+=B;this.setValue(this.value+"%")},incrementByVal:function(B){this.value=B;this.setValue(this.value+"%")},setValue:function(B){if(Math.round(this.value)>=100){setTimeout(function(){this.hide()}.jBind(this),1)}
f(this.node).setAttribute("data-progress",this.value.toFixed(0)+"%")}};var w=function(C,B){this.o=f(C);this.canvas=null;this.canvasContext=null;this.backstageCanvas=null;this.backstageCtx=null;this.backstageCanvas2=null;this.backstageCtx2=null;this.imgContext=null;this.boundaries={top:0,left:0,bottom:0,right:0};this.normalSize={width:0,height:0};this.zoomSize={width:0,height:0};this.fullScreenSize={width:0,height:0};this.size={width:0,height:0};this.boxSize={width:0,height:0};this.boxBoundaries={width:0,height:0};this.currentFrame={row:0,col:0};this.concurrentImages=6000;this.images={small:f([]),fullscreen:f([]),zoom:f([])};this.imageQueue={small:f([]),fullscreen:f([]),zoom:f([])};this.imageMap={};this.loadedRows={count:0,indexes:f([])};this.pendingImages={small:0,fullscreen:0,zoom:0};this.bgImages={url:f([]),position:f([])};this.bgURL=null;this.lastBgSize={width:0,height:0};this.useMultiBackground=i&&u.browser.features.multibackground;this.useXHR=z&&u.browser.features.xhr2;this.canMagnify=true;this.imageLoadStarted={small:0,fullscreen:0,zoom:0};this.isFullScreen=false;this.fullScreenBox=null;this.fullscreenIcon=null;this.fullScreenImage=null;this.fullScreenFX=null;this.fullScreenExitFX=null;this.firstFullScreenRun=true;this.resizeCallback=null;this.reflowTimer=null;this.spinStarted=false;this.isVerticalSpin=false;this.borders={x:0,y:0};this.imgCacheBox=u.$new("div").jAddClass("leoimage-temporary-img").jSetCss({position:"absolute",top:-1000,width:10,height:10,overflow:"hidden"}).jAppendTo(document.body);this.addedCSS=[];this.ppf={x:60,y:60};this._options=new u.Options(q);this.option=f(function(){if(arguments.length>1){return this.set(arguments[0],arguments[1])}else{return this.get(arguments[0])}}).jBind(this._options);this.lang=new u.Options({"loading-text":{type:"string","default":"Loading..."},"fullscreen-loading-text":{type:"string","default":"Loading large spin..."},"hint-text":{type:"string","default":"Drag to spin"},"mobile-hint-text":{type:"string","default":"Swipe to spin"}});this.localString=f(function(){if(arguments.length>1){return this.set(arguments[0],arguments[1])}else{return this.get(arguments[0])}}).jBind(this.lang);this.run()};w.prototype.run=function(){var D=this;var E;while(this.o.firstChild&&this.o.firstChild.tagName!=="IMG"){this.o.removeChild(this.o.firstChild)}
if(this.o.firstChild.tagName!=="IMG"){throw"Error loading LeoImage 360. Cannot find image."}
this.oi=this.o.replaceChild(this.o.firstChild.cloneNode(false),this.o.firstChild);this._options.fromJSON(u.extend(window.LeoImage360Options||{},LeoImage360.options));this.lang.fromJSON(u.extend(window.LeoImage360Lang||{},LeoImage360.lang));this._options.fromString(this.o.getAttribute("data-options")||this.o.getAttribute("data-leoimage360-options")||"");this.sis=f(f((this.option("images")||"").jTrim().split(" ")).filter(function(F){return""!==F}));this.bis=f(f((this.option("large-images")||"").jTrim().split(" ")).filter(function(F){return""!==F}));if(true===this.option("swap-rows-columns")){E=this.option("rows");this.option("rows",this.option("columns"));this.option("columns",E);E=this.option("loop-row");this.option("loop-row",this.option("loop-column"));this.option("loop-column",E)}
if(isNaN(parseInt(this.option("row-increment")))){this._options.set("row-increment",this._options.defaults["row-increment"])}
if(isNaN(parseInt(this.option("column-increment")))){this._options.set("column-increment",this._options.defaults["column-increment"])}
this._options.set("columns",Math.floor(this.option("columns")/this.option("column-increment")));this._options.set("rows",Math.floor(this.option("rows")/this.option("row-increment")));if(!this._options.isset("sensitivity")&&this._options.isset("speed")){this.option("sensitivity",this.option("speed"))}
if(!this._options.isset("sensitivityX")&&this._options.isset("sensitivity")){this.option("sensitivityX",this.option("sensitivity"))}
if(!this._options.isset("sensitivityY")&&this._options.isset("sensitivity")){this.option("sensitivityY",this.option("sensitivity"))}
this._options.set("autospin-start",this.option("autospin-start").split(","));(u.browser.touchScreen&&"hover"===this.option("autospin-stop"))&&this._options.set("autospin-stop","click");if("never"===this.option("autospin-stop")||("infinite"==this.option("autospin")&&f(this.option("autospin-start")).contains("click"))){this.option("magnify",false)}
isNaN(parseInt(this.option("mousewheel-step"),10))&&this._options.set("mousewheel-step",3);("infinite"===this.option("autospin")&&"hover"===this.option("autospin-stop"))&&this._options.set("hint",false);!this._options.exists("hint")&&("infinite"===this.option("autospin")&&"click"===this.option("autospin-stop")&&f(this.option("autospin-start")).contains("click"))&&this._options.set("hint",false);("string"==u.jTypeOf(this.option("onready")))&&("function"==u.jTypeOf(window[this.option("onready")]))&&this._options.set("onready",window[this.option("onready")]);("string"==u.jTypeOf(this.option("onspin")))&&("function"===u.jTypeOf(window[this.option("onspin")]))&&this._options.set("onspin",window[this.option("onspin")]);("string"==u.jTypeOf(this.option("onzoomin")))&&("function"===u.jTypeOf(window[this.option("onzoomin")]))&&this._options.set("onzoomin",window[this.option("onzoomin")]);("string"==u.jTypeOf(this.option("onzoomout")))&&("function"===u.jTypeOf(window[this.option("onzoomout")]))&&this._options.set("onzoomout",window[this.option("onzoomout")]);("function"!==u.jTypeOf(this.option("onspin")))&&this.option.set("onspin",u.F);("function"!==u.jTypeOf(this.option("onzoomin")))&&this.option.set("onzoomin",u.F);("function"!==u.jTypeOf(this.option("onzoomout")))&&this.option.set("onzoomout",u.F);try{if(m){n.append(u.$new("div",{},{display:"none",visibility:"hidden"}).append(document.createTextNode(m)));m=undefined}}catch(C){}
this.o.jAddEvent("click",function(F){F.stop()}).jAddEvent("dragstart",function(F){F.stop()}).jAddEvent("selectstart",function(F){F.stop()}).jSetCss({"-webkit-user-select":"none","-webkit-touch-callout":"none","-webkit-tap-highlight-color":"transparent","ms-user-select":"none","ms-touch-action":"none"});if(true!==this.option("right-click")){this.o.jAddEvent("contextmenu",function(F){F.stop();return false})}
(function B(){var F,G;if(!this.o.firstChild.getAttribute("src")){B.jBind(this).jDelay(100);return}
if(!this.sis.length){F=this.prepareFilename(this.o.firstChild.getAttribute("src"),this.option("filepath"),this.option("filename"),true);this._options.set("filepath",F.path);this._options.set("filename",F.tpl);F=this.prepareFilename(this.o.getAttribute("href")||"",this.option("large-filepath"),this.option("large-filename"));this._options.set("large-filepath",F.path);this._options.set("large-filename",F.tpl);if("auto"==this.option("large-filename")){this._options.set("fullscreen",false);this._options.set("magnify",false)}}!parseInt(this.option("start-row"),10)&&this._options.set("start-row",1);!parseInt(this.option("start-column"),10)&&this._options.set("start-column",1);parseInt(this.option("start-row"),10)>parseInt(this.option("rows"),10)&&this._options.set("start-row",this.option("rows"));parseInt(this.option("start-column"),10)>parseInt(this.option("columns"),10)&&this._options.set("start-column",this.option("columns"));if(true===this.option("reverse-row")){this.option("start-row",this.option("rows")+1-this.option("start-row"))}
if(true===this.option("reverse-column")){this.option("start-column",this.option("columns")+1-this.option("start-column"))}
if(true===this.option("swap-rows-columns")){G=this.option("start-row");this.option("start-row",this.option("start-column"));this.option("start-column",G)}
new u.ImageLoader(this.o.firstChild,{onload:f(function(J){var I,L=false,K=f(function(){if(!L){L=true;f(this.preInit).call(this)}}).jBind(this),H=f(function(){this.normalSize=I.jGetSize();I.parentNode.jRemove();if(this.normalSize.width<50){this.normalSize=J.jGetSize()}
if(f(this.o).jGetSize().width<50){this.o.jSetCssProp("max-width","none")}
switch(this.option("initialize-on")){case"hover":this.o.jSetCss({visibility:"visible"}).jAddEvent("mouseover",K);break;case"click":this.o.jSetCss({visibility:"visible"}).jAddEvent("click",K);break;default:K()}}).jBind(this);I=f(J.img.cloneNode(false)).jAppendTo(u.$new("div").jAddClass("leoimage-temporary-img").jSetCss({position:"absolute",top:-10000,width:10,height:10,overflow:"hidden"}).jAppendTo(document.body));H.jDelay(1)}).jBind(this)})}).call(this)};w.prototype.prepareFilename=function(B,O,J,F){var K={path:O,tpl:J.replace(/(\/|\\)/ig,"")};var E;var D;var H;var C;var L=0;var M=0;var I=0;var N="1";var G="1";if(!B){return K}
B=B.split("/");D=B.pop();H=D.match(/^([^#?]+)([\?#].*)?$/);if(!H){H=["",D,""]}
J=H[1];O=(B.join("/")+"/").replace(/^\/$/,"");J=J.split(".");E=(J.length>1?"."+J.pop():"")+(H[2]||"");J=J.join(".");F||(F=false);K.path="auto"==K.path?O:K.path.replace(/\/$/,"")+"/";if("auto"==K.tpl){K.tpl=J.replace(/(\d?\d{1,})\-?(\d?\d{1,})?$/,function(S,Q,P){var R;if(undefined!==P&&null!==P&&""!==P){N=Q;G=P;R="{row}-{col}"}else{G=Q;R="{col}"}
return R})+E}else{if(C=new RegExp(K.tpl.replace(/(\$|\?)/g,"\\$1").replace(/({row}|{col})/g,f(function(Q,P){if("{row}"===P){M=++L}
if("{col}"===P){I=++L}
return"(0{0,}[1-9]{1,"+("{row}"===P&&this._options.exists("row-digits")?this.option("row-digits"):"{col}"===P&&this._options.exists("column-digits")?this.option("column-digits"):"")+"})"}).jBind(this))).exec(J+E)){if(M){N=C[M]}
if(I){G=C[I]}}else{if(C=new RegExp(K.tpl.replace(/(\$|\?)/g,"\\$1").replace(/({row}|{col})/g,f(function(Q,P){return"(\\d{1,"+("{row}"===P&&this._options.exists("row-digits")?this.option("row-digits"):"{col}"===P&&this._options.exists("column-digits")?this.option("column-digits"):"")+"})"}).jBind(this))).exec(J+E)){if(M){N=C[M]}
if(I){G=C[I]}}}}
if(F){if(!this._options.exists("row-digits")){this._options.set("row-digits",N.length)}
if(!this._options.exists("column-digits")){this._options.set("column-digits",G.length)}}
if("auto"==this.option("start-row")){this._options.set("start-row",N.jToInt())}
if("auto"==this.option("start-column")){this._options.set("start-column",G.jToInt())}
return K};w.prototype.prepareUrl=function(E,B,D){function C(F,G){return Array(Math.max(G-(""+F).length+1,0)).join("0")+F}
D=D===true?"large-":"";if(this.sis.length){if(D&&!this.bis.length){return""}
return this[(D)?"bis":"sis"][(E-1)*this.option("columns")+B-1]}
E=C(this.option("row-start-index")+(E-1)*this.option("row-increment"),this.option("row-digits"));B=C(this.option("column-start-index")+(B-1)*this.option("column-increment"),this.option("column-digits"));return t(this.option(D+"filepath")+this.option(D+"filename").split("{row}").join(E).split("{col}").join(B))};w.prototype.getImageURL=function(F,E,D){var B=null,C="";D||(D="small");B=this.getImageInfo(F,E,D);B&&(C=B.url);return C};w.prototype.getImageInfo=function(E,D,C){var B=null,F;C||(C="small");if(true===this.option("swap-rows-columns")){F=E;E=D;D=F}
(true===this.option("reverse-row"))&&(E=this.option("rows")+1-E);(true===this.option("reverse-column"))&&(D=this.option("columns")+1-D);B={url:this.prepareUrl(E,D,"fullscreen"===C||"zoom"===C),left:0,top:0};return B||null};w.prototype.onImageLoadProgress=function(D,C,B){if(f(this.imageMap[C]).filter(function(E){return("small"!==D||this.isVerticalSpin||E.row===this.option("start-row")-1)},this).length){this.progressBar.increment(B*this.progressBar.step)}};w.prototype.onImageLoaded=function(E,D,H){var G=f([]),B,C=1,F=function(J,I){return J-I};this.pendingImages[E]--;if(this.useMultiBackground){C=this.bgImages.url.push('url("'+H.img.getAttribute("src")+'")');this.bgImages.position.push("0px -10000px");if(!l||"fullscreen"!==E){this.bgURL=this.bgImages.url.join(",")}}
if(!this.useMultiBackground&&!this.imageMap[D].URLCached){if(!u.browser.features.canvas){this.imgCacheBox.append(H.img)}
this.imageMap[D].URLCached=true}
f(f(this.imageMap[D]).filter(function(I){return I.type===E})).jEach(function(K,J,I){K.img.framesOnImage=I.length;K.img.bgIndex=C-1;K.img.bgURL="url('"+H.img.getAttribute("src")+"')";K.img.complete=true;K.img.loaded=H.ready;K.img.cachedObject=H.img;G.contains(K.row)||G.push(K.row)});this.onImageLoadProgress(E,D,1);if("small"==E){f(G).jEach(function(I){if(!f(this.images[E][I]).filter(function(J){return J.complete!==true}).length){this.loadedRows.count++;this.loadedRows.indexes.push(I);this.loadedRows.indexes.sort(F);this.current&&this.checkJumpRowCol(this.currentFrame.row,this.currentFrame.col);if((l&&this.useMultiBackground)||this.isVerticalSpin?(!this.imageQueue[E].length&&0===this.pendingImages[E]):I===this.option("start-row")-1){setTimeout(function(){this.progressBar.hide();this.init()}.jBind(this),1)}}},this)}
if(!(l&&this.useMultiBackground)&&this.isFullScreen&&"fullscreen"==E){this.jump_(this.currentFrame.row,this.currentFrame.col)}
if(!this.imageQueue[E].length){if((l&&this.useMultiBackground)&&this.isFullScreen&&"fullscreen"==E&&0===this.pendingImages[E]){this.bgURL=this.bgImages.url.join(",");this.jump_(this.currentFrame.row,this.currentFrame.col)}
return}
if(this.pendingImages[E]<this.concurrentImages&&this.imageQueue[E].length){this.pendingImages[E]++;D=this.imageQueue[E].shift();new u.ImageLoader(D,{xhr:this.useXHR,oncomplete:this.onImageLoaded.jBind(this,E,D)})}};w.prototype.preloadImages=function(E,J,C){E||(E="small");var G=this.option("columns"),K=this.option("rows"),D=0,H,F,I,B;F=J;H=C;this.images[E]=new Array(K);do{this.images[E][F-1]=new Array(G);do{I=this.getImageInfo(F,H,E);if(!this.imageQueue[E].contains(I.url)){("small"==E&&(F==J||this.isVerticalSpin))&&D++;this.imageQueue[E].push(I.url)}
I.left*=-1;I.top*=-1;I.bgIndex=0;I.framesOnImage=1;I.loaded=false;I.complete=false;this.images[E][F-1][H-1]=I;this.imageMap[I.url]||(this.imageMap[I.url]=f([]));this.imageMap[I.url].push({row:F-1,type:E,img:this.images[E][F-1][H-1]});--H<1&&(H=G)}while(H!=C);--F<1&&(F=K)}while(F!=J);if(this.imageQueue[E].length===K*G){this.useXHR=false}
this.progressBar.step=100/("small"==E?D:this.imageQueue[E].length);this.progressBar.show(E==="small"?"center":"auto",(this.useXHR||100!==this.progressBar.step)?true:false);this.imageLoadStarted[E]=u.now();while(this.pendingImages[E]<G&&this.imageQueue[E].length){B=this.imageQueue[E].shift();new u.ImageLoader(B,{xhr:this.useXHR,oncomplete:this.onImageLoaded.jBind(this,E,B),onxhrerror:f(function(){if(100===this.progressBar.step){this.progressBar.setIncrementalStyle(false)}}).jBind(this)});this.pendingImages[E]++}};w.prototype.preInit=function(D){var C={},B=null;if(!D&&(this.option("fullscreen")||this.option("magnify"))){new u.ImageLoader(this.prepareUrl(1,1,true),{onload:f(function(F){this.zoomSize=F.jGetSize();this.fullScreenSize=F.jGetSize()}).jBind(this),onerror:f(function(F){this._options.set("fullscreen",false);this._options.set("magnify",false)}).jBind(this),oncomplete:f(function(F){this.preInit(true)}).jBind(this)});return}
this.isVerticalSpin=(1===this.option("columns")&&this.option("rows")>1);this.size=f(this.o.firstChild).jGetSize();if(0===this.size.height){this.preInit.jBind(this,true).jDelay(500);return}
C={id:"m360-box-"+Math.floor(Math.random()*u.now())};B=u.addCSS("#"+C.id+":after",{"padding-bottom":(this.normalSize.height/this.normalSize.width)*100+"% !important"},p);if(B>-1){this.addedCSS.push(B)}
this.wrapper=u.$new("div",C).jAddClass(c+"-container").jSetCss({display:"inline-block",overflow:"hidden",position:"relative","text-align":"center",width:"100%","max-width":this.normalSize.width,}).enclose(this.o.jSetCss({display:"inline-block",visibility:"visible",overflow:"hidden",position:"relative","vertical-align":"middle","text-decoration":"none",color:"#000","background-repeat":"no-repeat"}));this.o.firstChild.jSetCss({width:"100%"});if(u.browser.trident&&u.browser.ieMode<9){this.o.jSetCss({"background-image":"none",filter:'progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod="scale", src="'+t(this.o.firstChild.getAttribute("src"))+'")'})}
this.o.jSetCss({"backface-visibility":"hidden",transform:"translate3d(0,0,0)"});this.size=f(this.o).jGetSize();if(u.browser.features.canvas){this.backstageCanvas=u.$new("canvas");this.backstageCtx=this.backstageCanvas.getContext("2d");this.backstageCanvas2=u.$new("canvas");this.backstageCtx2=this.backstageCanvas2.getContext("2d");this.canvas=u.$new("canvas").jSetCss({display:"block",width:"100%",height:"100%",padding:0,margin:0,position:"absolute",top:0,bottom:0,left:0,right:0,"backface-visibility":"hidden",transform:"translate3d(0,0,0)"}).jAppendTo(this.o);this.canvasContext=this.canvas.getContext("2d");this.canvas.width=this.size.width;this.canvas.height=this.size.height}else{this.imgContext=u.$new("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"}).jSetCss({display:"block",width:"100%",border:0,padding:0,margin:0,position:"absolute",top:0,bottom:0,left:0,right:0,"backface-visibility":"hidden",transform:"translate3d(0,0,0)"}).jAppendTo(this.o)}
this.boundaries=this.o.jGetRect();if(5===u.browser.ieMode||"border-box"===(this.o.jGetCss("box-sizing")||this.o.jGetCss("-moz-box-sizing"))){this.borders.x=parseFloat(this.o.jGetCss("border-left-width")||"0")+parseFloat(this.o.jGetCss("border-right-width")||"0");this.borders.y=parseFloat(this.o.jGetCss("border-top-width")||"0")+parseFloat(this.o.jGetCss("border-bottom-width")||"0")}
if(5===u.browser.ieMode){this.wrapper.jSetCss({width:this.normalSize.width+this.borders.x,display:"inline"})}
this.boxSize=this.wrapper.jGetSize();this.boxBoundaries=this.wrapper.jGetRect();this.resizeCallback=function(){clearTimeout(this.reflowTimer);this.reflowTimer=f(this.reflow).jBind(this).jDelay(10)}.jBind(this);f(window).jAddEvent("resize",this.resizeCallback);if(!u.browser.touchScreen||!u.browser.mobile){this.wrapper.jAddClass("desktop");this.o.jAddClass("desktop")}
if(this.isVerticalSpin){this.o.jAddClass("m360-spin-y")}else{if((1===this.option("rows")&&this.option("columns")>1)){this.o.jAddClass("m360-spin-x")}}
this.progressBar=new g(this.o);this.preloadImages("small",this.option("start-row"),this.option("start-column"))};w.prototype.init=function(D){if(!D){this.current={row:1,col:1,tmp:{row:1,col:1}};this.jump(this.option("start-row")-1,this.option("start-column")-1);this.init.jBind(this,true).jDelay(300);return}
this.o.firstChild.jSetOpacity(0);var M={x:0,y:0};var K={x:0,y:0};var I=this;this.ppf={x:this.size.width/this.option("columns")/Math.pow(this.option("sensitivityX")/50,2),y:this.size.height/this.option("rows")/Math.pow(this.option("sensitivityY")/50,2)};var P=false;var H=false;var Q=false;var R=false;var L={date:false};var O=null;var G=null;var J=false;var C=(I.isVerticalSpin||(I.option("loop-row")&&!I.option("loop-column")))?"rows":"columns";if(!this._options.exists("autospin-speed")||!isFinite(this.option("autospin-speed"))){this.option("autospin-speed",Math.min(e*parseInt(this.option(C),10),this._options.defaults["autospin-speed"]))}
this._autospin={invoked:false,infinite:("infinite"==this.option("autospin")),cancelable:("never"!=this.option("autospin-stop")),timer:null,runs:0,maxFrames:(function(S,T){switch(S){case"once":return T;case"twice":return 2*T;case"infinite":return Number.MAX_VALUE;default:return 0}})(this.option("autospin"),this.option(C)),frames:0,playedFrames:0,alternate:/^alternate\-(anti)?clockwise$/.test(this.option("autospin-direction")),fn:(function(T,S){if(this._autospin.alternate){S*=(++this._autospin.playedFrames%this.option(C)?-1:0)*(Math.floor(this._autospin.playedFrames/this.option(C))%2||-1)}
if("rows"===C){this.jump(this.currentFrame.row+S,this.currentFrame.col)}else{this.jump(this.currentFrame.row,this.currentFrame.col+S)}
(--this._autospin.frames>0)&&(this._autospin.timer=this._autospin.fn.jDelay(T))||this._autospin.onpause()}).jBind(this,this.option("autospin-speed")/this.option(C),(/^(alternate\-)?anticlockwise$/.test(this.option("autospin-direction"))?-1:1)),play:function(S){this.frames=S||this.maxFrames;this.playedFrames=("rows"===C)?I.currentFrame.row:I.currentFrame.col;clearTimeout(this.timer);if(this.frames>0){this.timer=this.fn.jDelay(1);this.runs++;if(I.hintBox){I.hideHintBox()}}},pause:function(S){this.timer&&clearTimeout(this.timer);if(this.frames>0){this.frames=0;this.onpause(S)}},onpause:function(S){if(true!==S&&this._autospin.runs<2&&this.option("rows")*this.option("columns")>1&&this.option("hint")){this.setupHint()}}.jBind(this)};this.o.jSetCss({outline:"none"});this.mMoveEvent=function(V){if((/touch/i).test(V.type)&&V.touches.length>1){return true}
if(H||R){if(!R){E(V);P=true}else{return true}}
var U=V.jGetPageXY(),T=U.x-M.x,X=U.y-M.y,S=T>0?Math.floor(T/I.ppf.x):Math.ceil(T/I.ppf.x),W=X>0?Math.floor(X/I.ppf.y):Math.ceil(X/I.ppf.y);if(I.option("spin")=="hover"||I.option("spin")=="drag"&&P){clearTimeout(O);if(!Q&&f(V).isTouchEvent()){if(I.option("columns")>1&&Math.abs(T)>1&&Math.abs(T)>Math.abs(X)||I.option("rows")>1&&Math.abs(X)>1&&Math.abs(X)<a){f(V).stopDefaults()}else{P=false;return}}
Q=true;if(I.option("rows")>1&&Math.abs(X)>=I.ppf.y){M.y=M.y+W*I.ppf.y;I.jump(I.current.row+W,I.current.col)}
if(I.option("columns")>1&&I.option("rows")<=1){if(Math.abs(T)>=I.ppf.x){M.x=M.x+S*I.ppf.x;M.y=U.y;I.jump(I.current.row,I.current.col+(0-S))}else{if(Math.abs(X)>=I.ppf.y){M.x=U.x;M.y=M.y+W*I.ppf.y;I.jump(I.current.row,I.current.col+(0-W))}}}else{if(I.option("columns")>1&&Math.abs(T)>=I.ppf.x){M.x=M.x+S*I.ppf.x;I.jump(I.current.row,I.current.col+(0-S))}}
O=setTimeout(function(Y){this.spos=Y;this.date=u.now()}.jBind(L,U),50)}
return false};if(this._autospin.cancelable){f(this.option("spin")=="drag"?document:this.o).jAddEvent(k.mousemove,this.mMoveEvent);if(u.browser.touchScreen){f(this.option("spin")=="drag"?document:this.o).jAddEvent("touchmove",this.mMoveEvent)}}
this.mHoverEvent=function(S){if(S.pointerType&&("touch"===S.pointerType||S.pointerType===S.MSPOINTER_TYPE_TOUCH)){return true}
if(H||R){H&&I.magnifier.div.show()&&I.magnifier.animate(S);return false}
if(I._autospin.frames>0&&"hover"==I.option("autospin-stop")){I._autospin.pause()}else{!I._autospin.invoked&&f(I.option("autospin-start")).contains("hover")&&(I._autospin.invoked=!I._autospin.infinite)&&I._autospin.play()}
M=S.jGetPageXY();"hover"==I.option("spin")&&(I.spinStarted=true);return false};if(this._autospin.cancelable){this.o.jAddEvent(k.mouseover,this.mHoverEvent)}
this.mOutEvent=function(S){if(S.pointerType&&("touch"===S.pointerType||S.pointerType===S.MSPOINTER_TYPE_TOUCH)){return true}
if(I.o.hasChild(S.getRelated())){return true}
if(I._autospin.infinite&&"hover"==I.option("autospin-stop")){if(H){if(I.magnifier.div.hasChild(S.getRelated())){return true}
E(S)}
I._autospin.play()}else{}
return false};if(this._autospin.cancelable){this.o.jAddEvent(k.mouseout,this.mOutEvent)}
this.mDownEvent=function(T){var S=T.isTouchEvent();if(3==T.getButton()){return true}
if(I.hintBox){I.hideHintBox()}
if((/touch/i).test(T.type)&&T.touches.length>1){return true}
M=T.jGetPageXY();K=T.jGetPageXY();K.autospinStopped=false;if(H){if(S){I.magnifier.delta.x=I.magnifier.x+I.boxSize.width/I.magnifier.ratio.x/2-(I.boxBoundaries.right-T.jGetPageXY().x);I.magnifier.delta.y=I.magnifier.y+I.boxSize.height/I.magnifier.ratio.y/2-(I.boxBoundaries.bottom-T.jGetPageXY().y)}}
L.spos=T.jGetPageXY();L.date=u.now();I.option("spin")=="drag"&&(M=T.jGetPageXY());if(H||R){!S&&(R=false);return true}
if(I._autospin.frames>0&&"click"==I.option("autospin-stop")){K.autospinStopped=true;I._autospin.pause();T.stopDefaults()}
P=true;Q=false;I.option("spin")=="drag"&&(I.spinStarted=true)&&(M=T.jGetPageXY());return false};if(this._autospin.cancelable){if(!u.browser.mobile||!u.browser.touchScreen){this.o.jAddEvent(k.mousedown,this.mDownEvent)}
if(u.browser.touchScreen&&this.mDownEvent){this.o.jAddEvent("touchstart",this.mDownEvent)}}
this.mDocUpEvent=function(T){var S=(T.pointerType&&("touch"===T.pointerType||T.pointerType===T.MSPOINTER_TYPE_TOUCH))||(/touch/i).test(T.type);if(3==T.getButton()){return true}
if(H||R||!P){return}
L.moved=Q;I._checkDragFrames(L,T.jGetPageXY(),M);P=false;Q=false};if(this._autospin.cancelable){f(document).jAddEvent(k.mouseup,this.mDocUpEvent);if(u.browser.touchScreen){f(document).jAddEvent("touchend",this.mDocUpEvent)}
f(document).jAddEvent(k.mouseout,function(S){if(null===S.getRelated()||document.documentElement===S.getRelated()){P=false}})}
this.mUpEvent=function(U){var S=(U.pointerType&&("touch"===U.pointerType||U.pointerType===U.MSPOINTER_TYPE_TOUCH))||(/touch/i).test(U.type),T=U.jGetPageXY();if(0==Math.abs(T.x-K.x)&&0==Math.abs(T.y-K.y)){if(!H&&!R){if(K.autospinStopped){return}
if(!I._autospin.invoked&&I._autospin.frames<1&&f(I.option("autospin-start")).contains("click")){I._autospin.invoked=!I._autospin.infinite;I._autospin.play();return false}}
if(I.option("magnify")){Q=false;E(U)}
return false}
if(H||R||!P){return false}
L.moved=Q;I._checkDragFrames(L,U.jGetPageXY(),M);P=false;Q=false;return false};if(this._autospin.cancelable){if(!u.browser.mobile||!u.browser.touchScreen){this.o.jAddEvent(k.mouseup,this.mUpEvent)}
if(u.browser.touchScreen){this.o.jAddEvent("touchend",this.mUpEvent)}}
if(this._autospin.cancelable&&this.option("mousewheel-step")>0){this.o.jAddEvent("mousescroll",function(S){var T;if(I._autospin&&I._autospin.frames>0){I._autospin.pause(true)}
if(H||R||I._autospin.frames>0){return}
f(S).stop();T=Math.abs(S.deltaY)<Math.abs(S.deltaX)?S.deltaX:S.deltaY;T=S.isMouse?((T/Math.abs(T))*I.option("mousewheel-step")):(T*(8/54));clearTimeout(G);if(!J){J=true;I.spinStarted=true}
if(I.isVerticalSpin||(I.option("loop-row")&&!I.option("loop-column"))){I.jump(I.current.row+(S.isMouse?-1:1)*T,I.current.col,S.isMouse,300)}else{if(S.isMouse||I.option("rows")<2||Math.abs(S.deltaY)<Math.abs(S.deltaX)){I.jump(I.current.row,I.current.col+T,S.isMouse,300)}else{I.jump(I.current.row+(S.isMouse?-1:1)*T,I.current.col,S.isMouse,300)}}
G=setTimeout(function(U){J=false},200)})}
if(this._autospin.cancelable&&!("infinite"==this.option("autospin")&&f(this.option("autospin-start")).contains("click"))&&this.option("magnify")){H=false;if("inner"!=this.option("magnifier-shape")){var B=""+this.option("magnifier-width");if(B.match(/\%$/i)){B=Math.round(this.size.width*parseInt(B)/100)}else{B=parseInt(B)}}
this.o.jAddClass("zoom-in");this.magnifier={div:u.$new("div",null,{position:"absolute","z-index":9999,left:0,top:0,width:(B||this.boxSize.width)+"px",height:(B||this.boxSize.height)+"px","background-repeat":"no-repeat","border-radius":("circle"!=I.option("magnifier-shape"))?0:B/2}).jAddEvent("dragstart selectstart",function(S){S.stop()}),image:null,ratio:{x:0,y:0},pos:{x:0,y:0},delta:{x:0,y:0},size:{width:(B||this.boxSize.width),height:(B||this.boxSize.height)},ddx:0,ddy:0,fadeFX:null,moveTimer:null,startTime:null,spin:this,start:function(T,U,S){if(!I.canMagnify){return}
if("inner"==I.option("magnifier-shape")){this.ratio.x=I.zoomSize.width/I.boxSize.width;this.ratio.y=I.zoomSize.height/I.boxSize.height}else{this.ratio.x=I.zoomSize.width/I.size.width;this.ratio.y=I.zoomSize.height/I.size.height}
H=true;P=false;if("inner"==I.option("magnifier-shape")){this.size=I.zoomSize;this.div.jSetCss({width:"100%",height:"100%"})}
this.image=f(T.img);this.image.jSetCss({width:I.zoomSize.width,height:I.zoomSize.height}).jAppendTo(this.div);this.div.jSetOpacity(0);this.div.jAppendTo(I.isFullScreen?I.fullScreenBox:I.wrapper);I.o.jRemoveClass("zoom-in");this.animate(null,U,S);this.fadeFX.stop();this.fadeFX.options.duration=400;this.fadeFX.options.onComplete=function(){I.option("onzoomin").call(null,I.o)};this.fadeFX.start({opacity:[0,1]});this.registerEvents()},stop:function(S){this.unRegisterEvents();H=false;R=false;this.fadeFX.stop();this.fadeFX.options.onComplete=function(){clearTimeout(I.magnifier.moveTimer);I.magnifier.moveTimer=null;I.magnifier.image.jRemove();I.magnifier.div.jRemove();I.magnifier.pos={x:0,y:0};I.magnifier.delta={x:0,y:0};I.magnifier.ddx=0;I.magnifier.ddy=0;I.o.jAddClass("zoom-in");I.option("onzoomout").call(null,I.o)};this.fadeFX.options.duration=200;this.fadeFX.start({opacity:[this.fadeFX.el.jGetCss("opacity"),0]})},animate:function(W,V,U){if(!H){return}
var T,X,S=U||(W&&W.isTouchEvent())||false;if(W){if(S&&!W.isPrimaryTouch()){return}
f(W).stopDefaults()}
V=V||W.jGetPageXY();if(V.x>I.boxBoundaries.right||V.x<I.boxBoundaries.left||V.y>I.boxBoundaries.bottom||V.y<I.boxBoundaries.top){return}
if(W&&S){W.stop()}
this.touchEvent=S;if("inner"===I.option("magnifier-shape")){V.x-=this.delta.x;V.y-=this.delta.y;if(this.ratio.x<=1){T=I.boxSize.width/2;T-=I.boxSize.width/this.ratio.x/2}else{T=(W&&S)?(I.boxBoundaries.right-V.x):V.x-I.boxBoundaries.left;T-=I.boxSize.width/this.ratio.x/2;T=Math.max(0,Math.min(T,I.boxSize.width-I.boxSize.width/this.ratio.x))}
if(this.ratio.y<=1){X=I.boxSize.height/2;X-=I.boxSize.height/this.ratio.y/2}else{X=(W&&S)?(I.boxBoundaries.bottom-V.y):V.y-I.boxBoundaries.top;X-=I.boxSize.height/this.ratio.y/2;X=Math.max(0,Math.min(X,I.boxSize.height-I.boxSize.height/this.ratio.y))}}else{T=V.x;X=V.y}
this.x=T;this.y=X;if(!this.moveTimer){this.move(1)}},move:function(V){var Y,X,aa,Z,W,U,T,S;isFinite(V)||(V=0.2);if("inner"!=I.option("magnifier-shape")){clearTimeout(this.moveTimer);this.moveTimer=null;Y=this.x;X=this.y;W=Math.round(Y-this.size.width/2)-I.boxBoundaries.left;U=Math.round(X-this.size.height/2)-I.boxBoundaries.top;if(this.touchEvent){U-=this.size.height/2+22}
T=Math.round(0-((Y-I.boundaries.left-I.borders.x)*this.ratio.x-(this.size.width/2)));S=Math.round(0-((X-I.boundaries.top-I.borders.y)*this.ratio.y-(this.size.height/2)))}else{aa=Math.ceil((this.x-this.ddx)*V);Z=Math.ceil((this.y-this.ddy)*V);if(!aa&&!Z){clearTimeout(this.moveTimer);this.moveTimer=null;return}
this.ddx+=aa;this.ddy+=Z;W=0;U=0;T=-(this.ddx*(this.size.width/I.boxSize.width));S=-(this.ddy*(this.size.height/I.boxSize.height))}
if(H){this.div.jSetCss({left:W,top:U});this.image.jSetCss(u.browser.features.transform?9===u.browser.ieMode||u.browser.presto?{top:0,left:0,transform:"translate("+T+"px,"+S+"px)"}:{top:0,left:0,transform:"translate3d("+T+"px,"+S+"px, 0)"}:{left:T,top:S})}
if("inner"==I.option("magnifier-shape")){this.moveTimer=setTimeout(this.moveBind,40)}},registerEvents:function(){var S=I.isFullScreen?I.fullScreenBox:I.wrapper;if(I._autospin.cancelable){if(!u.browser.mobile||!u.browser.touchScreen){S.jAddEvent(k.mousedown,I.mDownEvent);S.jAddEvent(k.mouseup,I.mUpEvent)}
S.jAddEvent(k.mousemove,this.animateBind);if(u.browser.touchScreen){S.jAddEvent("touchstart",I.mDownEvent);S.jAddEvent("touchend",I.mUpEvent);S.jAddEvent("touchmove",this.animateBind)}}},unRegisterEvents:function(){var S=I.isFullScreen?I.fullScreenBox:I.wrapper;if(I._autospin.cancelable){if(!u.browser.mobile||!u.browser.touchScreen){S.jRemoveEvent(k.mousedown,I.mDownEvent);S.jRemoveEvent(k.mouseup,I.mUpEvent)}
S.jRemoveEvent(k.mousemove,this.animateBind);if(u.browser.touchScreen){S.jRemoveEvent("touchstart",I.mDownEvent);S.jRemoveEvent("touchend",I.mUpEvent);S.jRemoveEvent("touchmove",this.animateBind)}}}};this.magnifier.fadeFX=new u.FX(this.magnifier.div);this.magnifier.animateBind=this.magnifier.animate.jBindAsEvent(this.magnifier);this.magnifier.moveBind=this.magnifier.move.jBind(this.magnifier);this.magnifier.div.jAddClass("m360-magnifier").jAddClass("m360-magnifier-"+this.option("magnifier-shape"));if("inner"!=this.option("magnifier-shape")){I.magnifier.div.jAddEvent("mousescroll",function(U){var T=U.isMouse?5:8/54,S;f(U).stop();T=(100+T*Math.abs(U.delta))/100;if(U.delta<0){T=1/T}
S=Math.max(100,Math.round(I.magnifier.size.width*T));S=Math.min(S,I.size.width);this.jSetCss({width:S,height:S,"border-radius":("circle"!=I.option("magnifier-shape"))?0:S/2});I.magnifier.size=this.jGetSize();I.magnifier.move(1)})}
var F=this.loader=u.$new("div").jAddClass("m360-magnifier-loader-holder").append(u.$new("div").jAddClass("m360-loader")).jAddEvent(k.mousedown+" "+k.mousemove,function(S){S.stopDistribution()});F.toggle=function(S){if(S){F.timer=setTimeout(function(){I.o.append(F)},400)}else{if(F.timer){clearTimeout(F.timer);F.timer=false}
(I.o===this.parentNode)&&I.o.removeChild(F)}};function E(X,T){var W,V,U,S=false;if(Q){return}
if(!I.canMagnify){return}
if(u.jTypeOf(X)=="event"){S=(X.pointerType&&("touch"===X.pointerType||X.pointerType===X.MSPOINTER_TYPE_TOUCH))||(/touch/i).test(X.type);if((U=f(X.getTarget())).jHasClass("icon")){if(H&&U.jHasClass("magnify")){return}
if(!H&&U.jHasClass("spin")){return}}
X.stop()}
if(H&&T){return}
if(!H&&false==T){return}
if(H&&!T){I.magnifier.stop(u.jTypeOf(X)=="event"?X.jGetPageXY():null);U&&U.jHasClass("spin")&&I._autospin.infinite&&I._autospin.play()}else{W=I.checkJumpRowCol(I.current.row,I.current.col);V=(u.jTypeOf(X)=="event")?X.jGetPageXY():X;F&&F.toggle(true);R=true;P=false;I._autospin.pause();new u.ImageLoader(I.getImageURL(W.row+1,W.col+1,"zoom"),{onload:f(function(Z,Y){I.resizeCallback();I.magnifier.start(Y,V,Z)}).jBind(null,S),onerror:function(){R=false},oncomplete:function(){F&&F.toggle(false)}})}
return false}
this._showM=E.jBind(this,{x:I.boxBoundaries.left+(I.boxBoundaries.right-I.boxBoundaries.left)/2,y:I.boxBoundaries.top+(I.boxBoundaries.bottom-I.boxBoundaries.top)/2},true);this._hideM=E.jBind(this,null,false)}
if(this._autospin.cancelable&&this.option("fullscreen")){this.fullscreenIcon=u.$new("button").jAddClass("m360-icon m360-icon-fullscreen-open").jAddEvent(k.mousedown,function(S){S.stopDistribution()}).jAddEvent("click",function(S){if(3==S.getButton()){return true}
S.stop();this.enterFullscreen();return false}.jBindAsEvent(this)).jAppendTo(this.wrapper);u.browser.touchScreen&&this.fullscreenIcon.jAddEvent("touchstart",function(S){S.stopDistribution()})}
this.resizeCallback();if(this._autospin.maxFrames>0&&f(this.option("autospin-start")).contains("load")){this._autospin.play()}else{this.jump(this.currentFrame.row,this.currentFrame.col);if(this.option("rows")*this.option("columns")>1&&this.option("hint")&&this._autospin.cancelable){this.setupHint()}}
var N=f(this.o).jFetch("cr");if(N){f(this.o).append(N)}
("function"==u.jTypeOf(this.option("onready")))&&this.option("onready").call(null,this.o)};w.prototype._checkDragFrames=function(F,E,G){if(!this.option("smoothing")||!F.date){return}
var D=u.now()-F.date;F.date=false;if(D<=0){return}
if(D<50){D=50}
var C=0.01;ppf=this.ppf,loopR=this.option("loop-row")&&this.loadedRows.count==this.option("rows"),loopC=this.option("loop-column"),dx=E.x-F.spos.x,dy=E.y-F.spos.y;function B(K){var L=K=="x"?dx:dy;var H=L/D;var J=(H/2)*(H/C);var I;if(K=="x"){if(Math.abs(dx)<Math.abs(dy)){I=J-(F.spos.x-G.x)}else{I=Math.abs(L+(L>0?J:(0-J)))-Math.abs(F.spos.x-G.x);I=L>0?(0-I):I}}else{if(!loopR||Math.abs(dx)>=Math.abs(dy)){I=J-(F.spos.y-G.y)}else{I=Math.abs(L+(L>0?J:(0-J)))-Math.abs(F.spos.y-G.y);I=L>0?(0-I):I}}
I/=ppf[K];return I>0?Math.floor(I):Math.ceil(I)}
this.jump(this.current.row+B("y"),this.current.col+B("x"),true,2*Math.abs(Math.floor(Math.max(Math.abs(dx),Math.abs(dy))/D/C)))};w.prototype.jump=function(E,C,B,D){this.current.row=E;this.current.col=C;this.fx&&this.fx.stop();if(!B){this.current.tmp.row=E;this.current.tmp.col=C;this.jump_(E,C);return}
this.fx=new u.FX(this.o,{duration:D,transition:u.FX.Transition.quadOut,onBeforeRender:(function(F){this.current.tmp.col=F.col;this.current.tmp.row=F.row;this.jump_(F.row,F.col)}).jBind(this)}).start({col:[this.current.tmp.col,C],row:[this.current.tmp.row,E]})};w.prototype.checkJumpRowCol=function(E,C){var B,D;E=Math.round(E);C=Math.round(C);if(this.option("loop-row")){E%=this.option("rows");E<0&&(E+=this.option("rows"))}
if(this.loadedRows.indexes.contains(E)){E=this.loadedRows.indexes.indexOf(E)}else{var B=(E-this.currentFrame.row)/Math.abs(E-this.currentFrame.row);var D=this.loadedRows.indexes.filter(function(F){return(F-E)*B>0});E=D.length?this.loadedRows.indexes.indexOf(D[(B<0)?D.length-1:0]):(!this.option("loop-row")||this.loadedRows.count<this.option("rows"))?this.loadedRows.indexes.indexOf(this.currentFrame.row):(B<0?this.loadedRows.count-1:0)}
if(!this.option("loop-column")&&(!this._autospin||this._autospin.frames<1)){C>(this.option("columns")-1)&&(C=this.option("columns")-1);C<0&&(C=0)}
C%=this.option("columns");C<0&&(C+=this.option("columns"));(!this.option("loop-column"))&&(this.current.col=C);this.currentFrame={row:this.loadedRows.indexes[E],col:C};if(!this.option("loop-row")||this.loadedRows.count<this.option("rows")){this.current.row=this.currentFrame.row}
return u.detach(this.currentFrame)};w.prototype.jump_=function(F,B){var D=this.checkJumpRowCol(F,B),E,C,G;F=D.row;B=D.col;E=this.images.small[F][B];if(this.isFullScreen&&!(l&&this.useMultiBackground&&this.imageQueue.fullscreen.length)&&this.images.fullscreen[F]&&this.images.fullscreen[F][B]&&this.images.fullscreen[F][B].loaded){E=this.images.fullscreen[F][B]}
if(!E.loaded){return}
if(u.browser.features.canvas){this.ctxDraw(E.cachedObject)}else{this.imgContext.src=E.url}
this.option("actionspin").call(null,this.o,B);if(this.spinStarted&&(!this.lastFrame||this.lastFrame.row!=F||this.lastFrame.col!=B)){this.option("onspin").call(null,this.o);this.spinStarted=false;if(this.hintBox){this.hideHintBox()}}
this.lastFrame=D};w.prototype.ctxDraw=function(D){var C=0,H=this.size.width,F=this.size.height,B=D.naturalWidth,G=D.naturalHeight;if((window.devicePixelRatio||1)>=2&&((B*G)/(H*F)>=2)){H*=2;F*=2}
C=Math.ceil(Math.log(Math.max(D.naturalWidth/H,D.naturalHeight/F))/Math.LN2);this.backstageCanvas.width=B;this.backstageCanvas.height=G;this.backstageCanvas2.width=B;this.backstageCanvas2.height=G;this.backstageCtx.drawImage(D,0,0,B,G);for(var E=C-1;E>0;E--){this.backstageCanvas2.width*=0.5;this.backstageCanvas2.height*=0.5;this.backstageCtx2.drawImage(this.backstageCanvas,0,0,this.backstageCanvas.width,this.backstageCanvas.height,0,0,this.backstageCanvas2.width,this.backstageCanvas2.height);this.backstageCanvas.width*=0.5;this.backstageCanvas.height*=0.5;this.backstageCtx.drawImage(this.backstageCanvas2,0,0,this.backstageCanvas2.width,this.backstageCanvas2.height,0,0,this.backstageCanvas.width,this.backstageCanvas.height)}
this.canvas.width=H;this.canvas.height=F;this.canvasContext.drawImage(this.backstageCanvas,0,0,this.backstageCanvas.width,this.backstageCanvas.height,0,0,this.canvas.width,this.canvas.height)};w.prototype.reflow=function(){var B,D,C;this.boundaries=this.o.jGetRect();this.boxSize=this.wrapper.jGetSize();this.boxBoundaries=this.wrapper.jGetRect();if(this.isFullScreen){D=f(document).jGetSize();C=this.fullScreenSize.width/this.fullScreenSize.height;if(u.browser.trident&&u.browser.backCompat){this.fullScreenBox.jSetCss({width:D.width,height:D.height})}
this.boxSize=this.fullScreenBox.jGetSize();this.boxBoundaries=this.fullScreenBox.jGetRect();this.o.jSetCss(this.adjustFSSize(D))}
B=f(this.o).jGetSize();if(this.isFullScreen&&11==u.browser.ieMode&&window.parent!==window.window){this.boxSize.width=this.fullScreenBox.clientWidth;this.boxSize.height=this.fullScreenBox.clientHeight;B.width=this.o.clientWidth;B.height=this.o.clientHeight}
if(B.width<=0||B.height<=0){return}
B.width-=this.borders.x;B.height-=this.borders.y;this.size=B;if(this.option("magnify")){if((this.size.width*this.size.height)/(this.zoomSize.width*this.zoomSize.height)>0.8){this._hideM&&this._hideM();this.canMagnify=false;this.o.jRemoveClass("zoom-in")}else{this.canMagnify=true;this.o.jAddClass("zoom-in")}}
this.ppf={x:this.size.width/this.option("columns")/Math.pow(this.option("sensitivityX")/50,2),y:this.size.height/this.option("rows")/Math.pow(this.option("sensitivityY")/50,2)};if(this.current){this.jump_(this.current.row,this.current.col)}};w.prototype.spin=function(B){(this._hideM)&&this._hideM();if(this.hintBox){this.hideHintBox()}
this.spinStarted=true;(B||null)?this.jump(this.current.row,this.current.col+B,true,100*(Math.log(Math.abs(B)/Math.log(2)))):this._autospin.play(Number.MAX_VALUE)};w.prototype.rotate=function(B,C){if(!B){B=0}
if(!C){C=0}
if(!B&&!C){return}
if(this._hideM){this._hideM()}
if(this.hintBox){this.hideHintBox()}
this.spinStarted=true;this.jump(this.current.row+C,this.current.col+B,true,100*(Math.log(Math.max(Math.abs(B),Math.abs(C))/Math.log(2))))};w.prototype.rotateX=function(B){this.rotate(B,0)};w.prototype.rotateY=function(B){this.rotate(0,B)};w.prototype.magnify=function(B){(u.defined(B)?B:true)?this._showM&&this._showM():this._hideM&&this._hideM()};w.prototype.stop=function(){var D,B,E,C=window.URL||window.webkitURL||null;if(this._autospin&&this._autospin.frames>0){this._autospin.pause()}
if(this.isFullScreen){this.o.firstChild.jSetCss({});this.o.jSetCss({width:"",height:"100%","max-height":"","max-width":""}).jAppendTo(this.wrapper)}
if(this.fullScreenBox){if(this.fullScreenScrollCallback){f(window).jRemoveEvent("scroll",this.fullScreenScrollCallback)}
if(this.fullScreenScrollCallbackTimer){clearTimeout(this.fullScreenScrollCallbackTimer)}
this.fullScreenBox.kill();this.fullScreenBox=null}
if(this.magnifier&&this.magnifier.div){this.magnifier.div.kill();this.magnifier=null}
if(this.fullscreenIcon){this.fullscreenIcon.kill();this.fullscreenIcon=null}
f(window).jRemoveEvent("resize",this.resizeCallback);clearTimeout(this.reflowTimer);this.reflowTimer=null;this.o.jClearEvents();while(this.o.firstChild!=this.o.lastChild){this.o.removeChild(this.o.lastChild)}
if(this.option("spin")=="drag"){f(document).jRemoveEvent([k.mousemove,"touchmove"],this.mMoveEvent)}
f(document).jRemoveEvent([k.mouseup,k.mouseout,"touchend"],this.mDocUpEvent);this.o.replaceChild(this.oi,this.o.firstChild);this.o.jSetCssProp("background","");this.o.jRemoveClass("zoom-in");if(this.wrapper){this.wrapper.parentNode.replaceChild(this.o,this.wrapper);this.wrapper.kill();this.wrapper=null}
for(D=0,B=this.addedCSS.length;D<B;D++){u.removeCSS("leoimage360-css",this.addedCSS[D])}
f(this.imgCacheBox).jRemove();if(C){for(E in this.imageMap){f(this.imageMap[E]).jEach(function(G){var F=G.img.bgURL.replace(/^url\s*\(\s*["']?/,"").replace(/["']?\s*\)$/,"");if(/^blob\:/.test(F)){C.revokeObjectURL(F)}})}}};w.prototype.enterFullscreen=function(){if(!this._autospin.cancelable||!this.option("fullscreen")){return}
this._hideM&&this._hideM();var E=f(document).jGetSize(),D=f(window).jGetScroll(),C=f(document).jGetFullSize(),B=window.parent!==window.window;if(B){if(C.height<=E.height){D.y=this.boxBoundaries.top}
E.height=Math.min(E.height,this.fullScreenSize.height);if(E.height+D.y>C.height){E.width-=u.browser.scrollbarsWidth}}
if(!this.fullScreenBox){this.fullScreenBox=u.$new("div",{},{display:"block",overflow:"hidden",position:"absolute",zIndex:20000,"text-align":"center","vertical-align":"middle",opacity:1,width:this.boxSize.width,height:this.boxSize.height,top:this.boxBoundaries.top,left:this.boxBoundaries.left}).jAddClass(c+"-fullscreen");if(!u.browser.touchScreen||!u.browser.mobile){this.fullScreenBox.jAddClass("desktop")}
if(u.browser.ieMode){this.fullScreenBox.jAddClass("leoimage-for-ie"+u.browser.ieMode)}
if(u.browser.ieMode&&u.browser.ieMode<8){this.fullScreenBox.append(u.$new("span",null,{display:"inline-block",height:"100%",width:1,"vertical-align":"middle"}))}
this.adjustFSSize=function(I){var F,H,G=this.fullScreenSize.width/this.fullScreenSize.height;F=Math.min(this.fullScreenSize.width,I.width*0.98);H=Math.min(this.fullScreenSize.height,I.height*0.98);if(F/H>G){F=H*G}else{if(F/H<=G){H=F/G}}
return{width:Math.floor(F),height:Math.floor(H)}};if(u.browser.trident&&u.browser.backCompat){this.fullScreenScrollCallback=function(){var F=f(window).jGetScroll(),G=this.fullScreenBox.jGetPosition();this.fullScreenScrollCallbackTimer&&clearTimeout(this.fullScreenScrollCallbackTimer);this.fullScreenScrollCallbackTimer=setTimeout(function(){new u.FX(this.fullScreenBox,{duration:250}).start({top:[G.top,F.y],left:[G.left,F.x]})}.jBind(this),300)}.jBind(this)}
if(this._autospin.cancelable){if(!u.browser.mobile||!u.browser.touchScreen){this.fullScreenBox.jAddEvent(k.mousedown,this.mDownEvent);this.fullScreenBox.jAddEvent(k.mouseup,this.mUpEvent)}
if(u.browser.touchScreen){this.fullScreenBox.jAddEvent("touchstart",this.mDownEvent);this.fullScreenBox.jAddEvent("touchend",this.mUpEvent)}}}
this.fullScreenImage||(this.fullScreenImage=f(this.o.firstChild.cloneNode(false)).jSetCss({position:"relative","z-index":1}));this.fullScreenImage.jSetCss({"margin-top":"-100%","margin-left":"100%"}).jSetOpacity(0);if(E.width/E.height>this.fullScreenSize.width/this.fullScreenSize.height){this.fullScreenImage.jSetCss({width:"auto",height:"98%","max-height":this.fullScreenSize.height,display:"inline-block","vertical-align":"middle"})}else{this.fullScreenImage.jSetCss({width:"98%","max-width":this.fullScreenSize.width,height:"auto",display:"inline-block","vertical-align":"middle"})}
this.fullScreenBox.jAppendTo(document.body).append(this.fullScreenImage);this.fullScreenBox.show();this.o.jSetCss({"max-width":this.fullScreenSize.width,"max-height":this.fullScreenSize.height,width:this.fullScreenImage.jGetSize().width+this.borders.x,height:"auto","background-size":this.fullScreenImage.jGetSize().width+"px "+this.fullScreenImage.jGetSize().height+"px","z-index":2}).jAppendTo(this.fullScreenBox,"top");s.browser.features.fullScreen&&this.fullScreenBox.jSetOpacity(1);s.browser.fullScreen.request(this.fullScreenBox,{onEnter:this.onEnteredFullScreen.jBind(this),onExit:this.onExitFullScreen.jBind(this),fallback:function(){this.fullScreenFX||(this.fullScreenFX=new u.FX(this.fullScreenBox,{duration:400,transition:u.FX.Transition.expoOut,onStart:(function(){this.fullScreenBox.jSetCss({width:this.boxSize.width,height:this.boxSize.height,top:this.boxBoundaries.top,left:this.boxBoundaries.left}).jAppendTo(document.body)}).jBind(this),onAfterRender:(function(F){this.o.jSetCss(this.fullScreenImage.jGetSize());this.size=this.o.jGetSize();this.jump_(this.current.row,this.current.col)}).jBind(this),onComplete:(function(){this.onEnteredFullScreen(true)}).jBind(this)}));this.fullScreenFX.start({width:[this.boxSize.width,E.width],height:[this.boxSize.height,E.height],top:[this.boxBoundaries.top,0+D.y],left:[this.boxBoundaries.left,0+D.x],opacity:[0,1]})}.jBind(this)})};w.prototype.onEnteredFullScreen=function(I){var G,B,E=0,H=0,C=window.parent!==window.window,J,D=this.getCurrentFrame();if(I&&!this.isFullScreen&&!C&&!(u.browser.trident&&u.browser.backCompat)){this.fullScreenBox.jSetCss({display:"block",position:"fixed",top:0,bottom:0,left:0,right:0,width:"auto",height:"auto"})}
this.isFullScreen=true;this.o.firstChild.jSetCss({width:"100%",height:"auto","max-width":this.fullScreenSize.width,"max-height":this.fullScreenSize.height});this.resizeCallback();if(this.firstFullScreenRun){setTimeout((function(){this.progressBar.reset();this.progressBar.changePlaceholder(this.fullScreenBox);this.preloadImages("fullscreen",this.currentFrame.row+1,this.currentFrame.col+1)}).jBind(this),1);this.firstFullScreenRun=false}
this.jump_(this.current.row,this.current.col);if(this.fullScreenScrollCallback){f(window).jAddEvent("scroll",this.fullScreenScrollCallback)}
if(!this.leaveFSButton){this.leaveFSButton=u.$new("button").jAddClass("m360-icon m360-icon-fullscreen-close").jAppendTo(this.fullScreenBox).jAddEvent(k.mousedown,function(K){K.stopDistribution()}).jAddEvent("click",function(L){var K;if(3==L.getButton()){return true}
L.stop();if(K=this.fullScreenBox.jFetch("fullscreen:pseudo:event:keydown")){u.doc.jRemoveEvent("keydown",K);this.fullScreenBox.jDel("fullscreen:pseudo:event:keydown")}
this.exitFullscreen();return false}.jBindAsEvent(this));u.browser.touchScreen&&this.leaveFSButton.jAddEvent("touchstart",function(K){K.stopDistribution()})}
this.leaveFSButton.show();if(I){var F=function(K){if(K.keyCode==27){u.doc.jRemoveEvent("keydown",F);this.exitFullscreen()}}.jBindAsEvent(this);this.fullScreenBox.jStore("fullscreen:pseudo:event:keydown",F);u.doc.jAddEvent("keydown",F);!u.browser.touchScreen&&(this.leaveFSMessage=new u.Message("Press ESC key to leave full-screen",4000,this.fullScreenBox,c+"-message"))}
this.fullscreenIcon.hide()};w.prototype.exitFullscreen=function(){var D=this.fullScreenBox.jGetSize(),C=this.fullScreenBox.jGetRect(),B=this.checkJumpRowCol(this.current.row,this.current.col);this.leaveFSMessage&&this.leaveFSMessage.hide(0);this._hideM&&this._hideM();if(D.width/D.height>this.fullScreenSize.width/this.fullScreenSize.height){this.fullScreenImage.jSetCss({width:"auto",height:"98%","max-height":this.fullScreenSize.height,display:"inline-block","vertical-align":"middle"})}else{this.fullScreenImage.jSetCss({width:"98%","max-width":this.fullScreenSize.width,height:"auto",display:"inline-block","vertical-align":"middle"})}
if(s.browser.fullScreen.capable&&s.browser.fullScreen.enabled()){s.browser.fullScreen.cancel()}else{this.leaveFSButton.hide();this.fullScreenExitFX||(this.fullScreenExitFX=new u.FX(this.fullScreenBox,{duration:300,transition:u.FX.Transition.expoOut,onStart:(function(){this.isFullScreen=false;this.fullScreenBox.jSetCss({position:"absolute"}).jAppendTo(document.body)}).jBind(this),onAfterRender:(function(E){this.o.jSetCss(this.fullScreenImage.jGetSize());this.size=this.o.jGetSize();this.jump_(this.current.row,this.current.col)}).jBind(this),onComplete:(function(){this.onExitFullScreen(true)}).jBind(this)}));this.fullScreenExitFX.start({width:[D.width,this.boxSize.width],height:[D.height,this.boxSize.height],top:[0+C.top,this.boxBoundaries.top],left:[0+C.left,this.boxBoundaries.left],opacity:[1,0.5]})}};w.prototype.onExitFullScreen=function(C){var B,D=this.getCurrentFrame();if(!this.fullScreenBox){return}
this.fullscreenProgressBox&&this.fullscreenProgressBox.jRemove()&&delete this.fullscreenProgressBox;if(this.fullScreenScrollCallback){f(window).jRemoveEvent("scroll",this.fullScreenScrollCallback)}
this.isFullScreen=false;this.o.jAppendTo(this.wrapper).jSetOpacity(0).jSetCss({width:"",height:"","max-height":"","max-width":"100%","z-index":""});this.o.firstChild.jSetCss({width:"",height:"","max-width":"","max-height":""});this.resizeCallback();this.leaveFSButton.hide();this.fullscreenIcon.show();this.o.jSetOpacity(1);this.fullScreenBox.hide()};w.prototype.setupHint=function(){if(!this.hintBox){this.hintBox=u.$new("div",{"class":"m360-hint"});this.hintMessage=u.$new("span",{"class":"m360-hint-message"}).append(document.createTextNode(this.localString(u.browser.touchScreen?"mobile-hint-text":"hint-text"))).jAppendTo(this.hintBox);f(this.hintBox).jAppendTo(this.o)}
if(this.option("mousewheel-step")>0){var B=function(D){this.o.jRemoveEvent("mousescroll",B);this.hideHintBox()}.jBindAsEvent(this);this.o.jAddEvent("mousescroll",B)}
if("hover"===this.option("spin")){var C=function(){this.hideHintBox();this.o.jRemoveEvent("mousemove",C)}.jBindAsEvent(this);this.o.jAddEvent("mousemove",C)}};w.prototype.hideHintBox=function(){if(!this.hintBox||this.hintBox.hidding){return}
this.hintBox.hidding=true;new u.FX(this.hintBox,{duration:200,onComplete:function(){this.hintBox.jRemove();delete this.hintBox}.jBind(this)}).start({opacity:[this.hintBox.jGetCss("opacity"),0]})};w.prototype.getCurrentFrame=function(){var B=this.checkJumpRowCol(this.current.row,this.current.col);B.row++;B.col++;return B};var m=function(){return"mgctlbxN$M360 mgctlbxV$"+"v4.6.5".replace("v","")+" mgctlbxL$"+"m".toUpperCase()+((window.mgctlbx$Pltm&&"string"==u.jTypeOf(window.mgctlbx$Pltm))?" mgctlbxP$"+window.mgctlbx$Pltm.toLowerCase():"")};var j=f([]);var o={version:"v4.6.5 for LeoImageToolbox.com",options:{},lang:{},callbacks:{},start:function(C){var B=null;u.$A((C?[f(C)]:document.byClass("LeoImage360"))).jEach((function(D){if(f(D)){!j.filter(function(E){return E.o===D}).length&&j.push(B=new w(D))}}).jBind(this));return B},stop:function(E){var C,D,B;if(E){(D=r(E))&&(D=j.splice(j.indexOf(D),1))&&D[0].stop()&&(delete D[0]);return}
while(C=j.length){D=j.splice(C-1,1);D[0].stop();delete D[0]}},spin:function(D,C){var B;(B=r(D))&&B.spin(C)},jump:function(D,C){var B=null;if(B=r(D)){B._hideM&&B._hideM();B.hintBox&&B.hideHintBox();B.jump(B.current.row+C,B.current.col)}},pause:function(C){var B;(B=r(C))&&B._autospin.pause()},magnifyOn:function(C){var B;(B=r(C))&&B.magnify(true)},magnifyOff:function(C){var B;(B=r(C))&&B.magnify(false)},fullscreen:function(C){var B;(B=r(C))&&B.enterFullscreen()},getCurrentFrame:function(D){var B,C=null;if(B=r(D)){C=B.getCurrentFrame();C.column=C.col;delete C.col}
return C},setCurrentFrame:function(D,row,col){var B,C=null;if(B=r(D)){B.jump(row,col);return true;}
return false},registerCallback:function(B,C){o.callbacks[B]=C}};function r(D){var C=[],B=null;(D&&(B=f(D)))&&(C=j.filter(function(E){return E.o===B}));return C.length?C[0]:null}
f(document).jAddEvent("domready",function(){m=m();n=u.$new("div",{"class":"m360-tmp-hdn-cont"}).jAppendTo(document.body);o.start()});return o})();/**
 *	Generated by CoffeeScript 1.6.2
 *	jQuery Waypoints - v2.0.3
 *	Copyright (c) 2011-2013 Caleb Troughton
 *	Dual licensed under the MIT license and GPL license.
 *	https://github.com/imakewebthings/jquery-waypoints/blob/master/licenses.txt
 *
 **/
(function() {
    var t = [].indexOf || function(t) {
        for (var e = 0, n = this.length; e < n; e++) {
            if (e in this && this[e] === t)
                return e
        }
        return-1
    }, e = [].slice;
    (function(t, e) {
        if (typeof define === "function" && define.amd) {
            return define("waypoints", ["jquery"], function(n) {
                return e(n, t)
            })
        } else {
            return e(t.jQuery, t)
        }
    })(this, function(n, r) {
        var i, o, l, s, f, u, a, c, h, d, p, y, v, w, g, m;
        i = n(r);
        c = t.call(r, "ontouchstart") >= 0;
        s = {horizontal: {}, vertical: {}};
        f = 1;
        a = {};
        u = "waypoints-context-id";
        p = "resize.waypoints";
        y = "scroll.waypoints";
        v = 1;
        w = "waypoints-waypoint-ids";
        g = "waypoint";
        m = "waypoints";
        o = function() {
            function t(t) {
                var e = this;
                this.$element = t;
                this.element = t[0];
                this.didResize = false;
                this.didScroll = false;
                this.id = "context" + f++;
                this.oldScroll = {x: t.scrollLeft(), y: t.scrollTop()};
                this.waypoints = {horizontal: {}, vertical: {}};
                t.data(u, this.id);
                a[this.id] = this;
                t.bind(y, function() {
                    var t;
                    if (!(e.didScroll || c)) {
                        e.didScroll = true;
                        t = function() {
                            e.doScroll();
                            return e.didScroll = false
                        };
                        return r.setTimeout(t, n[m].settings.scrollThrottle)
                    }
                });
                t.bind(p, function() {
                    var t;
                    if (!e.didResize) {
                        e.didResize = true;
                        t = function() {
                            n[m]("refresh");
                            return e.didResize = false
                        };
                        return r.setTimeout(t, n[m].settings.resizeThrottle)
                    }
                })
            }
            t.prototype.doScroll = function() {
                var t, e = this;
                t = {horizontal: {newScroll: this.$element.scrollLeft(), oldScroll: this.oldScroll.x, forward: "right", backward: "left"}, vertical: {newScroll: this.$element.scrollTop(), oldScroll: this.oldScroll.y, forward: "down", backward: "up"}};
                if (c && (!t.vertical.oldScroll || !t.vertical.newScroll)) {
                    n[m]("refresh")
                }
                n.each(t, function(t, r) {
                    var i, o, l;
                    l = [];
                    o = r.newScroll > r.oldScroll;
                    i = o ? r.forward : r.backward;
                    n.each(e.waypoints[t], function(t, e) {
                        var n, i;
                        if (r.oldScroll < (n = e.offset) && n <= r.newScroll) {
                            return l.push(e)
                        } else if (r.newScroll < (i = e.offset) && i <= r.oldScroll) {
                            return l.push(e)
                        }
                    });
                    l.sort(function(t, e) {
                        return t.offset - e.offset
                    });
                    if (!o) {
                        l.reverse()
                    }
                    return n.each(l, function(t, e) {
                        if (e.options.continuous || t === l.length - 1) {
                            return e.trigger([i])
                        }
                    })
                });
                return this.oldScroll = {x: t.horizontal.newScroll, y: t.vertical.newScroll}
            };
            t.prototype.refresh = function() {
                var t, e, r, i = this;
                r = n.isWindow(this.element);
                e = this.$element.offset();
                this.doScroll();
                t = {horizontal: {contextOffset: r ? 0 : e.left, contextScroll: r ? 0 : this.oldScroll.x, contextDimension: this.$element.width(), oldScroll: this.oldScroll.x, forward: "right", backward: "left", offsetProp: "left"}, vertical: {contextOffset: r ? 0 : e.top, contextScroll: r ? 0 : this.oldScroll.y, contextDimension: r ? n[m]("viewportHeight") : this.$element.height(), oldScroll: this.oldScroll.y, forward: "down", backward: "up", offsetProp: "top"}};
                return n.each(t, function(t, e) {
                    return n.each(i.waypoints[t], function(t, r) {
                        var i, o, l, s, f;
                        i = r.options.offset;
                        l = r.offset;
                        o = n.isWindow(r.element) ? 0 : r.$element.offset()[e.offsetProp];
                        if (n.isFunction(i)) {
                            i = i.apply(r.element)
                        } else if (typeof i === "string") {
                            i = parseFloat(i);
                            if (r.options.offset.indexOf("%") > -1) {
                                i = Math.ceil(e.contextDimension * i / 100)
                            }
                        }
                        r.offset = o - e.contextOffset + e.contextScroll - i;
                        if (r.options.onlyOnScroll && l != null || !r.enabled) {
                            return
                        }
                        if (l !== null && l < (s = e.oldScroll) && s <= r.offset) {
                            return r.trigger([e.backward])
                        } else if (l !== null && l > (f = e.oldScroll) && f >= r.offset) {
                            return r.trigger([e.forward])
                        } else if (l === null && e.oldScroll >= r.offset) {
                            return r.trigger([e.forward])
                        }
                    })
                })
            };
            t.prototype.checkEmpty = function() {
                if (n.isEmptyObject(this.waypoints.horizontal) && n.isEmptyObject(this.waypoints.vertical)) {
                    this.$element.unbind([p, y].join(" "));
                    return delete a[this.id]
                }
            };
            return t
        }();
        l = function() {
            function t(t, e, r) {
                var i, o;
                r = n.extend({}, n.fn[g].defaults, r);
                if (r.offset === "bottom-in-view") {
                    r.offset = function() {
                        var t;
                        t = n[m]("viewportHeight");
                        if (!n.isWindow(e.element)) {
                            t = e.$element.height()
                        }
                        return t - n(this).outerHeight()
                    }
                }
                this.$element = t;
                this.element = t[0];
                this.axis = r.horizontal ? "horizontal" : "vertical";
                this.callback = r.handler;
                this.context = e;
                this.enabled = r.enabled;
                this.id = "waypoints" + v++;
                this.offset = null;
                this.options = r;
                e.waypoints[this.axis][this.id] = this;
                s[this.axis][this.id] = this;
                i = (o = t.data(w)) != null ? o : [];
                i.push(this.id);
                t.data(w, i)
            }
            t.prototype.trigger = function(t) {
                if (!this.enabled) {
                    return
                }
                if (this.callback != null) {
                    this.callback.apply(this.element, t)
                }
                if (this.options.triggerOnce) {
                    return this.destroy()
                }
            };
            t.prototype.disable = function() {
                return this.enabled = false
            };
            t.prototype.enable = function() {
                this.context.refresh();
                return this.enabled = true
            };
            t.prototype.destroy = function() {
                delete s[this.axis][this.id];
                delete this.context.waypoints[this.axis][this.id];
                return this.context.checkEmpty()
            };
            t.getWaypointsByElement = function(t) {
                var e, r;
                r = n(t).data(w);
                if (!r) {
                    return[]
                }
                e = n.extend({}, s.horizontal, s.vertical);
                return n.map(r, function(t) {
                    return e[t]
                })
            };
            return t
        }();
        d = {init: function(t, e) {
                var r;
                if (e == null) {
                    e = {}
                }
                if ((r = e.handler) == null) {
                    e.handler = t
                }
                this.each(function() {
                    var t, r, i, s;
                    t = n(this);
                    i = (s = e.context) != null ? s : n.fn[g].defaults.context;
                    if (!n.isWindow(i)) {
                        i = t.closest(i)
                    }
                    i = n(i);
                    r = a[i.data(u)];
                    if (!r) {
                        r = new o(i)
                    }
                    return new l(t, r, e)
                });
                n[m]("refresh");
                return this
            }, disable: function() {
                return d._invoke(this, "disable")
            }, enable: function() {
                return d._invoke(this, "enable")
            }, destroy: function() {
                return d._invoke(this, "destroy")
            }, prev: function(t, e) {
                return d._traverse.call(this, t, e, function(t, e, n) {
                    if (e > 0) {
                        return t.push(n[e - 1])
                    }
                })
            }, next: function(t, e) {
                return d._traverse.call(this, t, e, function(t, e, n) {
                    if (e < n.length - 1) {
                        return t.push(n[e + 1])
                    }
                })
            }, _traverse: function(t, e, i) {
                var o, l;
                if (t == null) {
                    t = "vertical"
                }
                if (e == null) {
                    e = r
                }
                l = h.aggregate(e);
                o = [];
                this.each(function() {
                    var e;
                    e = n.inArray(this, l[t]);
                    return i(o, e, l[t])
                });
                return this.pushStack(o)
            }, _invoke: function(t, e) {
                t.each(function() {
                    var t;
                    t = l.getWaypointsByElement(this);
                    return n.each(t, function(t, n) {
                        n[e]();
                        return true
                    })
                });
                return this
            }};
        n.fn[g] = function() {
            var t, r;
            r = arguments[0], t = 2 <= arguments.length ? e.call(arguments, 1) : [];
            if (d[r]) {
                return d[r].apply(this, t)
            } else if (n.isFunction(r)) {
                return d.init.apply(this, arguments)
            } else if (n.isPlainObject(r)) {
                return d.init.apply(this, [null, r])
            } else if (!r) {
                return n.error("jQuery Waypoints needs a callback function or handler option.")
            } else {
                return n.error("The " + r + " method does not exist in jQuery Waypoints.")
            }
        };
        n.fn[g].defaults = {context: r, continuous: true, enabled: true, horizontal: false, offset: 0, triggerOnce: false};
        h = {refresh: function() {
                return n.each(a, function(t, e) {
                    return e.refresh()
                })
            }, viewportHeight: function() {
                var t;
                return(t = r.innerHeight) != null ? t : i.height()
            }, aggregate: function(t) {
                var e, r, i;
                e = s;
                if (t) {
                    e = (i = a[n(t).data(u)]) != null ? i.waypoints : void 0
                }
                if (!e) {
                    return[]
                }
                r = {horizontal: [], vertical: []};
                n.each(r, function(t, i) {
                    n.each(e[t], function(t, e) {
                        return i.push(e)
                    });
                    i.sort(function(t, e) {
                        return t.offset - e.offset
                    });
                    r[t] = n.map(i, function(t) {
                        return t.element
                    });
                    return r[t] = n.unique(r[t])
                });
                return r
            }, above: function(t) {
                if (t == null) {
                    t = r
                }
                return h._filter(t, "vertical", function(t, e) {
                    return e.offset <= t.oldScroll.y
                })
            }, below: function(t) {
                if (t == null) {
                    t = r
                }
                return h._filter(t, "vertical", function(t, e) {
                    return e.offset > t.oldScroll.y
                })
            }, left: function(t) {
                if (t == null) {
                    t = r
                }
                return h._filter(t, "horizontal", function(t, e) {
                    return e.offset <= t.oldScroll.x
                })
            }, right: function(t) {
                if (t == null) {
                    t = r
                }
                return h._filter(t, "horizontal", function(t, e) {
                    return e.offset > t.oldScroll.x
                })
            }, enable: function() {
                return h._invoke("enable")
            }, disable: function() {
                return h._invoke("disable")
            }, destroy: function() {
                return h._invoke("destroy")
            }, extendFn: function(t, e) {
                return d[t] = e
            }, _invoke: function(t) {
                var e;
                e = n.extend({}, s.vertical, s.horizontal);
                return n.each(e, function(e, n) {
                    n[t]();
                    return true
                })
            }, _filter: function(t, e, r) {
                var i, o;
                i = a[n(t).data(u)];
                if (!i) {
                    return[]
                }
                o = [];
                n.each(i.waypoints[e], function(t, e) {
                    if (r(i, e)) {
                        return o.push(e)
                    }
                });
                o.sort(function(t, e) {
                    return t.offset - e.offset
                });
                return n.map(o, function(t) {
                    return t.element
                })
            }};
        n[m] = function() {
            var t, n;
            n = arguments[0], t = 2 <= arguments.length ? e.call(arguments, 1) : [];
            if (h[n]) {
                return h[n].apply(null, t)
            } else {
                return h.aggregate.call(null, n)
            }
        };
        n[m].settings = {resizeThrottle: 100, scrollThrottle: 30};
        return i.load(function() {
            return n[m]("refresh")
        })
    })
}).call(this);;/*!
 * Stellar.js v0.6.2
 * http://markdalgleish.com/projects/stellar.js
 *
 * Copyright 2014, Mark Dalgleish
 * This content is released under the MIT license
 * http://markdalgleish.mit-license.org
 */
;(function($,window,document,undefined){var pluginName='stellar',defaults={scrollProperty:'scroll',positionProperty:'position',horizontalScrolling:true,verticalScrolling:true,horizontalOffset:0,verticalOffset:0,responsive:false,parallaxBackgrounds:true,parallaxElements:true,hideDistantElements:true,hideElement:function($elem){$elem.hide();},showElement:function($elem){$elem.show();}},scrollProperty={scroll:{getLeft:function($elem){return $elem.scrollLeft();},setLeft:function($elem,val){$elem.scrollLeft(val);},getTop:function($elem){return $elem.scrollTop();},setTop:function($elem,val){$elem.scrollTop(val);}},position:{getLeft:function($elem){return parseInt($elem.css('left'),10)*-1;},getTop:function($elem){return parseInt($elem.css('top'),10)*-1;}},margin:{getLeft:function($elem){return parseInt($elem.css('margin-left'),10)*-1;},getTop:function($elem){return parseInt($elem.css('margin-top'),10)*-1;}},transform:{getLeft:function($elem){var computedTransform=getComputedStyle($elem[0])[prefixedTransform];return(computedTransform!=='none'?parseInt(computedTransform.match(/(-?[0-9]+)/g)[4],10)*-1:0);},getTop:function($elem){var computedTransform=getComputedStyle($elem[0])[prefixedTransform];return(computedTransform!=='none'?parseInt(computedTransform.match(/(-?[0-9]+)/g)[5],10)*-1:0);}}},positionProperty={position:{setLeft:function($elem,left){$elem.css('left',left);},setTop:function($elem,top){$elem.css('top',top);}},transform:{setPosition:function($elem,left,startingLeft,top,startingTop){$elem[0].style[prefixedTransform]='translate3d('+(left-startingLeft)+'px, '+(top-startingTop)+'px, 0)';}}},vendorPrefix=(function(){var prefixes=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,style=$('script')[0].style,prefix='',prop;for(prop in style){if(prefixes.test(prop)){prefix=prop.match(prefixes)[0];break;}}
if('WebkitOpacity'in style){prefix='Webkit';}
if('KhtmlOpacity'in style){prefix='Khtml';}
return function(property){return prefix+(prefix.length>0?property.charAt(0).toUpperCase()+property.slice(1):property);};}()),prefixedTransform=vendorPrefix('transform'),supportsBackgroundPositionXY=$('<div />',{style:'background:#fff'}).css('background-position-x')!==undefined,setBackgroundPosition=(supportsBackgroundPositionXY?function($elem,x,y){$elem.css({'background-position-x':x,'background-position-y':y});}:function($elem,x,y){$elem.css('background-position',x+' '+y);}),getBackgroundPosition=(supportsBackgroundPositionXY?function($elem){return[$elem.css('background-position-x'),$elem.css('background-position-y')];}:function($elem){return $elem.css('background-position').split(' ');}),requestAnimFrame=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){setTimeout(callback,1000/60);});function Plugin(element,options){this.element=element;this.options=$.extend({},defaults,options);this._defaults=defaults;this._name=pluginName;this.init();}
Plugin.prototype={init:function(){this.options.name=pluginName+'_'+Math.floor(Math.random()*1e9);this._defineElements();this._defineGetters();this._defineSetters();this._handleWindowLoadAndResize();this._detectViewport();this.refresh({firstLoad:true});if(this.options.scrollProperty==='scroll'){this._handleScrollEvent();}else{this._startAnimationLoop();}},_defineElements:function(){if(this.element===document.body)this.element=window;this.$scrollElement=$(this.element);this.$element=(this.element===window?$('body'):this.$scrollElement);this.$viewportElement=(this.options.viewportElement!==undefined?$(this.options.viewportElement):(this.$scrollElement[0]===window||this.options.scrollProperty==='scroll'?this.$scrollElement:this.$scrollElement.parent()));},_defineGetters:function(){var self=this,scrollPropertyAdapter=scrollProperty[self.options.scrollProperty];this._getScrollLeft=function(){return scrollPropertyAdapter.getLeft(self.$scrollElement);};this._getScrollTop=function(){return scrollPropertyAdapter.getTop(self.$scrollElement);};},_defineSetters:function(){var self=this,scrollPropertyAdapter=scrollProperty[self.options.scrollProperty],positionPropertyAdapter=positionProperty[self.options.positionProperty],setScrollLeft=scrollPropertyAdapter.setLeft,setScrollTop=scrollPropertyAdapter.setTop;this._setScrollLeft=(typeof setScrollLeft==='function'?function(val){setScrollLeft(self.$scrollElement,val);}:$.noop);this._setScrollTop=(typeof setScrollTop==='function'?function(val){setScrollTop(self.$scrollElement,val);}:$.noop);this._setPosition=positionPropertyAdapter.setPosition||function($elem,left,startingLeft,top,startingTop){if(self.options.horizontalScrolling){positionPropertyAdapter.setLeft($elem,left,startingLeft);}
if(self.options.verticalScrolling){positionPropertyAdapter.setTop($elem,top,startingTop);}};},_handleWindowLoadAndResize:function(){var self=this,$window=$(window);if(self.options.responsive){$window.bind('load.'+this.name,function(){self.refresh();});}
$window.bind('resize.'+this.name,function(){self._detectViewport();if(self.options.responsive){self.refresh();}});},refresh:function(options){var self=this,oldLeft=self._getScrollLeft(),oldTop=self._getScrollTop();if(!options||!options.firstLoad){this._reset();}
this._setScrollLeft(0);this._setScrollTop(0);this._setOffsets();this._findParticles();this._findBackgrounds();if(options&&options.firstLoad&&/WebKit/.test(navigator.userAgent)){$(window).load(function(){var oldLeft=self._getScrollLeft(),oldTop=self._getScrollTop();self._setScrollLeft(oldLeft+1);self._setScrollTop(oldTop+1);self._setScrollLeft(oldLeft);self._setScrollTop(oldTop);});}
this._setScrollLeft(oldLeft);this._setScrollTop(oldTop);},_detectViewport:function(){var viewportOffsets=this.$viewportElement.offset(),hasOffsets=viewportOffsets!==null&&viewportOffsets!==undefined;this.viewportWidth=this.$viewportElement.width();this.viewportHeight=this.$viewportElement.height();this.viewportOffsetTop=(hasOffsets?viewportOffsets.top:0);this.viewportOffsetLeft=(hasOffsets?viewportOffsets.left:0);},_findParticles:function(){var self=this,scrollLeft=this._getScrollLeft(),scrollTop=this._getScrollTop();if(this.particles!==undefined){for(var i=this.particles.length-1;i>=0;i--){this.particles[i].$element.data('stellar-elementIsActive',undefined);}}
this.particles=[];if(!this.options.parallaxElements)return;this.$element.find('[data-stellar-ratio]').each(function(i){var $this=$(this),horizontalOffset,verticalOffset,positionLeft,positionTop,marginLeft,marginTop,$offsetParent,offsetLeft,offsetTop,parentOffsetLeft=0,parentOffsetTop=0,tempParentOffsetLeft=0,tempParentOffsetTop=0;if(!$this.data('stellar-elementIsActive')){$this.data('stellar-elementIsActive',this);}else if($this.data('stellar-elementIsActive')!==this){return;}
self.options.showElement($this);if(!$this.data('stellar-startingLeft')){$this.data('stellar-startingLeft',$this.css('left'));$this.data('stellar-startingTop',$this.css('top'));}else{$this.css('left',$this.data('stellar-startingLeft'));$this.css('top',$this.data('stellar-startingTop'));}
positionLeft=$this.position().left;positionTop=$this.position().top;marginLeft=($this.css('margin-left')==='auto')?0:parseInt($this.css('margin-left'),10);marginTop=($this.css('margin-top')==='auto')?0:parseInt($this.css('margin-top'),10);offsetLeft=$this.offset().left-marginLeft;offsetTop=$this.offset().top-marginTop;$this.parents().each(function(){var $this=$(this);if($this.data('stellar-offset-parent')===true){parentOffsetLeft=tempParentOffsetLeft;parentOffsetTop=tempParentOffsetTop;$offsetParent=$this;return false;}else{tempParentOffsetLeft+=$this.position().left;tempParentOffsetTop+=$this.position().top;}});horizontalOffset=($this.data('stellar-horizontal-offset')!==undefined?$this.data('stellar-horizontal-offset'):($offsetParent!==undefined&&$offsetParent.data('stellar-horizontal-offset')!==undefined?$offsetParent.data('stellar-horizontal-offset'):self.horizontalOffset));verticalOffset=($this.data('stellar-vertical-offset')!==undefined?$this.data('stellar-vertical-offset'):($offsetParent!==undefined&&$offsetParent.data('stellar-vertical-offset')!==undefined?$offsetParent.data('stellar-vertical-offset'):self.verticalOffset));self.particles.push({$element:$this,$offsetParent:$offsetParent,isFixed:$this.css('position')==='fixed',horizontalOffset:horizontalOffset,verticalOffset:verticalOffset,startingPositionLeft:positionLeft,startingPositionTop:positionTop,startingOffsetLeft:offsetLeft,startingOffsetTop:offsetTop,parentOffsetLeft:parentOffsetLeft,parentOffsetTop:parentOffsetTop,stellarRatio:($this.data('stellar-ratio')!==undefined?$this.data('stellar-ratio'):1),width:$this.outerWidth(true),height:$this.outerHeight(true),isHidden:false});});},_findBackgrounds:function(){var self=this,scrollLeft=this._getScrollLeft(),scrollTop=this._getScrollTop(),$backgroundElements;this.backgrounds=[];if(!this.options.parallaxBackgrounds)return;$backgroundElements=this.$element.find('[data-stellar-background-ratio]');if(this.$element.data('stellar-background-ratio')){$backgroundElements=$backgroundElements.add(this.$element);}
$backgroundElements.each(function(){var $this=$(this),backgroundPosition=getBackgroundPosition($this),horizontalOffset,verticalOffset,positionLeft,positionTop,marginLeft,marginTop,offsetLeft,offsetTop,$offsetParent,parentOffsetLeft=0,parentOffsetTop=0,tempParentOffsetLeft=0,tempParentOffsetTop=0;if(!$this.data('stellar-backgroundIsActive')){$this.data('stellar-backgroundIsActive',this);}else if($this.data('stellar-backgroundIsActive')!==this){return;}
if(!$this.data('stellar-backgroundStartingLeft')){$this.data('stellar-backgroundStartingLeft',backgroundPosition[0]);$this.data('stellar-backgroundStartingTop',backgroundPosition[1]);}else{setBackgroundPosition($this,$this.data('stellar-backgroundStartingLeft'),$this.data('stellar-backgroundStartingTop'));}
marginLeft=($this.css('margin-left')==='auto')?0:parseInt($this.css('margin-left'),10);marginTop=($this.css('margin-top')==='auto')?0:parseInt($this.css('margin-top'),10);offsetLeft=$this.offset().left-marginLeft-scrollLeft;offsetTop=$this.offset().top-marginTop-scrollTop;$this.parents().each(function(){var $this=$(this);if($this.data('stellar-offset-parent')===true){parentOffsetLeft=tempParentOffsetLeft;parentOffsetTop=tempParentOffsetTop;$offsetParent=$this;return false;}else{tempParentOffsetLeft+=$this.position().left;tempParentOffsetTop+=$this.position().top;}});horizontalOffset=($this.data('stellar-horizontal-offset')!==undefined?$this.data('stellar-horizontal-offset'):($offsetParent!==undefined&&$offsetParent.data('stellar-horizontal-offset')!==undefined?$offsetParent.data('stellar-horizontal-offset'):self.horizontalOffset));verticalOffset=($this.data('stellar-vertical-offset')!==undefined?$this.data('stellar-vertical-offset'):($offsetParent!==undefined&&$offsetParent.data('stellar-vertical-offset')!==undefined?$offsetParent.data('stellar-vertical-offset'):self.verticalOffset));self.backgrounds.push({$element:$this,$offsetParent:$offsetParent,isFixed:$this.css('background-attachment')==='fixed',horizontalOffset:horizontalOffset,verticalOffset:verticalOffset,startingValueLeft:backgroundPosition[0],startingValueTop:backgroundPosition[1],startingBackgroundPositionLeft:(isNaN(parseInt(backgroundPosition[0],10))?0:parseInt(backgroundPosition[0],10)),startingBackgroundPositionTop:(isNaN(parseInt(backgroundPosition[1],10))?0:parseInt(backgroundPosition[1],10)),startingPositionLeft:$this.position().left,startingPositionTop:$this.position().top,startingOffsetLeft:offsetLeft,startingOffsetTop:offsetTop,parentOffsetLeft:parentOffsetLeft,parentOffsetTop:parentOffsetTop,stellarRatio:($this.data('stellar-background-ratio')===undefined?1:$this.data('stellar-background-ratio'))});});},_reset:function(){var particle,startingPositionLeft,startingPositionTop,background,i;for(i=this.particles.length-1;i>=0;i--){particle=this.particles[i];startingPositionLeft=particle.$element.data('stellar-startingLeft');startingPositionTop=particle.$element.data('stellar-startingTop');this._setPosition(particle.$element,startingPositionLeft,startingPositionLeft,startingPositionTop,startingPositionTop);this.options.showElement(particle.$element);particle.$element.data('stellar-startingLeft',null).data('stellar-elementIsActive',null).data('stellar-backgroundIsActive',null);}
for(i=this.backgrounds.length-1;i>=0;i--){background=this.backgrounds[i];background.$element.data('stellar-backgroundStartingLeft',null).data('stellar-backgroundStartingTop',null);setBackgroundPosition(background.$element,background.startingValueLeft,background.startingValueTop);}},destroy:function(){this._reset();this.$scrollElement.unbind('resize.'+this.name).unbind('scroll.'+this.name);this._animationLoop=$.noop;$(window).unbind('load.'+this.name).unbind('resize.'+this.name);},_setOffsets:function(){var self=this,$window=$(window);$window.unbind('resize.horizontal-'+this.name).unbind('resize.vertical-'+this.name);if(typeof this.options.horizontalOffset==='function'){this.horizontalOffset=this.options.horizontalOffset();$window.bind('resize.horizontal-'+this.name,function(){self.horizontalOffset=self.options.horizontalOffset();});}else{this.horizontalOffset=this.options.horizontalOffset;}
if(typeof this.options.verticalOffset==='function'){this.verticalOffset=this.options.verticalOffset();$window.bind('resize.vertical-'+this.name,function(){self.verticalOffset=self.options.verticalOffset();});}else{this.verticalOffset=this.options.verticalOffset;}},_repositionElements:function(){var scrollLeft=this._getScrollLeft(),scrollTop=this._getScrollTop(),horizontalOffset,verticalOffset,particle,fixedRatioOffset,background,bgLeft,bgTop,isVisibleVertical=true,isVisibleHorizontal=true,newPositionLeft,newPositionTop,newOffsetLeft,newOffsetTop,i;if(this.currentScrollLeft===scrollLeft&&this.currentScrollTop===scrollTop&&this.currentWidth===this.viewportWidth&&this.currentHeight===this.viewportHeight){return;}else{this.currentScrollLeft=scrollLeft;this.currentScrollTop=scrollTop;this.currentWidth=this.viewportWidth;this.currentHeight=this.viewportHeight;}
for(i=this.particles.length-1;i>=0;i--){particle=this.particles[i];fixedRatioOffset=(particle.isFixed?1:0);if(this.options.horizontalScrolling){newPositionLeft=(scrollLeft+particle.horizontalOffset+this.viewportOffsetLeft+particle.startingPositionLeft-particle.startingOffsetLeft+particle.parentOffsetLeft)*-(particle.stellarRatio+fixedRatioOffset-1)+particle.startingPositionLeft;newOffsetLeft=newPositionLeft-particle.startingPositionLeft+particle.startingOffsetLeft;}else{newPositionLeft=particle.startingPositionLeft;newOffsetLeft=particle.startingOffsetLeft;}
if(this.options.verticalScrolling){newPositionTop=(scrollTop+particle.verticalOffset+this.viewportOffsetTop+particle.startingPositionTop-particle.startingOffsetTop+particle.parentOffsetTop)*-(particle.stellarRatio+fixedRatioOffset-1)+particle.startingPositionTop;newOffsetTop=newPositionTop-particle.startingPositionTop+particle.startingOffsetTop;}else{newPositionTop=particle.startingPositionTop;newOffsetTop=particle.startingOffsetTop;}
if(this.options.hideDistantElements){isVisibleHorizontal=!this.options.horizontalScrolling||newOffsetLeft+particle.width>(particle.isFixed?0:scrollLeft)&&newOffsetLeft<(particle.isFixed?0:scrollLeft)+this.viewportWidth+this.viewportOffsetLeft;isVisibleVertical=!this.options.verticalScrolling||newOffsetTop+particle.height>(particle.isFixed?0:scrollTop)&&newOffsetTop<(particle.isFixed?0:scrollTop)+this.viewportHeight+this.viewportOffsetTop;}
if(isVisibleHorizontal&&isVisibleVertical){if(particle.isHidden){this.options.showElement(particle.$element);particle.isHidden=false;}
this._setPosition(particle.$element,newPositionLeft,particle.startingPositionLeft,newPositionTop,particle.startingPositionTop);}else{if(!particle.isHidden){this.options.hideElement(particle.$element);particle.isHidden=true;}}}
for(i=this.backgrounds.length-1;i>=0;i--){background=this.backgrounds[i];fixedRatioOffset=(background.isFixed?0:1);bgLeft=(this.options.horizontalScrolling?(scrollLeft+background.horizontalOffset-this.viewportOffsetLeft-background.startingOffsetLeft+background.parentOffsetLeft-background.startingBackgroundPositionLeft)*(fixedRatioOffset-background.stellarRatio)+'px':background.startingValueLeft);bgTop=(this.options.verticalScrolling?(scrollTop+background.verticalOffset-this.viewportOffsetTop-background.startingOffsetTop+background.parentOffsetTop-background.startingBackgroundPositionTop)*(fixedRatioOffset-background.stellarRatio)+'px':background.startingValueTop);setBackgroundPosition(background.$element,bgLeft,bgTop);}},_handleScrollEvent:function(){var self=this,ticking=false;var update=function(){self._repositionElements();ticking=false;};var requestTick=function(){if(!ticking){requestAnimFrame(update);ticking=true;}};this.$scrollElement.bind('scroll.'+this.name,requestTick);requestTick();},_startAnimationLoop:function(){var self=this;this._animationLoop=function(){requestAnimFrame(self._animationLoop);self._repositionElements();};this._animationLoop();}};$.fn[pluginName]=function(options){var args=arguments;if(options===undefined||typeof options==='object'){return this.each(function(){if(!$.data(this,'plugin_'+pluginName)){$.data(this,'plugin_'+pluginName,new Plugin(this,options));}});}else if(typeof options==='string'&&options[0]!=='_'&&options!=='init'){return this.each(function(){var instance=$.data(this,'plugin_'+pluginName);if(instance instanceof Plugin&&typeof instance[options]==='function'){instance[options].apply(instance,Array.prototype.slice.call(args,1));}
if(options==='destroy'){$.data(this,'plugin_'+pluginName,null);}});}};$[pluginName]=function(options){var $window=$(window);return $window.stellar.apply($window,Array.prototype.slice.call(arguments,0));};$[pluginName].scrollProperty=scrollProperty;$[pluginName].positionProperty=positionProperty;window.Stellar=Plugin;}(jQuery,this,document));;if(typeof Object.create!=="function"){Object.create=function(obj){function F(){}
F.prototype=obj;return new F();};}
(function($,window,document){var Carousel={init:function(options,el){var base=this;base.$elem=$(el);base.options=$.extend({},$.fn.owlCarousel.options,base.$elem.data(),options);base.userOptions=options;base.loadContent();},loadContent:function(){var base=this,url;function getData(data){var i,content="";if(typeof base.options.jsonSuccess==="function"){base.options.jsonSuccess.apply(this,[data]);}else{for(i in data.owl){if(data.owl.hasOwnProperty(i)){content+=data.owl[i].item;}}
base.$elem.html(content);}
base.logIn();}
if(typeof base.options.beforeInit==="function"){base.options.beforeInit.apply(this,[base.$elem]);}
if(typeof base.options.jsonPath==="string"){url=base.options.jsonPath;$.getJSON(url,getData);}else{base.logIn();}},logIn:function(){var base=this;base.$elem.data({"owl-originalStyles":base.$elem.attr("style"),"owl-originalClasses":base.$elem.attr("class")});base.orignalItems=base.options.items;base.checkBrowser();base.wrapperWidth=0;base.checkVisible=null;base.setVars();},setVars:function(){var base=this;if(base.$elem.children().length===0){return false;}
base.baseClass();base.eventTypes();base.$userItems=base.$elem.children();base.itemsAmount=base.$userItems.length;base.wrapItems();base.$owlItems=base.$elem.find(".owl-item");base.$owlWrapper=base.$elem.find(".owl-wrapper");base.playDirection="next";base.prevItem=0;base.prevArr=[0];base.currentItem=0;base.customEvents();base.onStartup();},onStartup:function(){var base=this;base.updateItems();base.calculateAll();base.buildControls();base.updateControls();base.response();base.moveEvents();base.stopOnHover();base.owlStatus();if(base.options.transitionStyle!==false){base.transitionTypes(base.options.transitionStyle);}
if(base.options.autoPlay===true){base.options.autoPlay=5000;}
base.play();base.$elem.find(".owl-wrapper").css("display","block");if(!base.$elem.is(":visible")){base.watchVisibility();}else{}
base.onstartup=false;base.eachMoveUpdate();if(typeof base.options.afterInit==="function"){base.options.afterInit.apply(this,[base.$elem]);}},eachMoveUpdate:function(){var base=this;if(base.options.lazyLoad===true){base.lazyLoad();}
if(base.options.autoHeight===true){base.autoHeight();}
base.onVisibleItems();if(typeof base.options.afterAction==="function"){base.options.afterAction.apply(this,[base.$elem]);}},updateVars:function(){var base=this;if(typeof base.options.beforeUpdate==="function"){base.options.beforeUpdate.apply(this,[base.$elem]);}
base.watchVisibility();base.updateItems();base.calculateAll();base.updatePosition();base.updateControls();base.eachMoveUpdate();if(typeof base.options.afterUpdate==="function"){base.options.afterUpdate.apply(this,[base.$elem]);}},reload:function(){var base=this;window.setTimeout(function(){base.updateVars();},0);},watchVisibility:function(){var base=this;if(base.$elem.is(":visible")===false){window.clearInterval(base.autoPlayInterval);window.clearInterval(base.checkVisible);}else{return false;}
base.checkVisible=window.setInterval(function(){if(base.$elem.is(":visible")){base.reload();window.clearInterval(base.checkVisible);}},500);},wrapItems:function(){var base=this;base.$userItems.wrapAll("<div class=\"owl-wrapper\">").wrap("<div class=\"owl-item\"></div>");base.$elem.find(".owl-wrapper").wrap("<div class=\"owl-wrapper-outer\">");base.wrapperOuter=base.$elem.find(".owl-wrapper-outer");},baseClass:function(){var base=this,hasBaseClass=base.$elem.hasClass(base.options.baseClass),hasThemeClass=base.$elem.hasClass(base.options.theme);if(!hasBaseClass){base.$elem.addClass(base.options.baseClass);}
if(!hasThemeClass){base.$elem.addClass(base.options.theme);}},updateItems:function(){var base=this,width,i;if(base.options.responsive===false){return false;}
if(base.options.singleItem===true){base.options.items=base.orignalItems=1;base.options.itemsCustom=false;base.options.itemsDesktop=false;base.options.itemsDesktopSmall=false;base.options.itemsTablet=false;base.options.itemsTabletSmall=false;base.options.itemsMobile=false;return false;}
width=$(base.options.responsiveBaseWidth).width();if(width>(base.options.itemsDesktop[0]||base.orignalItems)){base.options.items=base.orignalItems;}
if(base.options.itemsCustom!==false){base.options.itemsCustom.sort(function(a,b){return a[0]-b[0];});for(i=0;i<base.options.itemsCustom.length;i+=1){if(base.options.itemsCustom[i][0]<=width){base.options.items=base.options.itemsCustom[i][1];}}}else{if(width<=base.options.itemsDesktop[0]&&base.options.itemsDesktop!==false){base.options.items=base.options.itemsDesktop[1];}
if(width<=base.options.itemsDesktopSmall[0]&&base.options.itemsDesktopSmall!==false){base.options.items=base.options.itemsDesktopSmall[1];}
if(width<=base.options.itemsTablet[0]&&base.options.itemsTablet!==false){base.options.items=base.options.itemsTablet[1];}
if(width<=base.options.itemsTabletSmall[0]&&base.options.itemsTabletSmall!==false){base.options.items=base.options.itemsTabletSmall[1];}
if(width<=base.options.itemsMobile[0]&&base.options.itemsMobile!==false){base.options.items=base.options.itemsMobile[1];}}
if(base.options.items>base.itemsAmount&&base.options.itemsScaleUp===true){base.options.items=base.itemsAmount;}},response:function(){var base=this,smallDelay,lastWindowWidth;if(base.options.responsive!==true){return false;}
lastWindowWidth=$(window).width();base.resizer=function(){if($(window).width()!==lastWindowWidth){if(base.options.autoPlay!==false){window.clearInterval(base.autoPlayInterval);}
window.clearTimeout(smallDelay);smallDelay=window.setTimeout(function(){lastWindowWidth=$(window).width();base.updateVars();},base.options.responsiveRefreshRate);}};$(window).resize(base.resizer);},updatePosition:function(){var base=this;base.jumpTo(base.currentItem);if(base.options.autoPlay!==false){base.checkAp();}},appendItemsSizes:function(){var base=this,roundPages=0,lastItem=base.itemsAmount-base.options.items;base.$owlItems.each(function(index){var $this=$(this);$this.css({"width":base.itemWidth}).data("owl-item",Number(index));if(index%base.options.items===0||index===lastItem){if(!(index>lastItem)){roundPages+=1;}}
$this.data("owl-roundPages",roundPages);});},appendWrapperSizes:function(){var base=this,width=base.$owlItems.length*base.itemWidth,cssObj;base.options['direction']=="rtl"?cssObj={"right":0,direction:"rtl"}:cssObj={"left":0};base.$owlWrapper.css({"width":width*2});base.appendItemsSizes();},calculateAll:function(){var base=this;base.calculateWidth();base.appendWrapperSizes();base.loops();base.max();},calculateWidth:function(){var base=this;base.itemWidth=Math.round(base.$elem.width()/base.options.items);},max:function(){var base=this,maximum=((base.itemsAmount*base.itemWidth)-base.options.items*base.itemWidth)*-1;if(base.options.items>base.itemsAmount){base.maximumItem=0;maximum=0;base.maximumPixels=0;}else{base.maximumItem=base.itemsAmount-base.options.items;base.maximumPixels=maximum;}
return maximum;},min:function(){return 0;},loops:function(){var base=this,prev=0,elWidth=0,i,item,roundPageNum;base.positionsInArray=[0];base.pagesInArray=[];for(i=0;i<base.itemsAmount;i+=1){elWidth+=base.itemWidth;base.positionsInArray.push(-elWidth);if(base.options.scrollPerPage===true){item=$(base.$owlItems[i]);roundPageNum=item.data("owl-roundPages");if(roundPageNum!==prev){base.pagesInArray[prev]=base.positionsInArray[i];prev=roundPageNum;}}}},buildControls:function(){var base=this;if(base.options.navigation===true||base.options.pagination===true){base.owlControls=$("<div class=\"owl-controls\"/>").toggleClass("clickable",!base.browser.isTouch).appendTo(base.$elem);}
if(base.options.pagination===true){base.buildPagination();}
if(base.options.navigation===true){base.buildButtons();}},buildButtons:function(){var base=this,buttonsWrapper=$("<div class=\"owl-buttons\"/>");base.owlControls.append(buttonsWrapper);base.buttonPrev=$("<div/>",{"class":"owl-prev","html":base.options.navigationText[0]||""});base.buttonNext=$("<div/>",{"class":"owl-next","html":base.options.navigationText[1]||""});buttonsWrapper.append(base.buttonPrev).append(base.buttonNext);buttonsWrapper.on("touchstart.owlControls mousedown.owlControls","div[class^=\"owl\"]",function(event){event.preventDefault();});buttonsWrapper.on("touchend.owlControls mouseup.owlControls","div[class^=\"owl\"]",function(event){event.preventDefault();if($(this).hasClass("owl-next")){base.next();}else{base.prev();}});},buildPagination:function(){var base=this;base.paginationWrapper=$("<div class=\"owl-pagination\"/>");base.owlControls.append(base.paginationWrapper);base.paginationWrapper.on("touchend.owlControls mouseup.owlControls",".owl-page",function(event){event.preventDefault();if(Number($(this).data("owl-page"))!==base.currentItem){base.goTo(Number($(this).data("owl-page")),true);}});},updatePagination:function(){var base=this,counter,lastPage,lastItem,i,paginationButton,paginationButtonInner;if(base.options.pagination===false){return false;}
base.paginationWrapper.html("");counter=0;lastPage=base.itemsAmount-base.itemsAmount%base.options.items;for(i=0;i<base.itemsAmount;i+=1){if(i%base.options.items===0){counter+=1;if(lastPage===i){lastItem=base.itemsAmount-base.options.items;}
paginationButton=$("<div/>",{"class":"owl-page"});paginationButtonInner=$("<span></span>",{"text":base.options.paginationNumbers===true?counter:"","class":base.options.paginationNumbers===true?"owl-numbers":""});paginationButton.append(paginationButtonInner);paginationButton.data("owl-page",lastPage===i?lastItem:i);paginationButton.data("owl-roundPages",counter);base.paginationWrapper.append(paginationButton);}}
base.checkPagination();},checkPagination:function(){var base=this;if(base.options.pagination===false){return false;}
base.paginationWrapper.find(".owl-page").each(function(){if($(this).data("owl-roundPages")===$(base.$owlItems[base.currentItem]).data("owl-roundPages")){base.paginationWrapper.find(".owl-page").removeClass("active");$(this).addClass("active");}});},checkNavigation:function(){var base=this;if(base.options.navigation===false){return false;}
if(base.options.rewindNav===false){if(base.currentItem===0&&base.maximumItem===0){base.buttonPrev.addClass("disabled");base.buttonNext.addClass("disabled");}else if(base.currentItem===0&&base.maximumItem!==0){base.buttonPrev.addClass("disabled");base.buttonNext.removeClass("disabled");}else if(base.currentItem===base.maximumItem){base.buttonPrev.removeClass("disabled");base.buttonNext.addClass("disabled");}else if(base.currentItem!==0&&base.currentItem!==base.maximumItem){base.buttonPrev.removeClass("disabled");base.buttonNext.removeClass("disabled");}}},updateControls:function(){var base=this;base.updatePagination();base.checkNavigation();if(base.owlControls){if(base.options.items>=base.itemsAmount){base.owlControls.hide();}else{base.owlControls.show();}}},destroyControls:function(){var base=this;if(base.owlControls){base.owlControls.remove();}},next:function(speed){var base=this;if(base.isTransition){return false;}
base.currentItem+=base.options.scrollPerPage===true?base.options.items:1;if(base.currentItem>base.maximumItem+(base.options.scrollPerPage===true?(base.options.items-1):0)){if(base.options.rewindNav===true){base.currentItem=0;speed="rewind";}else{base.currentItem=base.maximumItem;return false;}}
base.goTo(base.currentItem,speed);},prev:function(speed){var base=this;if(base.isTransition){return false;}
if(base.options.scrollPerPage===true&&base.currentItem>0&&base.currentItem<base.options.items){base.currentItem=0;}else{base.currentItem-=base.options.scrollPerPage===true?base.options.items:1;}
if(base.currentItem<0){if(base.options.rewindNav===true){base.currentItem=base.maximumItem;speed="rewind";}else{base.currentItem=0;return false;}}
base.goTo(base.currentItem,speed);},goTo:function(position,speed,drag){var base=this,goToPixel;if(base.isTransition){return false;}
if(typeof base.options.beforeMove==="function"){base.options.beforeMove.apply(this,[base.$elem]);}
if(position>=base.maximumItem){position=base.maximumItem;}else if(position<=0){position=0;}
base.currentItem=base.owl.currentItem=position;if(base.options.transitionStyle!==false&&drag!=="drag"&&base.options.items===1&&base.browser.support3d===true){base.swapSpeed(0);if(base.browser.support3d===true){base.transition3d(base.positionsInArray[position]);}else{base.css2slide(base.positionsInArray[position],1);}
base.afterGo();base.singleItemTransition();return false;}
goToPixel=base.positionsInArray[position];if(base.browser.support3d===true){base.isCss3Finish=false;if(speed===true){base.swapSpeed("paginationSpeed");window.setTimeout(function(){base.isCss3Finish=true;},base.options.paginationSpeed);}else if(speed==="rewind"){base.swapSpeed(base.options.rewindSpeed);window.setTimeout(function(){base.isCss3Finish=true;},base.options.rewindSpeed);}else{base.swapSpeed("slideSpeed");window.setTimeout(function(){base.isCss3Finish=true;},base.options.slideSpeed);}
base.transition3d(goToPixel);}else{if(speed===true){base.css2slide(goToPixel,base.options.paginationSpeed);}else if(speed==="rewind"){base.css2slide(goToPixel,base.options.rewindSpeed);}else{base.css2slide(goToPixel,base.options.slideSpeed);}}
base.afterGo();},jumpTo:function(position){var base=this;if(typeof base.options.beforeMove==="function"){base.options.beforeMove.apply(this,[base.$elem]);}
if(position>=base.maximumItem||position===-1){position=base.maximumItem;}else if(position<=0){position=0;}
base.swapSpeed(0);if(base.browser.support3d===true){base.transition3d(base.positionsInArray[position]);}else{base.css2slide(base.positionsInArray[position],1);}
base.currentItem=base.owl.currentItem=position;base.afterGo();},afterGo:function(){var base=this;base.prevArr.push(base.currentItem);base.prevItem=base.owl.prevItem=base.prevArr[base.prevArr.length-2];base.prevArr.shift(0);if(base.prevItem!==base.currentItem){base.checkPagination();base.checkNavigation();base.eachMoveUpdate();if(base.options.autoPlay!==false){base.checkAp();}}
if(typeof base.options.afterMove==="function"&&base.prevItem!==base.currentItem){base.options.afterMove.apply(this,[base.$elem]);}},stop:function(){var base=this;base.apStatus="stop";window.clearInterval(base.autoPlayInterval);},checkAp:function(){var base=this;if(base.apStatus!=="stop"){base.play();}},play:function(){var base=this;base.apStatus="play";if(base.options.autoPlay===false){return false;}
window.clearInterval(base.autoPlayInterval);base.autoPlayInterval=window.setInterval(function(){base.next(true);},base.options.autoPlay);},swapSpeed:function(action){var base=this;if(action==="slideSpeed"){base.$owlWrapper.css(base.addCssSpeed(base.options.slideSpeed));}else if(action==="paginationSpeed"){base.$owlWrapper.css(base.addCssSpeed(base.options.paginationSpeed));}else if(typeof action!=="string"){base.$owlWrapper.css(base.addCssSpeed(action));}},addCssSpeed:function(speed){return{"-webkit-transition":"all "+speed+"ms ease","-moz-transition":"all "+speed+"ms ease","-o-transition":"all "+speed+"ms ease","transition":"all "+speed+"ms ease"};},removeTransition:function(){return{"-webkit-transition":"","-moz-transition":"","-o-transition":"","transition":""};},doTranslate:function(pixels){var base=this;base.options['direction']=="rtl"?pixels=-pixels:pixels=pixels;return{"-webkit-transform":"translate3d("+pixels+"px, 0px, 0px)","-moz-transform":"translate3d("+pixels+"px, 0px, 0px)","-o-transform":"translate3d("+pixels+"px, 0px, 0px)","-ms-transform":"translate3d("+pixels+"px, 0px, 0px)","transform":"translate3d("+pixels+"px, 0px,0px)"};},transition3d:function(value){var base=this;base.$owlWrapper.css(base.doTranslate(value));},css2move:function(value){var base=this,cssObj;base.options['direction']=="rtl"?cssObj={"right":value}:cssObj={"left":value};base.$owlWrapper.css(cssObj);},css2slide:function(value,speed){var base=this,cssObj;base.options['direction']=="rtl"?cssObj={"right":value}:cssObj={"left":value};base.isCssFinish=false;base.$owlWrapper.stop(true,true).animate(cssObj,{duration:speed||base.options.slideSpeed,complete:function(){base.isCssFinish=true;}});},checkBrowser:function(){var base=this,translate3D="translate3d(0px, 0px, 0px)",tempElem=document.createElement("div"),regex,asSupport,support3d,isTouch;tempElem.style.cssText="  -moz-transform:"+translate3D+"; -ms-transform:"+translate3D+"; -o-transform:"+translate3D+"; -webkit-transform:"+translate3D+"; transform:"+translate3D;regex=/translate3d\(0px, 0px, 0px\)/g;asSupport=tempElem.style.cssText.match(regex);support3d=(asSupport!==null&&asSupport.length===1);isTouch="ontouchstart"in window||window.navigator.msMaxTouchPoints;base.browser={"support3d":support3d,"isTouch":isTouch};},moveEvents:function(){var base=this;if(base.options.mouseDrag!==false||base.options.touchDrag!==false){base.gestures();base.disabledEvents();}},eventTypes:function(){var base=this,types=["s","e","x"];base.ev_types={};if(base.options.mouseDrag===true&&base.options.touchDrag===true){types=["touchstart.owl mousedown.owl","touchmove.owl mousemove.owl","touchend.owl touchcancel.owl mouseup.owl"];}else if(base.options.mouseDrag===false&&base.options.touchDrag===true){types=["touchstart.owl","touchmove.owl","touchend.owl touchcancel.owl"];}else if(base.options.mouseDrag===true&&base.options.touchDrag===false){types=["mousedown.owl","mousemove.owl","mouseup.owl"];}
base.ev_types.start=types[0];base.ev_types.move=types[1];base.ev_types.end=types[2];},disabledEvents:function(){var base=this;base.$elem.on("dragstart.owl",function(event){event.preventDefault();});base.$elem.on("mousedown.disableTextSelect",function(e){});},gestures:function(){var base=this,locals={offsetX:0,offsetY:0,baseElWidth:0,relativePos:0,position:null,minSwipe:null,maxSwipe:null,sliding:null,dargging:null,targetElement:null};base.isCssFinish=true;function getTouches(event){if(event.touches!==undefined){return{x:event.touches[0].pageX,y:event.touches[0].pageY};}
if(event.touches===undefined){if(event.pageX!==undefined){return{x:event.pageX,y:event.pageY};}
if(event.pageX===undefined){return{x:event.clientX,y:event.clientY};}}}
function swapEvents(type){if(type==="on"){$(document).on(base.ev_types.move,dragMove);$(document).on(base.ev_types.end,dragEnd);}else if(type==="off"){$(document).off(base.ev_types.move);$(document).off(base.ev_types.end);}}
function dragStart(event){var ev=event.originalEvent||event||window.event,position;if(ev.which===3){return false;}
if(base.itemsAmount<=base.options.items){return;}
if(base.isCssFinish===false&&!base.options.dragBeforeAnimFinish){return false;}
if(base.isCss3Finish===false&&!base.options.dragBeforeAnimFinish){return false;}
if(base.options.autoPlay!==false){window.clearInterval(base.autoPlayInterval);}
if(base.browser.isTouch!==true&&!base.$owlWrapper.hasClass("grabbing")){base.$owlWrapper.addClass("grabbing");}
base.newPosX=0;base.newRelativeX=0;$(this).css(base.removeTransition());position=$(this).position();if(base.options['direction']=="rtl"){positionRight=base.$owlItems.eq(0).width()*base.currentItem;locals.relativePos=positionRight;locals.offsetX=-getTouches(ev).x+positionRight;}
else{locals.relativePos=position.left;locals.offsetX=getTouches(ev).x-position.left;}
locals.offsetY=getTouches(ev).y-position.top;swapEvents("on");locals.sliding=false;locals.targetElement=ev.target||ev.srcElement;}
function dragMove(event){var ev=event.originalEvent||event||window.event,minSwipe;if(base.options['direction']=="rtl"){base.newPosX=-getTouches(ev).x-locals.offsetX;base.newPosY=getTouches(ev).y-locals.offsetY;base.newRelativeX=base.newPosX+locals.relativePos;}
else{base.newPosX=getTouches(ev).x-locals.offsetX;base.newPosY=getTouches(ev).y-locals.offsetY;base.newRelativeX=base.newPosX-locals.relativePos;}
if(typeof base.options.startDragging==="function"&&locals.dragging!==true&&base.newRelativeX!==0){locals.dragging=true;base.options.startDragging.apply(base,[base.$elem]);}
if((base.newRelativeX>8||base.newRelativeX<-8)&&(base.browser.isTouch===true)){if(ev.preventDefault!==undefined){ev.preventDefault();}else{ev.returnValue=false;}
locals.sliding=true;}
if((base.newPosY>10||base.newPosY<-10)&&locals.sliding===false){$(document).off("touchmove.owl");}
minSwipe=function(){return base.newRelativeX/5;};maxSwipe=function(){return base.maximumPixels+base.newRelativeX/5;};base.newPosX=Math.max(Math.min(base.newPosX,minSwipe()),maxSwipe());if(base.browser.support3d===true){base.transition3d(base.newPosX);}else{base.css2move(base.newPosX);}}
function dragEnd(event){var ev=event.originalEvent||event||window.event,newPosition,handlers,owlStopEvent;ev.target=ev.target||ev.srcElement;locals.dragging=false;if(base.browser.isTouch!==true){base.$owlWrapper.removeClass("grabbing");}
if(base.options['direction']=="rtl"){if(base.newRelativeX<0){base.dragDirection=base.owl.dragDirection="right";}
else{base.dragDirection=base.owl.dragDirection="left";}}
else{if(base.newRelativeX<0){base.dragDirection=base.owl.dragDirection="left";}
else{base.dragDirection=base.owl.dragDirection="right";}}
if(base.newRelativeX!==0){newPosition=base.getNewPosition();base.goTo(newPosition,false,"drag");if(locals.targetElement===ev.target&&base.browser.isTouch!==true){$(ev.target).on("click.disable",function(ev){ev.stopImmediatePropagation();ev.stopPropagation();ev.preventDefault();$(ev.target).off("click.disable");});handlers=$._data(ev.target,"events").click;owlStopEvent=handlers.pop();handlers.splice(0,0,owlStopEvent);}}
swapEvents("off");}
base.$elem.on(base.ev_types.start,".owl-wrapper",dragStart);},getNewPosition:function(){var base=this,newPosition=base.closestItem();if(newPosition>base.maximumItem){base.currentItem=base.maximumItem;newPosition=base.maximumItem;}else if(base.newPosX>=0){newPosition=0;base.currentItem=0;}
return newPosition;},closestItem:function(){var base=this,array=base.options.scrollPerPage===true?base.pagesInArray:base.positionsInArray,goal=base.newPosX,closest=null;$.each(array,function(i,v){if(goal-(base.itemWidth/20)>array[i+1]&&goal-(base.itemWidth/20)<v&&base.moveDirection()==="left"){closest=v;if(base.options.scrollPerPage===true){base.currentItem=$.inArray(closest,base.positionsInArray);}else{base.currentItem=i;}}else if(goal+(base.itemWidth/20)<v&&goal+(base.itemWidth/20)>(array[i+1]||array[i]-base.itemWidth)&&base.moveDirection()==="right"){if(base.options.scrollPerPage===true){closest=array[i+1]||array[array.length-1];base.currentItem=$.inArray(closest,base.positionsInArray);}else{closest=array[i+1];base.currentItem=i+1;}}});return base.currentItem;},moveDirection:function(){var base=this,direction;if(base.newRelativeX<0){direction="right";base.playDirection="next";}else{direction="left";base.playDirection="prev";}
return direction;},customEvents:function(){var base=this;base.$elem.on("owl.next",function(){base.next();});base.$elem.on("owl.prev",function(){base.prev();});base.$elem.on("owl.play",function(event,speed){base.options.autoPlay=speed;base.play();base.hoverStatus="play";});base.$elem.on("owl.stop",function(){base.stop();base.hoverStatus="stop";});base.$elem.on("owl.goTo",function(event,item){base.goTo(item);});base.$elem.on("owl.jumpTo",function(event,item){base.jumpTo(item);});},stopOnHover:function(){var base=this;if(base.options.stopOnHover===true&&base.browser.isTouch!==true&&base.options.autoPlay!==false){base.$elem.on("mouseover",function(){base.stop();});base.$elem.on("mouseout",function(){if(base.hoverStatus!=="stop"){base.play();}});}},lazyLoad:function(){var base=this,i,$item,itemNumber,$lazyImg,follow;if(base.options.lazyLoad===false){return false;}
for(i=0;i<base.itemsAmount;i+=1){$item=$(base.$owlItems[i]);if($item.data("owl-loaded")==="loaded"){continue;}
itemNumber=$item.data("owl-item");$lazyImg=$item.find(".lazyOwl");if(typeof $lazyImg.data("src")!=="string"){$item.data("owl-loaded","loaded");continue;}
if($item.data("owl-loaded")===undefined){$lazyImg.hide();$item.addClass("loading").data("owl-loaded","checked");}
if(base.options.lazyFollow===true){follow=itemNumber>=base.currentItem;}else{follow=true;}
if(follow&&itemNumber<base.currentItem+base.options.items&&$lazyImg.length){$lazyImg.each(function(){base.lazyPreload($item,$(this));});}}},lazyPreload:function($item,$lazyImg){var base=this,iterations=0,isBackgroundImg;if($lazyImg.prop("tagName")==="DIV"){$lazyImg.css("background-image","url("+$lazyImg.data("src")+")");isBackgroundImg=true;}else{$lazyImg[0].src=$lazyImg.data("src");}
function showImage(){$item.data("owl-loaded","loaded").removeClass("loading");$lazyImg.removeAttr("data-src");if(base.options.lazyEffect==="fade"){$lazyImg.fadeIn(400);}else{$lazyImg.show();}
if(typeof base.options.afterLazyLoad==="function"){base.options.afterLazyLoad.apply(this,[base.$elem]);}}
function checkLazyImage(){iterations+=1;if(base.completeImg($lazyImg.get(0))||isBackgroundImg===true){showImage();}else if(iterations<=100){window.setTimeout(checkLazyImage,100);}else{showImage();}}
checkLazyImage();},autoHeight:function(){var base=this,$currentimg=$(base.$owlItems[base.currentItem]).find("img"),iterations;function addHeight(){var $currentItem=$(base.$owlItems[base.currentItem]).height();base.wrapperOuter.css("height",$currentItem+"px");if(!base.wrapperOuter.hasClass("autoHeight")){window.setTimeout(function(){base.wrapperOuter.addClass("autoHeight");},0);}}
function checkImage(){iterations+=1;if(base.completeImg($currentimg.get(0))){addHeight();}else if(iterations<=100){window.setTimeout(checkImage,100);}else{base.wrapperOuter.css("height","");}}
if($currentimg.get(0)!==undefined){iterations=0;checkImage();}else{addHeight();}},completeImg:function(img){var naturalWidthType;if(!img.complete){return false;}
naturalWidthType=typeof img.naturalWidth;if(naturalWidthType!=="undefined"&&img.naturalWidth===0){return false;}
return true;},onVisibleItems:function(){var base=this,i;if(base.options.addClassActive===true){base.$owlItems.removeClass("active");}
base.visibleItems=[];for(i=base.currentItem;i<base.currentItem+base.options.items;i+=1){base.visibleItems.push(i);if(base.options.addClassActive===true){$(base.$owlItems[i]).addClass("active");}}
base.owl.visibleItems=base.visibleItems;},transitionTypes:function(className){var base=this;base.outClass="owl-"+className+"-out";base.inClass="owl-"+className+"-in";},singleItemTransition:function(){var base=this,outClass=base.outClass,inClass=base.inClass,$currentItem=base.$owlItems.eq(base.currentItem),$prevItem=base.$owlItems.eq(base.prevItem),prevPos=Math.abs(base.positionsInArray[base.currentItem])+base.positionsInArray[base.prevItem],origin=Math.abs(base.positionsInArray[base.currentItem])+base.itemWidth/2,animEnd='webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend';base.isTransition=true;base.$owlWrapper.addClass('owl-origin').css({"-webkit-transform-origin":origin+"px","-moz-perspective-origin":origin+"px","perspective-origin":origin+"px"});function transStyles(prevPos){return{"position":"relative","left":prevPos+"px"};}
$prevItem.css(transStyles(prevPos,10)).addClass(outClass).on(animEnd,function(){base.endPrev=true;$prevItem.off(animEnd);base.clearTransStyle($prevItem,outClass);});$currentItem.addClass(inClass).on(animEnd,function(){base.endCurrent=true;$currentItem.off(animEnd);base.clearTransStyle($currentItem,inClass);});},clearTransStyle:function(item,classToRemove){var base=this;item.css({"position":"","left":""}).removeClass(classToRemove);if(base.endPrev&&base.endCurrent){base.$owlWrapper.removeClass('owl-origin');base.endPrev=false;base.endCurrent=false;base.isTransition=false;}},owlStatus:function(){var base=this;base.owl={"userOptions":base.userOptions,"baseElement":base.$elem,"userItems":base.$userItems,"owlItems":base.$owlItems,"currentItem":base.currentItem,"prevItem":base.prevItem,"visibleItems":base.visibleItems,"isTouch":base.browser.isTouch,"browser":base.browser,"dragDirection":base.dragDirection};},clearEvents:function(){var base=this;base.$elem.off(".owl owl mousedown.disableTextSelect");$(document).off(".owl owl");$(window).off("resize",base.resizer);},unWrap:function(){var base=this;if(base.$elem.children().length!==0){base.$owlWrapper.unwrap();base.$userItems.unwrap().unwrap();if(base.owlControls){base.owlControls.remove();}}
base.clearEvents();base.$elem.attr({style:base.$elem.data("owl-originalStyles")||"",class:base.$elem.data("owl-originalClasses")});},destroy:function(){var base=this;base.stop();window.clearInterval(base.checkVisible);base.unWrap();base.$elem.removeData();},reinit:function(newOptions){var base=this,options=$.extend({},base.userOptions,newOptions);base.unWrap();base.init(options,base.$elem);},addItem:function(htmlString,targetPosition){var base=this,position;if(!htmlString){return false;}
if(base.$elem.children().length===0){base.$elem.append(htmlString);base.setVars();return false;}
base.unWrap();if(targetPosition===undefined||targetPosition===-1){position=-1;}else{position=targetPosition;}
if(position>=base.$userItems.length||position===-1){base.$userItems.eq(-1).after(htmlString);}else{base.$userItems.eq(position).before(htmlString);}
base.setVars();},removeItem:function(targetPosition){var base=this,position;if(base.$elem.children().length===0){return false;}
if(targetPosition===undefined||targetPosition===-1){position=-1;}else{position=targetPosition;}
base.unWrap();base.$userItems.eq(position).remove();base.setVars();}};$.fn.owlCarousel=function(options){return this.each(function(){if($(this).data("owl-init")===true){return false;}
$(this).data("owl-init",true);var carousel=Object.create(Carousel);carousel.init(options,this);$.data(this,"owlCarousel",carousel);});};$.fn.owlCarousel.options={direction:'ltr',items:5,itemsCustom:false,itemsDesktop:[1199,4],itemsDesktopSmall:[979,3],itemsTablet:[768,2],itemsTabletSmall:false,itemsMobile:[479,1],singleItem:false,itemsScaleUp:false,slideSpeed:200,paginationSpeed:800,rewindSpeed:1000,autoPlay:false,stopOnHover:false,navigation:false,navigationText:["prev","next"],rewindNav:true,scrollPerPage:false,pagination:true,paginationNumbers:false,responsive:true,responsiveRefreshRate:200,responsiveBaseWidth:window,baseClass:"owl-carousel",theme:"owl-theme",lazyLoad:false,lazyFollow:true,lazyEffect:"fade",autoHeight:false,jsonPath:false,jsonSuccess:false,dragBeforeAnimFinish:true,mouseDrag:true,touchDrag:true,addClassActive:false,transitionStyle:false,beforeUpdate:false,afterUpdate:false,beforeInit:false,afterInit:false,beforeMove:false,afterMove:false,afterAction:false,startDragging:false,afterLazyLoad:false};}(jQuery,window,document));;/*! fancyBox v2.1.5 fancyapps.com | fancyapps.com/fancybox/#license */
(function(r,G,f,v){var J=f("html"),n=f(r),p=f(G),b=f.fancybox=function(){b.open.apply(this,arguments)},I=navigator.userAgent.match(/msie/i),B=null,s=G.createTouch!==v,t=function(a){return a&&a.hasOwnProperty&&a instanceof f},q=function(a){return a&&"string"===f.type(a)},E=function(a){return q(a)&&0<a.indexOf("%")},l=function(a,d){var e=parseInt(a,10)||0;d&&E(a)&&(e*=b.getViewport()[d]/100);return Math.ceil(e)},w=function(a,b){return l(a,b)+"px"};f.extend(b,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!s,fitToView:!0,aspectRatio:!1,topRatio:0.5,leftRatio:0.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3E3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+
(I?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:f.noop,beforeLoad:f.noop,afterLoad:f.noop,beforeShow:f.noop,afterShow:f.noop,beforeChange:f.noop,beforeClose:f.noop,afterClose:f.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(a,d){if(a&&(f.isPlainObject(d)||(d={}),!1!==b.close(!0)))return f.isArray(a)||(a=t(a)?f(a).get():[a]),f.each(a,function(e,c){var k={},g,h,j,m,l;"object"===f.type(c)&&(c.nodeType&&(c=f(c)),t(c)?(k={href:c.data("fancybox-href")||c.attr("href"),title:c.data("fancybox-title")||c.attr("title"),isDom:!0,element:c},f.metadata&&f.extend(!0,k,c.metadata())):k=c);g=d.href||k.href||(q(c)?c:null);h=d.title!==v?d.title:k.title||"";m=(j=d.content||k.content)?"html":d.type||k.type;!m&&k.isDom&&(m=c.data("fancybox-type"),m||(m=(m=c.prop("class").match(/fancybox\.(\w+)/))?m[1]:null));q(g)&&(m||(b.isImage(g)?m="image":b.isSWF(g)?m="swf":"#"===g.charAt(0)?m="inline":q(c)&&(m="html",j=c)),"ajax"===m&&(l=g.split(/\s+/,2),g=l.shift(),l=l.shift()));j||("inline"===m?g?j=f(q(g)?g.replace(/.*(?=#[^\s]+$)/,""):g):k.isDom&&(j=c):"html"===m?j=g:!m&&(!g&&k.isDom)&&(m="inline",j=c));f.extend(k,{href:g,type:m,content:j,title:h,selector:l});a[e]=k}),b.opts=f.extend(!0,{},b.defaults,d),d.keys!==v&&(b.opts.keys=d.keys?f.extend({},b.defaults.keys,d.keys):!1),b.group=a,b._start(b.opts.index)},cancel:function(){var a=b.coming;a&&!1!==b.trigger("onCancel")&&(b.hideLoading(),b.ajaxLoad&&b.ajaxLoad.abort(),b.ajaxLoad=null,b.imgPreload&&(b.imgPreload.onload=b.imgPreload.onerror=null),a.wrap&&a.wrap.stop(!0,!0).trigger("onReset").remove(),b.coming=null,b.current||b._afterZoomOut(a))},close:function(a){b.cancel();!1!==b.trigger("beforeClose")&&(b.unbindEvents(),b.isActive&&(!b.isOpen||!0===a?(f(".fancybox-wrap").stop(!0).trigger("onReset").remove(),b._afterZoomOut()):(b.isOpen=b.isOpened=!1,b.isClosing=!0,f(".fancybox-item, .fancybox-nav").remove(),b.wrap.stop(!0,!0).removeClass("fancybox-opened"),b.transitions[b.current.closeMethod]())))},play:function(a){var d=function(){clearTimeout(b.player.timer)},e=function(){d();b.current&&b.player.isActive&&(b.player.timer=setTimeout(b.next,b.current.playSpeed))},c=function(){d();p.unbind(".player");b.player.isActive=!1;b.trigger("onPlayEnd")};if(!0===a||!b.player.isActive&&!1!==a){if(b.current&&(b.current.loop||b.current.index<b.group.length-1))b.player.isActive=!0,p.bind({"onCancel.player beforeClose.player":c,"onUpdate.player":e,"beforeLoad.player":d}),e(),b.trigger("onPlayStart")}else c()},next:function(a){var d=b.current;d&&(q(a)||(a=d.direction.next),b.jumpto(d.index+1,a,"next"))},prev:function(a){var d=b.current;d&&(q(a)||(a=d.direction.prev),b.jumpto(d.index-1,a,"prev"))},jumpto:function(a,d,e){var c=b.current;c&&(a=l(a),b.direction=d||c.direction[a>=c.index?"next":"prev"],b.router=e||"jumpto",c.loop&&(0>a&&(a=c.group.length+a%c.group.length),a%=c.group.length),c.group[a]!==v&&(b.cancel(),b._start(a)))},reposition:function(a,d){var e=b.current,c=e?e.wrap:null,k;c&&(k=b._getPosition(d),a&&"scroll"===a.type?(delete k.position,c.stop(!0,!0).animate(k,200)):(c.css(k),e.pos=f.extend({},e.dim,k)))},update:function(a){var d=a&&a.type,e=!d||"orientationchange"===d;e&&(clearTimeout(B),B=null);b.isOpen&&!B&&(B=setTimeout(function(){var c=b.current;c&&!b.isClosing&&(b.wrap.removeClass("fancybox-tmp"),(e||"load"===d||"resize"===d&&c.autoResize)&&b._setDimension(),"scroll"===d&&c.canShrink||b.reposition(a),b.trigger("onUpdate"),B=null)},e&&!s?0:300))},toggle:function(a){b.isOpen&&(b.current.fitToView="boolean"===f.type(a)?a:!b.current.fitToView,s&&(b.wrap.removeAttr("style").addClass("fancybox-tmp"),b.trigger("onUpdate")),b.update())},hideLoading:function(){p.unbind(".loading");f("#fancybox-loading").remove()},showLoading:function(){var a,d;b.hideLoading();a=f('<div id="fancybox-loading"><div></div></div>').click(b.cancel).appendTo("body");p.bind("keydown.loading",function(a){if(27===(a.which||a.keyCode))a.preventDefault(),b.cancel()});b.defaults.fixed||(d=b.getViewport(),a.css({position:"absolute",top:0.5*d.h+d.y,left:0.5*d.w+d.x}))},getViewport:function(){var a=b.current&&b.current.locked||!1,d={x:n.scrollLeft(),y:n.scrollTop()};a?(d.w=a[0].clientWidth,d.h=a[0].clientHeight):(d.w=s&&r.innerWidth?r.innerWidth:n.width(),d.h=s&&r.innerHeight?r.innerHeight:n.height());return d},unbindEvents:function(){b.wrap&&t(b.wrap)&&b.wrap.unbind(".fb");p.unbind(".fb");n.unbind(".fb")},bindEvents:function(){var a=b.current,d;a&&(n.bind("orientationchange.fb"+(s?"":" resize.fb")+(a.autoCenter&&!a.locked?" scroll.fb":""),b.update),(d=a.keys)&&p.bind("keydown.fb",function(e){var c=e.which||e.keyCode,k=e.target||e.srcElement;if(27===c&&b.coming)return!1;!e.ctrlKey&&(!e.altKey&&!e.shiftKey&&!e.metaKey&&(!k||!k.type&&!f(k).is("[contenteditable]")))&&f.each(d,function(d,k){if(1<a.group.length&&k[c]!==v)return b[d](k[c]),e.preventDefault(),!1;if(-1<f.inArray(c,k))return b[d](),e.preventDefault(),!1})}),f.fn.mousewheel&&a.mouseWheel&&b.wrap.bind("mousewheel.fb",function(d,c,k,g){for(var h=f(d.target||null),j=!1;h.length&&!j&&!h.is(".fancybox-skin")&&!h.is(".fancybox-wrap");)j=h[0]&&!(h[0].style.overflow&&"hidden"===h[0].style.overflow)&&(h[0].clientWidth&&h[0].scrollWidth>h[0].clientWidth||h[0].clientHeight&&h[0].scrollHeight>h[0].clientHeight),h=f(h).parent();if(0!==c&&!j&&1<b.group.length&&!a.canShrink){if(0<g||0<k)b.prev(0<g?"down":"left");else if(0>g||0>k)b.next(0>g?"up":"right");d.preventDefault()}}))},trigger:function(a,d){var e,c=d||b.coming||b.current;if(c){f.isFunction(c[a])&&(e=c[a].apply(c,Array.prototype.slice.call(arguments,1)));if(!1===e)return!1;c.helpers&&f.each(c.helpers,function(d,e){if(e&&b.helpers[d]&&f.isFunction(b.helpers[d][a]))b.helpers[d][a](f.extend(!0,{},b.helpers[d].defaults,e),c)});p.trigger(a)}},isImage:function(a){return q(a)&&a.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(a){return q(a)&&a.match(/\.(swf)((\?|#).*)?$/i)},_start:function(a){var d={},e,c;a=l(a);e=b.group[a]||null;if(!e)return!1;d=f.extend(!0,{},b.opts,e);e=d.margin;c=d.padding;"number"===f.type(e)&&(d.margin=[e,e,e,e]);"number"===f.type(c)&&(d.padding=[c,c,c,c]);d.modal&&f.extend(!0,d,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}});d.autoSize&&(d.autoWidth=d.autoHeight=!0);"auto"===d.width&&(d.autoWidth=!0);"auto"===d.height&&(d.autoHeight=!0);d.group=b.group;d.index=a;b.coming=d;if(!1===b.trigger("beforeLoad"))b.coming=null;else{c=d.type;e=d.href;if(!c)return b.coming=null,b.current&&b.router&&"jumpto"!==b.router?(b.current.index=a,b[b.router](b.direction)):!1;b.isActive=!0;if("image"===c||"swf"===c)d.autoHeight=d.autoWidth=!1,d.scrolling="visible";"image"===c&&(d.aspectRatio=!0);"iframe"===c&&s&&(d.scrolling="scroll");d.wrap=f(d.tpl.wrap).addClass("fancybox-"+(s?"mobile":"desktop")+" fancybox-type-"+c+" fancybox-tmp "+d.wrapCSS).appendTo(d.parent||"body");f.extend(d,{skin:f(".fancybox-skin",d.wrap),outer:f(".fancybox-outer",d.wrap),inner:f(".fancybox-inner",d.wrap)});f.each(["Top","Right","Bottom","Left"],function(a,b){d.skin.css("padding"+b,w(d.padding[a]))});b.trigger("onReady");if("inline"===c||"html"===c){if(!d.content||!d.content.length)return b._error("content")}else if(!e)return b._error("href");"image"===c?b._loadImage():"ajax"===c?b._loadAjax():"iframe"===c?b._loadIframe():b._afterLoad()}},_error:function(a){f.extend(b.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:a,content:b.coming.tpl.error});b._afterLoad()},_loadImage:function(){var a=b.imgPreload=new Image;a.onload=function(){this.onload=this.onerror=null;b.coming.width=this.width/b.opts.pixelRatio;b.coming.height=this.height/b.opts.pixelRatio;b._afterLoad()};a.onerror=function(){this.onload=this.onerror=null;b._error("image")};a.src=b.coming.href;!0!==a.complete&&b.showLoading()},_loadAjax:function(){var a=b.coming;b.showLoading();b.ajaxLoad=f.ajax(f.extend({},a.ajax,{url:a.href,error:function(a,e){b.coming&&"abort"!==e?b._error("ajax",a):b.hideLoading()},success:function(d,e){"success"===e&&(a.content=d,b._afterLoad())}}))},_loadIframe:function(){var a=b.coming,d=f(a.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",s?"auto":a.iframe.scrolling).attr("src",a.href);f(a.wrap).bind("onReset",function(){try{f(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(a){}});a.iframe.preload&&(b.showLoading(),d.one("load",function(){f(this).data("ready",1);s||f(this).bind("load.fb",b.update);f(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();b._afterLoad()}));a.content=d.appendTo(a.inner);a.iframe.preload||b._afterLoad()},_preloadImages:function(){var a=b.group,d=b.current,e=a.length,c=d.preload?Math.min(d.preload,e-1):0,f,g;for(g=1;g<=c;g+=1)f=a[(d.index+g)%e],"image"===f.type&&f.href&&((new Image).src=f.href)},_afterLoad:function(){var a=b.coming,d=b.current,e,c,k,g,h;b.hideLoading();if(a&&!1!==b.isActive)if(!1===b.trigger("afterLoad",a,d))a.wrap.stop(!0).trigger("onReset").remove(),b.coming=null;else{d&&(b.trigger("beforeChange",d),d.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove());b.unbindEvents();e=a.content;c=a.type;k=a.scrolling;f.extend(b,{wrap:a.wrap,skin:a.skin,outer:a.outer,inner:a.inner,current:a,previous:d});g=a.href;switch(c){case"inline":case"ajax":case"html":a.selector?e=f("<div>").html(e).find(a.selector):t(e)&&(e.data("fancybox-placeholder")||e.data("fancybox-placeholder",f('<div class="fancybox-placeholder"></div>').insertAfter(e).hide()),e=e.show().detach(),a.wrap.bind("onReset",function(){f(this).find(e).length&&e.hide().replaceAll(e.data("fancybox-placeholder")).data("fancybox-placeholder",!1)}));break;case"image":e=a.tpl.image.replace("{href}",g);break;case"swf":e='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+g+'"></param>',h="",f.each(a.swf,function(a,b){e+='<param name="'+a+'" value="'+b+'"></param>';h+=" "+a+'="'+b+'"'}),e+='<embed src="'+g+'" type="application/x-shockwave-flash" width="100%" height="100%"'+h+"></embed></object>"}(!t(e)||!e.parent().is(a.inner))&&a.inner.append(e);b.trigger("beforeShow");a.inner.css("overflow","yes"===k?"scroll":"no"===k?"hidden":k);b._setDimension();b.reposition();b.isOpen=!1;b.coming=null;b.bindEvents();if(b.isOpened){if(d.prevMethod)b.transitions[d.prevMethod]()}else f(".fancybox-wrap").not(a.wrap).stop(!0).trigger("onReset").remove();b.transitions[b.isOpened?a.nextMethod:a.openMethod]();b._preloadImages()}},_setDimension:function(){var a=b.getViewport(),d=0,e=!1,c=!1,e=b.wrap,k=b.skin,g=b.inner,h=b.current,c=h.width,j=h.height,m=h.minWidth,u=h.minHeight,n=h.maxWidth,p=h.maxHeight,s=h.scrolling,q=h.scrollOutside?h.scrollbarWidth:0,x=h.margin,y=l(x[1]+x[3]),r=l(x[0]+x[2]),v,z,t,C,A,F,B,D,H;e.add(k).add(g).width("auto").height("auto").removeClass("fancybox-tmp");x=l(k.outerWidth(!0)-k.width());v=l(k.outerHeight(!0)-k.height());z=y+x;t=r+v;C=E(c)?(a.w-z)*l(c)/100:c;A=E(j)?(a.h-t)*l(j)/100:j;if("iframe"===h.type){if(H=h.content,h.autoHeight&&1===H.data("ready"))try{H[0].contentWindow.document.location&&(g.width(C).height(9999),F=H.contents().find("body"),q&&F.css("overflow-x","hidden"),A=F.outerHeight(!0))}catch(G){}}else if(h.autoWidth||h.autoHeight)g.addClass("fancybox-tmp"),h.autoWidth||g.width(C),h.autoHeight||g.height(A),h.autoWidth&&(C=g.width()),h.autoHeight&&(A=g.height()),g.removeClass("fancybox-tmp");c=l(C);j=l(A);D=C/A;m=l(E(m)?l(m,"w")-z:m);n=l(E(n)?l(n,"w")-z:n);u=l(E(u)?l(u,"h")-t:u);p=l(E(p)?l(p,"h")-t:p);F=n;B=p;h.fitToView&&(n=Math.min(a.w-z,n),p=Math.min(a.h-t,p));z=a.w-y;r=a.h-r;h.aspectRatio?(c>n&&(c=n,j=l(c/D)),j>p&&(j=p,c=l(j*D)),c<m&&(c=m,j=l(c/D)),j<u&&(j=u,c=l(j*D))):(c=Math.max(m,Math.min(c,n)),h.autoHeight&&"iframe"!==h.type&&(g.width(c),j=g.height()),j=Math.max(u,Math.min(j,p)));if(h.fitToView)if(g.width(c).height(j),e.width(c+x),a=e.width(),y=e.height(),h.aspectRatio)for(;(a>z||y>r)&&(c>m&&j>u)&&!(19<d++);)j=Math.max(u,Math.min(p,j-10)),c=l(j*D),c<m&&(c=m,j=l(c/D)),c>n&&(c=n,j=l(c/D)),g.width(c).height(j),e.width(c+x),a=e.width(),y=e.height();else c=Math.max(m,Math.min(c,c-(a-z))),j=Math.max(u,Math.min(j,j-(y-r)));q&&("auto"===s&&j<A&&c+x+q<z)&&(c+=q);g.width(c).height(j);e.width(c+x);a=e.width();y=e.height();e=(a>z||y>r)&&c>m&&j>u;c=h.aspectRatio?c<F&&j<B&&c<C&&j<A:(c<F||j<B)&&(c<C||j<A);f.extend(h,{dim:{width:w(a),height:w(y)},origWidth:C,origHeight:A,canShrink:e,canExpand:c,wPadding:x,hPadding:v,wrapSpace:y-k.outerHeight(!0),skinSpace:k.height()-j});!H&&(h.autoHeight&&j>u&&j<p&&!c)&&g.height("auto")},_getPosition:function(a){var d=b.current,e=b.getViewport(),c=d.margin,f=b.wrap.width()+c[1]+c[3],g=b.wrap.height()+c[0]+c[2],c={position:"absolute",top:c[0],left:c[3]};d.autoCenter&&d.fixed&&!a&&g<=e.h&&f<=e.w?c.position="fixed":d.locked||(c.top+=e.y,c.left+=e.x);c.top=w(Math.max(c.top,c.top+(e.h-g)*d.topRatio));c.left=w(Math.max(c.left,c.left+(e.w-f)*d.leftRatio));return c},_afterZoomIn:function(){var a=b.current;a&&(b.isOpen=b.isOpened=!0,b.wrap.css("overflow","visible").addClass("fancybox-opened"),b.update(),(a.closeClick||a.nextClick&&1<b.group.length)&&b.inner.css("cursor","pointer").bind("click.fb",function(d){!f(d.target).is("a")&&!f(d.target).parent().is("a")&&(d.preventDefault(),b[a.closeClick?"close":"next"]())}),a.closeBtn&&f(a.tpl.closeBtn).appendTo(b.skin).bind("click.fb",function(a){a.preventDefault();b.close()}),a.arrows&&1<b.group.length&&((a.loop||0<a.index)&&f(a.tpl.prev).appendTo(b.outer).bind("click.fb",b.prev),(a.loop||a.index<b.group.length-1)&&f(a.tpl.next).appendTo(b.outer).bind("click.fb",b.next)),b.trigger("afterShow"),!a.loop&&a.index===a.group.length-1?b.play(!1):b.opts.autoPlay&&!b.player.isActive&&(b.opts.autoPlay=!1,b.play()))},_afterZoomOut:function(a){a=a||b.current;f(".fancybox-wrap").trigger("onReset").remove();f.extend(b,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null});b.trigger("afterClose",a)}});b.transitions={getOrigPosition:function(){var a=b.current,d=a.element,e=a.orig,c={},f=50,g=50,h=a.hPadding,j=a.wPadding,m=b.getViewport();!e&&(a.isDom&&d.is(":visible"))&&(e=d.find("img:first"),e.length||(e=d));t(e)?(c=e.offset(),e.is("img")&&(f=e.outerWidth(),g=e.outerHeight())):(c.top=m.y+(m.h-g)*a.topRatio,c.left=m.x+(m.w-f)*a.leftRatio);if("fixed"===b.wrap.css("position")||a.locked)c.top-=m.y,c.left-=m.x;return c={top:w(c.top-h*a.topRatio),left:w(c.left-j*a.leftRatio),width:w(f+j),height:w(g+h)}},step:function(a,d){var e,c,f=d.prop;c=b.current;var g=c.wrapSpace,h=c.skinSpace;if("width"===f||"height"===f)e=d.end===d.start?1:(a-d.start)/(d.end-d.start),b.isClosing&&(e=1-e),c="width"===f?c.wPadding:c.hPadding,c=a-c,b.skin[f](l("width"===f?c:c-g*e)),b.inner[f](l("width"===f?c:c-g*e-h*e))},zoomIn:function(){var a=b.current,d=a.pos,e=a.openEffect,c="elastic"===e,k=f.extend({opacity:1},d);delete k.position;c?(d=this.getOrigPosition(),a.openOpacity&&(d.opacity=0.1)):"fade"===e&&(d.opacity=0.1);b.wrap.css(d).animate(k,{duration:"none"===e?0:a.openSpeed,easing:a.openEasing,step:c?this.step:null,complete:b._afterZoomIn})},zoomOut:function(){var a=b.current,d=a.closeEffect,e="elastic"===d,c={opacity:0.1};e&&(c=this.getOrigPosition(),a.closeOpacity&&(c.opacity=0.1));b.wrap.animate(c,{duration:"none"===d?0:a.closeSpeed,easing:a.closeEasing,step:e?this.step:null,complete:b._afterZoomOut})},changeIn:function(){var a=b.current,d=a.nextEffect,e=a.pos,c={opacity:1},f=b.direction,g;e.opacity=0.1;"elastic"===d&&(g="down"===f||"up"===f?"top":"left","down"===f||"right"===f?(e[g]=w(l(e[g])-200),c[g]="+=200px"):(e[g]=w(l(e[g])+200),c[g]="-=200px"));"none"===d?b._afterZoomIn():b.wrap.css(e).animate(c,{duration:a.nextSpeed,easing:a.nextEasing,complete:b._afterZoomIn})},changeOut:function(){var a=b.previous,d=a.prevEffect,e={opacity:0.1},c=b.direction;"elastic"===d&&(e["down"===c||"up"===c?"top":"left"]=("up"===c||"left"===c?"-":"+")+"=200px");a.wrap.animate(e,{duration:"none"===d?0:a.prevSpeed,easing:a.prevEasing,complete:function(){f(this).trigger("onReset").remove()}})}};b.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!s,fixed:!0},overlay:null,fixed:!1,el:f("html"),create:function(a){a=f.extend({},this.defaults,a);this.overlay&&this.close();this.overlay=f('<div class="fancybox-overlay"></div>').appendTo(b.coming?b.coming.parent:a.parent);this.fixed=!1;a.fixed&&b.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(a){var d=this;a=f.extend({},this.defaults,a);this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(a);this.fixed||(n.bind("resize.overlay",f.proxy(this.update,this)),this.update());a.closeClick&&this.overlay.bind("click.overlay",function(a){if(f(a.target).hasClass("fancybox-overlay"))return b.isActive?b.close():d.close(),!1});this.overlay.css(a.css).show()},close:function(){var a,b;n.unbind("resize.overlay");this.el.hasClass("fancybox-lock")&&(f(".fancybox-margin").removeClass("fancybox-margin"),a=n.scrollTop(),b=n.scrollLeft(),this.el.removeClass("fancybox-lock"),n.scrollTop(a).scrollLeft(b));f(".fancybox-overlay").remove().hide();f.extend(this,{overlay:null,fixed:!1})},update:function(){var a="100%",b;this.overlay.width(a).height("100%");I?(b=Math.max(G.documentElement.offsetWidth,G.body.offsetWidth),p.width()>b&&(a=p.width())):p.width()>n.width()&&(a=p.width());this.overlay.width(a).height(p.height())},onReady:function(a,b){var e=this.overlay;f(".fancybox-overlay").stop(!0,!0);e||this.create(a);a.locked&&(this.fixed&&b.fixed)&&(e||(this.margin=p.height()>n.height()?f("html").css("margin-right").replace("px",""):!1),b.locked=this.overlay.append(b.wrap),b.fixed=!1);!0===a.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(a,b){var e,c;b.locked&&(!1!==this.margin&&(f("*").filter(function(){return"fixed"===f(this).css("position")&&!f(this).hasClass("fancybox-overlay")&&!f(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),e=n.scrollTop(),c=n.scrollLeft(),this.el.addClass("fancybox-lock"),n.scrollTop(e).scrollLeft(c));this.open(a)},onUpdate:function(){this.fixed||this.update()},afterClose:function(a){this.overlay&&!b.coming&&this.overlay.fadeOut(a.speedOut,f.proxy(this.close,this))}};b.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(a){var d=b.current,e=d.title,c=a.type;f.isFunction(e)&&(e=e.call(d.element,d));if(q(e)&&""!==f.trim(e)){d=f('<div class="fancybox-title fancybox-title-'+c+'-wrap">'+e+"</div>");switch(c){case"inside":c=b.skin;break;case"outside":c=b.wrap;break;case"over":c=b.inner;break;default:c=b.skin,d.appendTo("body"),I&&d.width(d.width()),d.wrapInner('<span class="child"></span>'),b.current.margin[2]+=Math.abs(l(d.css("margin-bottom")))}d["top"===a.position?"prependTo":"appendTo"](c)}}};f.fn.fancybox=function(a){var d,e=f(this),c=this.selector||"",k=function(g){var h=f(this).blur(),j=d,k,l;!g.ctrlKey&&(!g.altKey&&!g.shiftKey&&!g.metaKey)&&!h.is(".fancybox-wrap")&&(k=a.groupAttr||"data-fancybox-group",l=h.attr(k),l||(k="rel",l=h.get(0)[k]),l&&(""!==l&&"nofollow"!==l)&&(h=c.length?f(c):e,h=h.filter("["+k+'="'+l+'"]'),j=h.index(this)),a.index=j,!1!==b.open(h,a)&&g.preventDefault())};a=a||{};d=a.index||0;!c||!1===a.live?e.unbind("click.fb-start").bind("click.fb-start",k):p.undelegate(c,"click.fb-start").delegate(c+":not('.fancybox-item, .fancybox-nav')","click.fb-start",k);this.filter("[data-fancybox-start=1]").trigger("click");return this};p.ready(function(){var a,d;f.scrollbarWidth===v&&(f.scrollbarWidth=function(){var a=f('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),b=a.children(),b=b.innerWidth()-b.height(99).innerWidth();a.remove();return b});if(f.support.fixedPosition===v){a=f.support;d=f('<div style="position:fixed;top:20px;"></div>').appendTo("body");var e=20===d[0].offsetTop||15===d[0].offsetTop;d.remove();a.fixedPosition=e}f.extend(b.defaults,{scrollbarWidth:f.scrollbarWidth(),fixed:f.support.fixedPosition,parent:f("body")});a=f(r).width();J.addClass("fancybox-lock-test");d=f(r).width();J.removeClass("fancybox-lock-test");f("<style type='text/css'>.fancybox-margin{margin-right:"+(d-a)+"px;}</style>").appendTo("head")})})(window,document,jQuery);;(function(){$.fn.lofCountDown=function(options){return this.each(function(){new $.lofCountDown(this,options);});}
$.lofCountDown=function(obj,options){this.options=$.extend({autoStart:true,LeadingZero:true,DisplayFormat:"<div>%%D%% Days</div><div>%%H%% Hours</div><div>%%M%% Minutes</div><div>%%S%% Seconds</div>",FinishMessage:"Expired",CountActive:true,TargetDate:null},options||{});if(this.options.TargetDate==null||this.options.TargetDate==''){return;}
this.timer=null;this.element=obj;this.CountStepper=-1;this.CountStepper=Math.ceil(this.CountStepper);this.SetTimeOutPeriod=(Math.abs(this.CountStepper)-1)*1000+990;var dthen=new Date(this.options.TargetDate);var dnow=new Date();if(this.CountStepper>0){ddiff=new Date(dnow-dthen);}
else{ddiff=new Date(dthen-dnow);}
gsecs=Math.floor(ddiff.valueOf()/1000);this.CountBack(gsecs,this);};$.lofCountDown.fn=$.lofCountDown.prototype;$.lofCountDown.fn.extend=$.lofCountDown.extend=$.extend;$.lofCountDown.fn.extend({calculateDate:function(secs,num1,num2){var s=((Math.floor(secs/num1))%num2).toString();if(this.options.LeadingZero&&s.length<2){s="0"+s;}
return"<b>"+s+"</b>";},CountBack:function(secs,self){if(secs<0){self.element.innerHTML='<div class="lof-labelexpired"> '+self.options.FinishMessage+"</div>";return;}
clearInterval(self.timer);DisplayStr=self.options.DisplayFormat.replace(/%%D%%/g,self.calculateDate(secs,86400,100000));DisplayStr=DisplayStr.replace(/%%H%%/g,self.calculateDate(secs,3600,24));DisplayStr=DisplayStr.replace(/%%M%%/g,self.calculateDate(secs,60,60));DisplayStr=DisplayStr.replace(/%%S%%/g,self.calculateDate(secs,1,60));self.element.innerHTML=DisplayStr;if(self.options.CountActive){self.timer=null;self.timer=setTimeout(function(){self.CountBack((secs+self.CountStepper),self);},(self.SetTimeOutPeriod));}}})})(jQuery);;(function($){$.LeoCustomAjax=function(){this.leoData='leoajax=1';};$.LeoCustomAjax.prototype={processAjax:function(){var myElement=this;if(leoOption.productNumber&&$(".leo-qty").length)
myElement.getCategoryList();else if($(".leo-qty").length)
$(".leo-qty").remove();if(leoOption.productInfo&&$(".leo-more-info").length)
myElement.getProductListInfo();else if($(".leo-more-info").length)
$(".leo-more-info").remove();if(leoOption.productTran&&$(".product-additional").length)
myElement.getProductListTran();else if($(".product-additional").length)
$(".product-additional").remove();if(leoOption.productCdown&&$(".leo-more-cdown").length)
myElement.getProductCdownInfo();else if($(".leo-more-cdown").length)
$(".leo-more-cdown").remove();if(leoOption.productCdown&&$(".leo-more-color").length)
myElement.getProductColorInfo();else if($(".leo-more-color").length)
$(".leo-more-color").remove();if($('.ap-total-wishlist').length||$('.ap-total-compare').length)
{myElement.getCountWishlistCompare();}
if(myElement.leoData!="leoajax=1"){$.ajax({type:'POST',headers:{"cache-control":"no-cache"},url:baseDir+'modules/appagebuilder/apajax.php'+'?rand='+new Date().getTime(),async:true,cache:false,dataType:"json",data:myElement.leoData,success:function(jsonData){if(jsonData){if(jsonData.cat){for(i=0;i<jsonData.cat.length;i++){var str=jsonData.cat[i].total;var label=$("#leo-cat-"+jsonData.cat[i].id_category).data("str");if(typeof label!="undefined"){str+="<span>"+label+"</span>";}
$("#leo-cat-"+jsonData.cat[i].id_category).html(str);$("#leo-cat-"+jsonData.cat[i].id_category).show();}
$('.leo-qty').each(function(){if($(this).html()=='')
{$(this).html('0');$(this).show();}})}
if(jsonData.pro_info){var listProduct=new Array();for(i=0;i<jsonData.pro_info.length;i++){listProduct[jsonData.pro_info[i].id]=jsonData.pro_info[i].content;}
$(".leo-more-info").each(function(){$(this).html(listProduct[$(this).data("idproduct")]);});addEffectProducts();}
if(jsonData.pro_cdown){var listProduct=new Array();for(i=0;i<jsonData.pro_cdown.length;i++){listProduct[jsonData.pro_cdown[i].id]=jsonData.pro_cdown[i].content;}
$(".leo-more-cdown").each(function(){$(this).html(listProduct[$(this).data("idproduct")]);});}
if(jsonData.pro_color){var listProduct=new Array();for(i=0;i<jsonData.pro_color.length;i++){listProduct[jsonData.pro_color[i].id]=jsonData.pro_color[i].content;}
$(".leo-more-color").each(function(){$(this).html(listProduct[$(this).data("idproduct")]);});}
if(jsonData.pro_add){var listProductImg=new Array();var listProductName=new Array();for(i=0;i<jsonData.pro_add.length;i++){listProductImg[jsonData.pro_add[i].id]=jsonData.pro_add[i].content;listProductName[jsonData.pro_add[i].id]=jsonData.pro_add[i].name;}
iw=360;ih=360;if(typeof leoOption.homeWidth!=='undefined'){iw=leoOption.homeWidth;ih=leoOption.homeheight;}else{iw=$('.product_img_link .img-responsive').first().attr('width');ih=$('.product_img_link .img-responsive').first().attr('height');}
$(".product-additional").each(function(){if(listProductImg[$(this).data("idproduct")]){var str_image=listProductImg[$(this).data("idproduct")];var src_image=str_image.replace('home_default','home_default');var name_image=listProductName[$(this).data("idproduct")];$(this).html('<img class="img-responsive" title="'+name_image+'" alt="'+name_image+'" src="'+src_image+'" width="'+iw+'" height="'+ih+'"/>');}});}
if(jsonData.wishlist_products)
{$('.ap-total-wishlist').text(jsonData.wishlist_products);}
else
{$('.ap-total-wishlist').text('0');}
if(jsonData.compared_products)
{$('.ap-total-compare').text(jsonData.compared_products);}
else
{$('.ap-total-compare').text('0');}}},error:function(){}});}},getCountWishlistCompare:function()
{this.leoData+='&wishlist_compare=1';},getCategoryList:function(){var leoCatList="";$(".leo-qty").each(function(){if(leoCatList)
leoCatList+=","+$(this).attr("id");else
leoCatList=$(this).attr("id");});if(leoCatList){leoCatList=leoCatList.replace(/leo-cat-/g,"");this.leoData+='&cat_list='+leoCatList;}
return false;},getProductListInfo:function(){var leoProInfo="";$(".leo-more-info").each(function(){if(!leoProInfo)
leoProInfo+=$(this).data("idproduct");else
leoProInfo+=","+$(this).data("idproduct");});if(leoProInfo){this.leoData+='&pro_info='+leoProInfo;}
return false;},getProductCdownInfo:function(){var leoProCdown="";$(".leo-more-cdown").each(function(){if(!leoProCdown)
leoProCdown+=$(this).data("idproduct");else
leoProCdown+=","+$(this).data("idproduct");});if(leoProCdown){this.leoData+='&pro_cdown='+leoProCdown;}
return false;},getProductColorInfo:function(){var leoProColor="";$(".leo-more-color").each(function(){if(!leoProColor)
leoProColor+=$(this).data("idproduct");else
leoProColor+=","+$(this).data("idproduct");});if(leoProColor){this.leoData+='&pro_color='+leoProColor;}
return false;},getProductListTran:function(){var leoAdditional="";$(".product-additional").each(function(){if(!leoAdditional)
leoAdditional+=$(this).data("idproduct");else
leoAdditional+=","+$(this).data("idproduct");});if(leoAdditional){this.leoData+='&pro_add='+leoAdditional;}
return false;}};}(jQuery));function addJSProduct(currentProduct){$('.thumbs_list_'+currentProduct).serialScroll({items:'li:visible',prev:'.view_scroll_left_'+currentProduct,next:'.view_scroll_right_'+currentProduct,axis:'y',offset:0,start:0,stop:true,duration:700,step:1,lazy:true,lock:false,force:false,cycle:false});$('.thumbs_list_'+currentProduct).trigger('goto',1);$('.thumbs_list_'+currentProduct).trigger('goto',0);}
function addEffectProducts(){if(typeof(leoOption)!='undefined'&&leoOption.productInfo){$(".leo-more-info").each(function(){addJSProduct($(this).data("idproduct"));});addEffectProduct();}}
function addEffectProduct(){var speed=800;var effect="easeInOutQuad";$(".leo-more-info").each(function(){var leo_preview=this;$(leo_preview).find(".leo-hover-image").each(function(){$(this).mouseover(function(){var big_image=$(this).attr("rel");imgElement=$(leo_preview).parent().find(".product_img_link img").first();if(!imgElement.length){imgElement=$(leo_preview).parent().find(".product_image img").first();}
if(imgElement.length){$(imgElement).stop().animate({opacity:0},{duration:speed,easing:effect});$(imgElement).first().attr("src",big_image);$(imgElement).first().attr("data-rel",big_image);$(imgElement).stop().animate({opacity:1},{duration:speed,easing:effect});}});});$('.thickbox-ajax-'+$(this).data("idproduct")).fancybox({'hideOnContentClick':true,'transitionIn':'elastic','transitionOut':'elastic'});});}
function addEffOneImg(){var speed=800;var effect="easeInOutQuad";$(".product-additional").each(function(){if($(this).find("img").length){var leo_hover_image=$(this).parent().find("img").first();var leo_preview=$(this);$(this).parent().mouseenter(function(){$(this).find("img").first().stop().animate({opacity:0},{duration:speed,easing:effect});$(leo_preview).stop().animate({opacity:1},{duration:speed,easing:effect});});$(this).parent().mouseleave(function(){$(this).find("img").first().stop().animate({opacity:1},{duration:speed,easing:effect});$(leo_preview).stop().animate({opacity:0},{duration:speed,easing:effect});});}});}
function log(message){console.log(message);}
function onScrollInit(items){items.each(function(){var osElement=$(this);var animation=$(osElement).data("animation");var osAnimationDelay=$(osElement).data("animation-delay");osElement.css({"-webkit-animation-delay":osAnimationDelay,"-moz-animation-delay":osAnimationDelay,"animation-delay":osAnimationDelay});osElement.waypoint(function(){osElement.addClass("animated").addClass(animation);},{triggerOnce:true,offset:'90%'});});}
function initializeGmap(map,data,markers,nameGmap,zoom){map=new google.maps.Map(document.getElementById(nameGmap),{center:new google.maps.LatLng(latitude,longitude),zoom:zoom,mapTypeId:'roadmap'});if(data.length>0)
{setTimeout(createMarkers(map,markers,data),1500);}
else
{markers[0]=new google.maps.Marker({position:new google.maps.LatLng(latitude,longitude),animation:google.maps.Animation.DROP,map:map,});}};function createMarkers(map,markers,data){for(var i=0;i<data.length;i++){var obj=data[i];var lg=parseFloat(obj.longitude);var lt=parseFloat(obj.latitude);var name=obj.name;var address=obj.address;var other=obj.other;var id_store=obj.id_store;var has_store_picture=obj.has_store_picture;var latlng=new google.maps.LatLng(lt,lg);var html="<div style='min-width:200px;'><b>"+name+"</b><br/>"+address;html+=(has_store_picture?"<br /><br /><p><img src='"+img_store_dir+parseInt(id_store)+".jpg' alt='' /></p>":"");html+=other+"<a href='http://maps.google.com/maps?saddr=&daddr="+latlng+"' target='_blank'>"+translation_5+"<\/a>";html+="</div>";infowindow=new google.maps.InfoWindow({content:"loading..."});var marker=new google.maps.Marker({position:new google.maps.LatLng(lt,lg),animation:google.maps.Animation.DROP,map:map,icon:img_ps_dir+logo_store,title:obj.name,html:html});google.maps.event.addListener(marker,"click",function(){infowindow.setContent(this.html);infowindow.open(map,this);});markers[i]=marker;}}
function synSize(name){var obj=$("#"+name);var div=$(obj).closest(".gmap-cover");var gmap=$(div).find(".gmap");$(obj).height($(gmap).height());}
$(function(){$(".btn-show-more").click(function(){var page=parseInt($(this).data('page'));var btn=$(this);var config=$(this).closest(".ApProductList").find(".apconfig").val();btn.button("loading");$.ajax({headers:{"cache-control":"no-cache"},url:baseDir+'modules/appagebuilder/apajax.php',async:true,cache:false,dataType:"Json",data:{"config":config,"p":page},success:function(response){var boxCover=$(btn).closest(".box-show-more");if(!response.is_more){$(boxCover).removeClass("open");}
if(response.html){$(boxCover).prev().append(response.html);}
$(btn).data("page",(page+1));}}).always(function(){btn.button("reset");});});$(".has-animation").each(function(){onScrollInit($(this));});});(function($){window.addRule=function(selector,styles,sheet){styles=(function(styles){if(typeof styles==="string")return styles;var clone="";for(var prop in styles){if(styles.hasOwnProperty(prop)){var val=styles[prop];prop=prop.replace(/([A-Z])/g,"-$1").toLowerCase();clone+=prop+":"+(prop==="content"?'"'+val+'"':val)+"; ";}}
return clone;}(styles));sheet=sheet||document.styleSheets[document.styleSheets.length-1];if(sheet.insertRule)
{if(sheet.cssRules!==null&&sheet.cssRules.length!==0)
sheet.insertRule(selector+" {"+styles+"}",sheet.cssRules.length);}
else if(sheet.addRule)sheet.addRule(selector,styles);return this;};if($)$.fn.addRule=function(styles,sheet){addRule(this.selector,styles,sheet);return this;};}(this.jQuery||this.Zepto));function apPopupForm(){if($.totalStorage('apnewletter'))return;$.fancybox({'content':$(".ap-popup").html(),afterClose:function(event,ui){$.totalStorage('apnewletter','1');}});}
$(document).ready(function(){if($('.ap-popup').length){if($('.ap-popup').hasClass('index-only')&&$('body').attr('id')=='index')
apPopupForm();else
apPopupForm();}
$(".has-bg.bg-fullwidth").each(function(){id="#"+$(this).attr("id");bg=$(this).data("bg");$(id+":before").addRule({background:bg});});if(typeof stellar!=='undefined'&&stellar)
$.stellar({horizontalScrolling:false});currentPosX=[];currentPosY=[];$("div[data-mouse-parallax-strength]").each(function(){currentPos=$(this).css("background-position");if(typeof currentPos=="string")
{currentPosArray=currentPos.split(" ");}else
{currentPosArray=[$(this).css("background-position-x"),$(this).css("background-position-y")];}
currentPosX[$(this).data("mouse-parallax-rid")]=parseFloat(currentPosArray[0]);currentPosY[$(this).data("mouse-parallax-rid")]=parseFloat(currentPosArray[1]);$(this).mousemove(function(e){newPosX=currentPosX[$(this).data("mouse-parallax-rid")];newPosY=currentPosY[$(this).data("mouse-parallax-rid")];if($(this).data("mouse-parallax-axis")!="axis-y"){mparallaxPageX=e.pageX-$(this).offset().left;if($(this).hasClass("full-bg-screen"))
{mparallaxPageX=mparallaxPageX-1000;}
newPosX=(mparallaxPageX*$(this).data("mouse-parallax-strength")*-1)+newPosX;}
if($(this).data("mouse-parallax-axis")!="axis-x"){mparallaxPageY=e.pageY-$(this).offset().top;newPosY=mparallaxPageY*$(this).data("mouse-parallax-strength")*-1;}
$(this).css("background-position",newPosX+"px "+newPosY+"px");});});var ytIframeId;var ytVideoId;function onYouTubeIframeAPIReady(){$("div.iframe-youtube-api-tag").each(function(){ytIframeId=$(this).attr("id");ytVideoId=$(this).data("youtube-video-id");new YT.Player(ytIframeId,{videoId:ytVideoId,width:"100%",height:"100%",playerVars:{autoplay:1,controls:0,disablekb:1,fs:0,cc_load_policy:0,iv_load_policy:3,modestbranding:0,rel:0,showinfo:0,start:0},events:{"onReady":function(event){event.target.mute();setInterval(function(){event.target.seekTo(0);},(event.target.getDuration()-1)*1000);}}});});}
onYouTubeIframeAPIReady();if(typeof MediaElementPlayer!=='undefined'){var player1=new MediaElementPlayer('#special-youtube-video1');var player2=new MediaElementPlayer('#special-youtube-video2');if(player1)
{var auto_find=setInterval(function(){if($('#video-1 .mejs-overlay-play').html())
{$('#video-1 .mejs-overlay-play>.mejs-overlay-button').before('<div class="video-name">'+$('#special-youtube-video1').data('name')+'</div>');$('#video-1 .mejs-overlay-play').append('<div class="video-description">Watch video and <span>subscribe us<span></div>');clearInterval(auto_find);}},500);}
if(player2)
{var auto_find1=setInterval(function(){if($('#video-2 .mejs-overlay-play').html())
{$('#video-2 .mejs-overlay-play>.mejs-overlay-button').before('<div class="video-name">'+$('#special-youtube-video2').data('name')+'</div>');$('#video-2 .mejs-overlay-play').append('<div class="video-description">Watch video and <span>subscribe us<span></div>');clearInterval(auto_find1);}},500);}}
current_url=window.location.href;$('.apconfig').each(function(){param=$(this).data('type');value=$(this).data('id');var re=new RegExp("([?|&])"+param+"=.*?(&|$)","i");if(current_url.match(re))
$(this).attr('href',current_url.replace(re,'$1'+param+"="+value+'$2'));else{if(current_url.indexOf('?')==-1)
$(this).attr('href',current_url+'?'+param+"="+value);else
$(this).attr('href',current_url+'&'+param+"="+value);}});$(window).resize(function(){if($('.tab-pane .owl-carousel').length)
{$('.tab-pane .owl-carousel').each(function(index,element){if(!$(element).parents('.tab-pane').hasClass('active')&&typeof($(element).data('owlCarousel'))!=="undefined")
{var w_owl_active_tab=$(element).parents('.tab-pane').siblings('.active').find('.owl-carousel').width();$(element).width(w_owl_active_tab);$(element).data('owlCarousel').updateVars();$(element).width('auto');}});}})});;(function(){"use strict";var $,Animation,Growl,__bind=function(fn,me){return function(){return fn.apply(me,arguments);};};$=jQuery;Animation=(function(){function Animation(){}
Animation.transitions={"webkitTransition":"webkitTransitionEnd","mozTransition":"mozTransitionEnd","oTransition":"oTransitionEnd","transition":"transitionend"};Animation.transition=function($el){var el,result,type,_ref;el=$el[0];_ref=this.transitions;for(type in _ref){result=_ref[type];if(el.style[type]!=null){return result;}}};return Animation;})();Growl=(function(){Growl.settings={namespace:'growl',duration:3200,close:"&times;",location:"default",style:"default",size:"medium"};Growl.growl=function(settings){if(settings==null){settings={};}
this.initialize();return new Growl(settings);};Growl.initialize=function(){return $("body:not(:has(#growls))").append('<div id="growls" />');};function Growl(settings){if(settings==null){settings={};}
this.html=__bind(this.html,this);this.$growl=__bind(this.$growl,this);this.$growls=__bind(this.$growls,this);this.animate=__bind(this.animate,this);this.remove=__bind(this.remove,this);this.dismiss=__bind(this.dismiss,this);this.present=__bind(this.present,this);this.close=__bind(this.close,this);this.cycle=__bind(this.cycle,this);this.unbind=__bind(this.unbind,this);this.bind=__bind(this.bind,this);this.render=__bind(this.render,this);this.settings=$.extend({},Growl.settings,settings);this.$growls().attr('class',this.settings.location);this.render();}
Growl.prototype.render=function(){var $growl;$growl=this.$growl();this.$growls().append($growl);this.cycle($growl);};Growl.prototype.bind=function($growl){if($growl==null){$growl=this.$growl();}
return $growl.find("."+this.settings.namespace+"-close").on("click",this.close);};Growl.prototype.unbind=function($growl){if($growl==null){$growl=this.$growl();}
return $growl.find("."+(this.settings.namespace-close)).off("click",this.close);};Growl.prototype.cycle=function($growl){if($growl==null){$growl=this.$growl();}
return $growl.queue(this.present).delay(this.settings.duration).queue(this.dismiss).queue(this.remove);};Growl.prototype.close=function(event){var $growl;event.preventDefault();event.stopPropagation();$growl=this.$growl();return $growl.stop().queue(this.dismiss).queue(this.remove);};Growl.prototype.present=function(callback){var $growl;$growl=this.$growl();this.bind($growl);return this.animate($growl,""+this.settings.namespace+"-incoming",'out',callback);};Growl.prototype.dismiss=function(callback){var $growl;$growl=this.$growl();this.unbind($growl);return this.animate($growl,""+this.settings.namespace+"-outgoing",'in',callback);};Growl.prototype.remove=function(callback){this.$growl().remove();return callback();};Growl.prototype.animate=function($element,name,direction,callback){var transition;if(direction==null){direction='in';}
transition=Animation.transition($element);$element[direction==='in'?'removeClass':'addClass'](name);$element.offset().position;$element[direction==='in'?'addClass':'removeClass'](name);if(callback==null){return;}
if(transition!=null){$element.one(transition,callback);}else{callback();}};Growl.prototype.$growls=function(){return this.$_growls!=null?this.$_growls:this.$_growls=$('#growls');};Growl.prototype.$growl=function(){return this.$_growl!=null?this.$_growl:this.$_growl=$(this.html());};Growl.prototype.html=function(){return"<div class='"+this.settings.namespace+" "+this.settings.namespace+"-"+this.settings.style+" "+this.settings.namespace+"-"+this.settings.size+"'>\n  <div class='"+this.settings.namespace+"-close'>"+this.settings.close+"</div>\n  <div class='"+this.settings.namespace+"-title'>"+this.settings.title+"</div>\n  <div class='"+this.settings.namespace+"-message'>"+this.settings.message+"</div>\n</div>";};return Growl;})();$.growl=function(options){if(options==null){options={};}
return Growl.growl(options);};$.growl.error=function(options){var settings;if(options==null){options={};}
settings={title:"Error!",style:"error"};return $.growl($.extend(settings,options));};$.growl.notice=function(options){var settings;if(options==null){options={};}
settings={title:"Notice!",style:"notice"};return $.growl($.extend(settings,options));};$.growl.warning=function(options){var settings;if(options==null){options={};}
settings={title:"Warning!",style:"warning"};return $.growl($.extend(settings,options));};}).call(this);;;;/*!
 * jQuery Cookie Plugin
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */
(function($){$.cookie=function(key,value,options){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(value))||value===null||value===undefined)){options=$.extend({},options);if(value===null||value===undefined){options.expires=-1;}
if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days);}
value=String(value);return(document.cookie=[encodeURIComponent(key),'=',options.raw?value:encodeURIComponent(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}
options=value||{};var decode=options.raw?function(s){return s;}:decodeURIComponent;var pairs=document.cookie.split('; ');for(var i=0,pair;pair=pairs[i]&&pairs[i].split('=');i++){if(decode(pair[0])===key)return decode(pair[1]||'');}
return null;};})(jQuery);;(function($){var ColorPicker=function(){var
ids={},inAction,charMin=65,visible,tpl='<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>',defaults={eventName:'click',onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:'ff0000',livePreview:true,flat:false},fillRGBFields=function(hsb,cal){var rgb=HSBToRGB(hsb);$(cal).data('colorpicker').fields.eq(1).val(rgb.r).end().eq(2).val(rgb.g).end().eq(3).val(rgb.b).end();},fillHSBFields=function(hsb,cal){$(cal).data('colorpicker').fields.eq(4).val(hsb.h).end().eq(5).val(hsb.s).end().eq(6).val(hsb.b).end();},fillHexFields=function(hsb,cal){$(cal).data('colorpicker').fields.eq(0).val(HSBToHex(hsb)).end();},setSelector=function(hsb,cal){$(cal).data('colorpicker').selector.css('backgroundColor','#'+HSBToHex({h:hsb.h,s:100,b:100}));$(cal).data('colorpicker').selectorIndic.css({left:parseInt(150*hsb.s/100,10),top:parseInt(150*(100-hsb.b)/100,10)});},setHue=function(hsb,cal){$(cal).data('colorpicker').hue.css('top',parseInt(150-150*hsb.h/360,10));},setCurrentColor=function(hsb,cal){$(cal).data('colorpicker').currentColor.css('backgroundColor','#'+HSBToHex(hsb));},setNewColor=function(hsb,cal){$(cal).data('colorpicker').newColor.css('backgroundColor','#'+HSBToHex(hsb));},keyDown=function(ev){var pressedKey=ev.charCode||ev.keyCode||-1;if((pressedKey>charMin&&pressedKey<=90)||pressedKey==32){return false;}
var cal=$(this).parent().parent();if(cal.data('colorpicker').livePreview===true){change.apply(this);}},change=function(ev){var cal=$(this).parent().parent(),col;if(this.parentNode.className.indexOf('_hex')>0){cal.data('colorpicker').color=col=HexToHSB(fixHex(this.value));}else if(this.parentNode.className.indexOf('_hsb')>0){cal.data('colorpicker').color=col=fixHSB({h:parseInt(cal.data('colorpicker').fields.eq(4).val(),10),s:parseInt(cal.data('colorpicker').fields.eq(5).val(),10),b:parseInt(cal.data('colorpicker').fields.eq(6).val(),10)});}else{cal.data('colorpicker').color=col=RGBToHSB(fixRGB({r:parseInt(cal.data('colorpicker').fields.eq(1).val(),10),g:parseInt(cal.data('colorpicker').fields.eq(2).val(),10),b:parseInt(cal.data('colorpicker').fields.eq(3).val(),10)}));}
if(ev){fillRGBFields(col,cal.get(0));fillHexFields(col,cal.get(0));fillHSBFields(col,cal.get(0));}
setSelector(col,cal.get(0));setHue(col,cal.get(0));setNewColor(col,cal.get(0));cal.data('colorpicker').onChange.apply(cal,[col,HSBToHex(col),HSBToRGB(col)]);},blur=function(ev){var cal=$(this).parent().parent();cal.data('colorpicker').fields.parent().removeClass('colorpicker_focus');},focus=function(){charMin=this.parentNode.className.indexOf('_hex')>0?70:65;$(this).parent().parent().data('colorpicker').fields.parent().removeClass('colorpicker_focus');$(this).parent().addClass('colorpicker_focus');},downIncrement=function(ev){var field=$(this).parent().find('input').focus();var current={el:$(this).parent().addClass('colorpicker_slider'),max:this.parentNode.className.indexOf('_hsb_h')>0?360:(this.parentNode.className.indexOf('_hsb')>0?100:255),y:ev.pageY,field:field,val:parseInt(field.val(),10),preview:$(this).parent().parent().data('colorpicker').livePreview};$(document).bind('mouseup',current,upIncrement);$(document).bind('mousemove',current,moveIncrement);},moveIncrement=function(ev){ev.data.field.val(Math.max(0,Math.min(ev.data.max,parseInt(ev.data.val+ev.pageY-ev.data.y,10))));if(ev.data.preview){change.apply(ev.data.field.get(0),[true]);}
return false;},upIncrement=function(ev){change.apply(ev.data.field.get(0),[true]);ev.data.el.removeClass('colorpicker_slider').find('input').focus();$(document).unbind('mouseup',upIncrement);$(document).unbind('mousemove',moveIncrement);return false;},downHue=function(ev){var current={cal:$(this).parent(),y:$(this).offset().top};current.preview=current.cal.data('colorpicker').livePreview;$(document).bind('mouseup',current,upHue);$(document).bind('mousemove',current,moveHue);},moveHue=function(ev){change.apply(ev.data.cal.data('colorpicker').fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,(ev.pageY-ev.data.y))))/150,10)).get(0),[ev.data.preview]);return false;},upHue=function(ev){fillRGBFields(ev.data.cal.data('colorpicker').color,ev.data.cal.get(0));fillHexFields(ev.data.cal.data('colorpicker').color,ev.data.cal.get(0));$(document).unbind('mouseup',upHue);$(document).unbind('mousemove',moveHue);return false;},downSelector=function(ev){var current={cal:$(this).parent(),pos:$(this).offset()};current.preview=current.cal.data('colorpicker').livePreview;$(document).bind('mouseup',current,upSelector);$(document).bind('mousemove',current,moveSelector);},moveSelector=function(ev){change.apply(ev.data.cal.data('colorpicker').fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,(ev.pageY-ev.data.pos.top))))/150,10)).end().eq(5).val(parseInt(100*(Math.max(0,Math.min(150,(ev.pageX-ev.data.pos.left))))/150,10)).get(0),[ev.data.preview]);return false;},upSelector=function(ev){fillRGBFields(ev.data.cal.data('colorpicker').color,ev.data.cal.get(0));fillHexFields(ev.data.cal.data('colorpicker').color,ev.data.cal.get(0));$(document).unbind('mouseup',upSelector);$(document).unbind('mousemove',moveSelector);return false;},enterSubmit=function(ev){$(this).addClass('colorpicker_focus');},leaveSubmit=function(ev){$(this).removeClass('colorpicker_focus');},clickSubmit=function(ev){var cal=$(this).parent();var col=cal.data('colorpicker').color;cal.data('colorpicker').origColor=col;setCurrentColor(col,cal.get(0));cal.data('colorpicker').onSubmit(col,HSBToHex(col),HSBToRGB(col),cal.data('colorpicker').el);},show=function(ev){var cal=$('#'+$(this).data('colorpickerId'));cal.data('colorpicker').onBeforeShow.apply(this,[cal.get(0)]);var pos=$(this).offset();var viewPort=getViewport();var top=pos.top+this.offsetHeight;var left=pos.left;if(top+176>viewPort.t+viewPort.h){top-=this.offsetHeight+176;}
if(left+356>viewPort.l+viewPort.w){left-=356;}
cal.css({left:left+'px',top:top+'px'});if(cal.data('colorpicker').onShow.apply(this,[cal.get(0)])!=false){cal.show();}
$(document).bind('mousedown',{cal:cal},hide);return false;},hide=function(ev){if(!isChildOf(ev.data.cal.get(0),ev.target,ev.data.cal.get(0))){if(ev.data.cal.data('colorpicker').onHide.apply(this,[ev.data.cal.get(0)])!=false){ev.data.cal.hide();}
$(document).unbind('mousedown',hide);}},isChildOf=function(parentEl,el,container){if(parentEl==el){return true;}
if(parentEl.contains){return parentEl.contains(el);}
if(parentEl.compareDocumentPosition){return!!(parentEl.compareDocumentPosition(el)&16);}
var prEl=el.parentNode;while(prEl&&prEl!=container){if(prEl==parentEl)
return true;prEl=prEl.parentNode;}
return false;},getViewport=function(){var m=document.compatMode=='CSS1Compat';return{l:window.pageXOffset||(m?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(m?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(m?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(m?document.documentElement.clientHeight:document.body.clientHeight)};},fixHSB=function(hsb){return{h:Math.min(360,Math.max(0,hsb.h)),s:Math.min(100,Math.max(0,hsb.s)),b:Math.min(100,Math.max(0,hsb.b))};},fixRGB=function(rgb){return{r:Math.min(255,Math.max(0,rgb.r)),g:Math.min(255,Math.max(0,rgb.g)),b:Math.min(255,Math.max(0,rgb.b))};},fixHex=function(hex){var len=6-hex.length;if(len>0){var o=[];for(var i=0;i<len;i++){o.push('0');}
o.push(hex);hex=o.join('');}
return hex;},HexToRGB=function(hex){var hex=parseInt(((hex.indexOf('#')>-1)?hex.substring(1):hex),16);return{r:hex>>16,g:(hex&0x00FF00)>>8,b:(hex&0x0000FF)};},HexToHSB=function(hex){return RGBToHSB(HexToRGB(hex));},RGBToHSB=function(rgb){var hsb={h:0,s:0,b:0};var min=Math.min(rgb.r,rgb.g,rgb.b);var max=Math.max(rgb.r,rgb.g,rgb.b);var delta=max-min;hsb.b=max;if(max!=0){}
hsb.s=max!=0?255*delta/max:0;if(hsb.s!=0){if(rgb.r==max){hsb.h=(rgb.g-rgb.b)/delta;}else if(rgb.g==max){hsb.h=2+(rgb.b-rgb.r)/delta;}else{hsb.h=4+(rgb.r-rgb.g)/delta;}}else{hsb.h=-1;}
hsb.h*=60;if(hsb.h<0){hsb.h+=360;}
hsb.s*=100/255;hsb.b*=100/255;return hsb;},HSBToRGB=function(hsb){var rgb={};var h=Math.round(hsb.h);var s=Math.round(hsb.s*255/100);var v=Math.round(hsb.b*255/100);if(s==0){rgb.r=rgb.g=rgb.b=v;}else{var t1=v;var t2=(255-s)*v/255;var t3=(t1-t2)*(h%60)/60;if(h==360)h=0;if(h<60){rgb.r=t1;rgb.b=t2;rgb.g=t2+t3}
else if(h<120){rgb.g=t1;rgb.b=t2;rgb.r=t1-t3}
else if(h<180){rgb.g=t1;rgb.r=t2;rgb.b=t2+t3}
else if(h<240){rgb.b=t1;rgb.r=t2;rgb.g=t1-t3}
else if(h<300){rgb.b=t1;rgb.g=t2;rgb.r=t2+t3}
else if(h<360){rgb.r=t1;rgb.g=t2;rgb.b=t1-t3}
else{rgb.r=0;rgb.g=0;rgb.b=0}}
return{r:Math.round(rgb.r),g:Math.round(rgb.g),b:Math.round(rgb.b)};},RGBToHex=function(rgb){var hex=[rgb.r.toString(16),rgb.g.toString(16),rgb.b.toString(16)];$.each(hex,function(nr,val){if(val.length==1){hex[nr]='0'+val;}});return hex.join('');},HSBToHex=function(hsb){return RGBToHex(HSBToRGB(hsb));},restoreOriginal=function(){var cal=$(this).parent();var col=cal.data('colorpicker').origColor;cal.data('colorpicker').color=col;fillRGBFields(col,cal.get(0));fillHexFields(col,cal.get(0));fillHSBFields(col,cal.get(0));setSelector(col,cal.get(0));setHue(col,cal.get(0));setNewColor(col,cal.get(0));};return{init:function(opt){opt=$.extend({},defaults,opt||{});if(typeof opt.color=='string'){opt.color=HexToHSB(opt.color);}else if(opt.color.r!=undefined&&opt.color.g!=undefined&&opt.color.b!=undefined){opt.color=RGBToHSB(opt.color);}else if(opt.color.h!=undefined&&opt.color.s!=undefined&&opt.color.b!=undefined){opt.color=fixHSB(opt.color);}else{return this;}
return this.each(function(){if(!$(this).data('colorpickerId')){var options=$.extend({},opt);options.origColor=opt.color;var id='collorpicker_'+parseInt(Math.random()*1000);$(this).data('colorpickerId',id);var cal=$(tpl).attr('id',id);if(options.flat){cal.appendTo(this).show();}else{cal.appendTo(document.body);}
options.fields=cal.find('input').bind('keyup',keyDown).bind('change',change).bind('blur',blur).bind('focus',focus);cal.find('span').bind('mousedown',downIncrement).end().find('>div.colorpicker_current_color').bind('click',restoreOriginal);options.selector=cal.find('div.colorpicker_color').bind('mousedown',downSelector);options.selectorIndic=options.selector.find('div div');options.el=this;options.hue=cal.find('div.colorpicker_hue div');cal.find('div.colorpicker_hue').bind('mousedown',downHue);options.newColor=cal.find('div.colorpicker_new_color');options.currentColor=cal.find('div.colorpicker_current_color');cal.data('colorpicker',options);cal.find('div.colorpicker_submit').bind('mouseenter',enterSubmit).bind('mouseleave',leaveSubmit).bind('click',clickSubmit);fillRGBFields(options.color,cal.get(0));fillHSBFields(options.color,cal.get(0));fillHexFields(options.color,cal.get(0));setHue(options.color,cal.get(0));setSelector(options.color,cal.get(0));setCurrentColor(options.color,cal.get(0));setNewColor(options.color,cal.get(0));if(options.flat){cal.css({position:'relative',display:'block'});}else{$(this).bind(options.eventName,show);}}});},showPicker:function(){return this.each(function(){if($(this).data('colorpickerId')){show.apply(this);}});},hidePicker:function(){return this.each(function(){if($(this).data('colorpickerId')){$('#'+$(this).data('colorpickerId')).hide();}});},setColor:function(col){if(typeof col=='string'){col=HexToHSB(col);}else if(col.r!=undefined&&col.g!=undefined&&col.b!=undefined){col=RGBToHSB(col);}else if(col.h!=undefined&&col.s!=undefined&&col.b!=undefined){col=fixHSB(col);}else{return this;}
return this.each(function(){if($(this).data('colorpickerId')){var cal=$('#'+$(this).data('colorpickerId'));cal.data('colorpicker').color=col;cal.data('colorpicker').origColor=col;fillRGBFields(col,cal.get(0));fillHSBFields(col,cal.get(0));fillHexFields(col,cal.get(0));setHue(col,cal.get(0));setSelector(col,cal.get(0));setCurrentColor(col,cal.get(0));setNewColor(col,cal.get(0));}});}};}();$.fn.extend({ColorPicker:ColorPicker.init,ColorPickerHide:ColorPicker.hidePicker,ColorPickerShow:ColorPicker.showPicker,ColorPickerSetColor:ColorPicker.setColor});})(jQuery);;$(document).ready(function(){$('#panelTab a').click(function(e){e.preventDefault();$(this).tab('show');});var expiresThemConfigDay=1;$('#panelTab a:first').tab('show');$(".bg-config").hide();var $MAINCONTAINER=$("html");$(".background-images").each(function(){var $parent=this;var $input=$(".input-setting",$parent);$(".bi-wrapper > div",this).click(function(){$input.val($(this).data('val'));$(".bg-config",$parent).show();$('.bi-wrapper > div',$parent).removeClass('active');$(this).addClass('active');if($input.data('selector')){$($input.data('selector'),$($MAINCONTAINER)).css($input.data('attrs'),'url('+$(this).data('image')+')');}});$(".bg-config select",this).change(function(){if($input.data('selector')){$($input.data('selector'),$($MAINCONTAINER)).css($(this).data('attrs'),$(this).val());}});});$(".clear-bg").click(function(){var $parent=$(this).parent();var $input=$(".input-setting",$parent);if($input.val('')){if($parent.hasClass("background-images")){$('.bi-wrapper > div',$parent).removeClass('active');$($input.data('selector'),$($MAINCONTAINER)).css($input.data('attrs'),'none');$('ul select',$parent).each(function(){$($input.data('selector'),$($MAINCONTAINER)).css($(this).data('attrs'),'');});$('ul.bg-config',$parent).hide();$('ul select',$parent).val("");}else{$input.attr('style','')}
$($input.data('selector'),$($MAINCONTAINER)).css($input.data('attrs'),'inherit');}
$input.val('');return false;});$('.accordion-group input.input-setting').each(function(){var input=this;$(input).attr('readonly','readonly');$(input).ColorPicker({onChange:function(hsb,hex,rgb){$(input).css('backgroundColor','#'+hex);$(input).val(hex);if($(input).data('selector')){$($MAINCONTAINER).find($(input).data('selector')).css($(input).data('attrs'),"#"+$(input).val())}}});});$('.accordion-group select.input-setting').change(function(){var input=this;if($(input).data('selector')){var ex=$(input).data('attrs')=='font-size'?'px':"";$($MAINCONTAINER).find($(input).data('selector')).css($(input).data('attrs'),$(input).val()+ex);}});$(".paneltool .panelbutton").click(function(){$(this).parent().toggleClass("active");});$('.leo-dynamic-theme-skin').click(function(){if(!$(this).hasClass('current-theme-skin'))
{$('.leo-dynamic-theme-skin').removeClass('current-theme-skin');$(this).addClass('current-theme-skin');selectedSkin=$(this).data('theme-skin-id');$('.leo-dynamic-theme-skin').each(function(){$('html').removeClass($(this).data('theme-skin-id'));});$('html').addClass(selectedSkin);if(selectedSkin=='default')
{$('head #leo-dynamic-skin-css').remove();$('head #leo-dynamic-skin-css-rtl').remove();}else{skinRTLCss=$(this).data('theme-skin-rtl');skinFileUrl=$(this).data('theme-skin-css');if($('head #leo-dynamic-skin-css').length)
{$('head #leo-dynamic-skin-css').attr('href',skinFileUrl+'skin.css');}else{$('head').append('<link rel="stylesheet" id="leo-dynamic-skin-css" href="'+skinFileUrl+'skin.css" type="text/css" media="all" />');}
if($('head #leo-dynamic-skin-css-rtl').length&&skinRTLCss)
{$('head #leo-dynamic-skin-css-rtl').attr('href',skinFileUrl+'custom-rtl.css');}else if(skinRTLCss)
{$('head').append('<link rel="stylesheet" id="leo-dynamic-skin-css-rtl" href="'+skinFileUrl+'custom-rtl.css" type="text/css" media="all" />');}else{$('head #leo-dynamic-skin-css-rtl').remove();}}
configName=$('#leo-paneltool').data('cname')+'_default_skin';$.cookie(configName,selectedSkin,{expires:expiresThemConfigDay,path:'/'});}});$('.enable_fheader').click(function(){if(!$(this).hasClass('current')){configName=$('#leo-paneltool').data('cname')+'_enable_fheader';$('.enable_fheader').removeClass('current');$(this).addClass('current');if($(this).data('value')){$('body').addClass('keep-header');floatHeader();$.cookie(configName,1,{expires:expiresThemConfigDay,path:'/'});}
else{$('body').removeClass('keep-header');processFloatHeader(0,0);$.cookie(configName,0,{expires:expiresThemConfigDay,path:'/'});}}});var currentHeaderStyle=$('.leo-dynamic-update-header.current-header').data('header-style');$('.leo-dynamic-update-header').click(function(){if(!$(this).hasClass('current-header'))
{$('.leo-dynamic-update-header').removeClass('current-header');$(this).addClass('current-header');selectedHeader=$(this).data('header-style');$('body').removeClass(currentHeaderStyle);$('body').addClass(selectedHeader);currentHeaderStyle=selectedHeader;configName=$('#leo-paneltool').data('cname')+'_header_style';$.cookie(configName,selectedHeader,{expires:expiresThemConfigDay,path:'/'});}});var currentSideBarStyle=$('.leo-dynamic-update-side.current-sidebar').data('sidebar');var sideBarStyleList=[];$('.leo-dynamic-update-side').each(function(i){sideBarStyleList[i]=$(this).data('sidebar');});$('.leo-dynamic-update-side').click(function(){if(!$(this).hasClass('current-sidebar'))
{$('.leo-dynamic-update-side').removeClass('current-sidebar');$(this).addClass('current-sidebar');selectedHeader=$(this).data('sidebar');$.each(sideBarStyleList,function(index,value){$('body').removeClass(value);});$('body').addClass(selectedHeader);currentSideBarStyle=selectedHeader;getBodyClassByMenu();configName=$('#leo-paneltool').data('cname')+'_sidebarmenu';$.cookie(configName,selectedHeader,{expires:expiresThemConfigDay,path:'/'});}});var currentLayoutMode=$('.leo-dynamic-update-layout.current-layout-mod').data('layout-mod');$('.leo-dynamic-update-layout').click(function(){if(!$(this).hasClass('current-layout-mod'))
{$('.leo-dynamic-update-layout').removeClass('current-layout-mod');$(this).addClass('current-layout-mod');selectedLayout=$(this).data('layout-mod');$('body').removeClass(currentLayoutMode);$('body').addClass(selectedLayout);currentLayoutMode=selectedLayout;getBodyClassByMenu();configName=$('#leo-paneltool').data('cname')+'_layout_mode';$.cookie(configName,selectedLayout,{expires:expiresThemConfigDay,path:'/'});}});function getBodyClassByMenu(){if($('body').hasClass('sidebar-hide')||$('body').hasClass('header-hide-topmenu'))
$('body').removeClass('double-menu');else
if(!$('body').hasClass('double-menu'))$('body').addClass('double-menu');}});;(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-51138047-1','auto');ga('send','pageview');;var _pwr_button,_pwr_input=null;function getPsdFromRuchGeoPicker(psd){$.post('?fc=module&module=paczkawruchu&controller=api',{'method':'set_poper','set_destination':psd['poper'],'id_cart':pwr_id_cart});$('#paczkawruhchu_selected_box').html('<b>Wybrany kiosk:</b> '+psd['location']);$('#paczkawruhchu_selected_box').show();paczkawruchuOpts.selectedKiosk=true;$.ajax({url:pwrm_path+"ajax.php",type:"POST",data:{action:'submitPoper',secure_key:secure_key,poper:psd['poper'],id_cart:pwr_id_cart},dataType:"json",success:function(result){}});}
function paczkawruchuCGVUncheck(){$("#cgv").prop('checked',false);if(typeof $.uniform!='undefined')
$.uniform.update();if(typeof updatePaymentMethodsDisplay==='function')
updatePaymentMethodsDisplay();setTimeout(function(){if(typeof updatePaymentMethodsDisplay==='function')
updatePaymentMethodsDisplay();},1000);}
function paczkawruchuBindRadio(e){paczkawruchuCGVUncheck();iniPaczkaWRuchu($(this),true);}
var paczkawruchuCGV=function(){var id=parseInt($("input.delivery_option_radio:checked").val());if(paczkawruchuOpts.opc_enabled===1)
id=parseInt($("#carrierTable input[name='id_carrier']:checked").val().toString());if(id==paczkawruchuOpts.carrier&&paczkawruchuOpts.selectedKiosk===false)
{paczkawruchuCGVUncheck();showRuchGeoPicker();return;}};var iniPaczkaWRuchu=function(elem){paczkawruchuCGVUncheck();var allow=false;var id=parseInt(elem.val());var target_=null;if(paczkawruchuOpts.opc_enabled===1){target_=elem.closest('tr,.delivery_option').find('td.carrier_infos');}else{target_=elem.closest('tr,.delivery_option').find('td.delivery_option_logo').next('td');}
$('.pwr-get-poper').remove();$('#paczkawruhchu_selected_box').hide();$('#paczkawruhchu_selected_box').detach().appendTo(target_);if(id==paczkawruchuOpts.carrier&&target_&&paczkawruchuOpts.selectedKiosk===false)
{var btn=$('<button class="button btn btn-default button-medium pwr-get-poper"><span>Wybierz kiosk</span></button>');btn.on('click',function(e){e.preventDefault();showRuchGeoPicker();setTimeout(function(){$('#glassLayerPopup_1000_mainDiv').css({'position':'absolute','z-index':'1000000'},500);})});btn.appendTo(target_);}else{paczkawruchuOpts.selectedKiosk=false;$('.pwr-get-poper').remove();}};;$(document).ready(function(){$("#pd_cookielaw_close").click(function(event){event.preventDefault();$("#pd_cookielaw").slideUp("slow");pd_set_cookie();});});function pd_set_cookie(){var expire=new Date();expire.setMonth(expire.getMonth()+12);document.cookie="pd_cookielaw_cookie"+"="+escape(1)+((expire==null)?"":("; expires="+expire.toGMTString()))};;var GoogleAnalyticEnhancedECommerce={setCurrency:function(Currency){ga('set','&cu',Currency);},add:function(Product,Order,Impression){var Products={};var Orders={};var ProductFieldObject=['id','name','category','brand','variant','price','quantity','coupon','list','position','dimension1'];var OrderFieldObject=['id','affiliation','revenue','tax','shipping','coupon','list','step','option'];if(Product!=null){if(Impression&&Product.quantity!==undefined){delete Product.quantity;}
for(var productKey in Product){for(var i=0;i<ProductFieldObject.length;i++){if(productKey.toLowerCase()==ProductFieldObject[i]){if(Product[productKey]!=null){Products[productKey.toLowerCase()]=Product[productKey];}}}}}
if(Order!=null){for(var orderKey in Order){for(var j=0;j<OrderFieldObject.length;j++){if(orderKey.toLowerCase()==OrderFieldObject[j]){Orders[orderKey.toLowerCase()]=Order[orderKey];}}}}
if(Impression){ga('ec:addImpression',Products);}else{ga('ec:addProduct',Products);}},addProductDetailView:function(Product){this.add(Product);ga('ec:setAction','detail');ga('send','event','UX','detail','Product Detail View',{'nonInteraction':1});},addToCart:function(Product){this.add(Product);ga('ec:setAction','add');ga('send','event','UX','click','Add to Cart');},removeFromCart:function(Product){this.add(Product);ga('ec:setAction','remove');ga('send','event','UX','click','Remove From cart');},addProductImpression:function(Product){},refundByOrderId:function(Order){ga('ec:setAction','refund',{'id':Order.id});ga('send','event','Ecommerce','Refund',{'nonInteraction':1});},refundByProduct:function(Order){ga('ec:setAction','refund',{'id':Order.id,});ga('send','event','Ecommerce','Refund',{'nonInteraction':1});},addProductClick:function(Product){var ClickPoint=jQuery('a[href$="'+Product.url+'"].quick-view');ClickPoint.on("click",function(){GoogleAnalyticEnhancedECommerce.add(Product);ga('ec:setAction','click',{list:Product.list});ga('send','event','Product Quick View','click',Product.list,{'hitCallback':function(){return!ga.loaded;}});});},addProductClickByHttpReferal:function(Product){this.add(Product);ga('ec:setAction','click',{list:Product.list});ga('send','event','Product Click','click',Product.list,{'nonInteraction':1,'hitCallback':function(){return!ga.loaded;}});},addTransaction:function(Order){ga('ec:setAction','purchase',Order);ga('send','event','Transaction','purchase',{'hitCallback':function(){$.get(Order.url,{orderid:Order.id,customer:Order.customer});}});},addCheckout:function(Step){ga('ec:setAction','checkout',{'step':Step});}};